"use strict";var PIXI,fgui,__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e=window,i=!(!e.PointerEvent&&!e.MSPointerEvent),n="ontouchstart"in window&&PIXI.utils.isMobile.any,s=function(){function t(){}return t.Down=i?"pointerdown":n?"touchstart":"mousedown",t.Cancel=i?"pointercancel":n?"touchcancel":"mousecancel",t.Up=i?"pointerup":n?"touchend":"mouseup",t.Click=i?"pointertap":n?"tap":"click",t.UpOutside=i?"pointerupoutside":n?"touchendoutside":"mouseupoutside",t.Move=i?"pointermove":n?"touchmove":"mousemove",t.Over=i?"pointerover":n?null:"mouseover",t.Out=i?"pointerout":n?null:"mouseout",t.RightDown="rightdown",t.RightUp="rightup",t.RightClick="rightclick",t.RightUpOutside="rightupoutside",t}();t.InteractiveEvents=s,t.GearXMLNodeNameMap={gearDisplay:0,gearXY:1,gearSize:2,gearLook:3,gearColor:4,gearAni:5,gearText:6,gearIcon:7},t.BlendModeMap=["Normal","Add","Multiply","Screen","Overlay","Darken","Lighten","ColorDodge","ColorBurn","HardLight","SoftLight","Difference","Exclusion","Hue","Saturation","Color","Luminosity","NormalNPM","AddNPM","ScreenNPM"],t.ParseOverflowType=function(t){switch(t){case"visible":return 0;case"hidden":return 1;case"scroll":return 2;case"scale":return 3;case"scaleFree":return 4;default:return 0}},t.ParseScrollType=function(t){switch(t){case"horizontal":return 0;case"vertical":return 1;case"both":return 2;default:return 1}},t.ParseLoaderFillType=function(t){switch(t){case"none":return 0;case"scale":return 1;case"scaleMatchHeight":return 2;case"scaleMatchWidth":return 3;case"scaleFree":return 4;default:return 0}},t.ParseListLayoutType=function(t){switch(t){case"column":return 0;case"row":return 1;case"flow_hz":return 2;case"flow_vt":return 3;case"pagination":return 4;default:return 0}},t.ParseListSelectionMode=function(t){switch(t){case"single":return 0;case"multiple":return 1;case"multipleSingleClick":return 2;case"none":return 3;default:return 0}},t.ParsePackageItemType=function(t){switch(t){case"image":return 0;case"movieclip":return 2;case"sound":return 3;case"component":return 4;case"swf":return 1;case"font":return 6;case"atlas":return 7;default:return 5}},t.ParseProgressTitleType=function(t){switch(t){case"percent":return 0;case"valueAndmax":return 1;case"value":return 2;case"max":return 3;default:return 0}},t.ParseScrollBarDisplayType=function(t){switch(t){case"default":return 0;case"visible":return 1;case"auto":return 2;case"hidden":return 3;default:return 0}},t.ParseFlipType=function(t){switch(t){case"hz":return 1;case"vt":return 2;case"both":return 3;default:return 0}},t.ParseButtonMode=function(t){switch(t){case"Common":return 0;case"Check":return 1;case"Radio":return 2;default:return 0}},t.ParseAutoSizeType=function(t){switch(t){case"none":return 0;case"both":return 1;case"height":return 2;case"shrink":return 3;default:return 0}},t.ParseAlignType=function(t){switch(t){case"left":return"left";case"center":return"center";case"right":return"right";default:return"left"}},t.ParseVertAlignType=function(t){switch(t){case"top":return 0;case"middle":return 1;case"bottom":return 2;default:return 0}},t.ParseListChildrenRenderOrder=function(t){switch(t){case"ascent":return 0;case"descent":return 1;case"arch":return 2;default:return 0}};var r={Linear:createjs.Ease.linear,"Elastic.In":createjs.Ease.elasticIn,"Elastic.Out":createjs.Ease.elasticOut,"Elastic.InOut":createjs.Ease.elasticInOut,"Quad.In":createjs.Ease.quadIn,"Quad.Out":createjs.Ease.quadOut,"Quad.InOut":createjs.Ease.quadInOut,"Cube.In":createjs.Ease.cubicIn,"Cube.Out":createjs.Ease.cubicOut,"Cube.InOut":createjs.Ease.cubicInOut,"Quart.In":createjs.Ease.quartIn,"Quart.Out":createjs.Ease.quartOut,"Quart.InOut":createjs.Ease.quartInOut,"Quint.In":createjs.Ease.quintIn,"Quint.Out":createjs.Ease.quintOut,"Quint.InOut":createjs.Ease.quintInOut,"Sine.In":createjs.Ease.sineIn,"Sine.Out":createjs.Ease.sineOut,"Sine.InOut":createjs.Ease.sineInOut,"Bounce.In":createjs.Ease.bounceIn,"Bounce.Out":createjs.Ease.bounceOut,"Bounce.InOut":createjs.Ease.bounceInOut,"Circ.In":createjs.Ease.circIn,"Circ.Out":createjs.Ease.circOut,"Circ.InOut":createjs.Ease.circInOut,"Expo.In":createjs.Ease.quartIn,"Expo.Out":createjs.Ease.quartOut,"Expo.InOut":createjs.Ease.quartInOut,"Back.In":createjs.Ease.backIn,"Back.Out":createjs.Ease.backOut,"Back.InOut":createjs.Ease.backInOut};t.ParseEaseType=function(t){return r[t]||r.linear}}(fgui||(fgui={})),function(h){var t=function(){function o(){this.$x=0,this.$y=0,this.$width=0,this.$height=0,this.$alpha=1,this.$rotation=0,this.$visible=!0,this.$touchable=!0,this.$grayed=!1,this.$draggable=!1,this.$scaleX=1,this.$scaleY=1,this.$skewX=0,this.$skewY=0,this.$pivot=new PIXI.Point,this.$pivotAsAnchor=!1,this.$pivotOffset=new PIXI.Point,this.$sortingOrder=0,this.$internalVisible=!0,this.$focusable=!1,this.$pixelSnapping=!1,this.$handlingController=!1,this.$lastColorComponents=null,this.$rawWidth=0,this.$rawHeight=0,this.$initWidth=0,this.$initHeight=0,this.$sourceWidth=0,this.$sourceHeight=0,this.$id=""+o.gInstanceCounter++,this.$name="",this.createDisplayObject(),this.$relations=new h.Relations(this),this.$gears=[]}return Object.defineProperty(o.prototype,"id",{get:function(){return this.$id},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"name",{get:function(){return this.$name},set:function(t){this.$name=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"x",{get:function(){return this.$x},set:function(t){this.setXY(t,this.$y)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"y",{get:function(){return this.$y},set:function(t){this.setXY(this.$x,t)},enumerable:!0,configurable:!0}),o.prototype.setXY=function(t,e){this.$x==t&&this.$y==e||(this.$x=t,this.$y=e,this.handleXYChanged(),this.updateGear(1),this.$parent&&(this.$parent.setBoundsChangedFlag(),this.$displayObject.emit("__xyChanged",this)),o.draggingObject!=this||o.sUpdatingWhileDragging||this.localToGlobalRect(0,0,this.width,this.height,o.sGlobalRect))},Object.defineProperty(o.prototype,"pixelSnapping",{get:function(){return this.$pixelSnapping},set:function(t){this.$pixelSnapping!=t&&(this.$pixelSnapping=t,this.handleXYChanged())},enumerable:!0,configurable:!0}),o.prototype.center=function(t){var e;void 0===t&&(t=!1),e=null!=this.$parent?this.parent:this.root,this.setXY((e.width-this.width)/2,(e.height-this.height)/2),t&&(this.addRelation(e,3),this.addRelation(e,10))},Object.defineProperty(o.prototype,"width",{get:function(){return this.ensureSizeCorrect(),this.$relations.sizeDirty&&this.$relations.ensureRelationsSizeCorrect(),this.$width},set:function(t){this.setSize(t,this.$rawHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this.ensureSizeCorrect(),this.$relations.sizeDirty&&this.$relations.ensureRelationsSizeCorrect(),this.$height},set:function(t){this.setSize(this.$rawWidth,t)},enumerable:!0,configurable:!0}),o.prototype.setSize=function(t,e,i){if(void 0===i&&(i=!1),this.$rawWidth!=t||this.$rawHeight!=e){this.$rawWidth=t,this.$rawHeight=e,t=Math.max(0,t),e=Math.max(0,e);var n=t-this.mapPivotWidth(1),s=e-this.mapPivotHeight(1);this.$width=t,this.$height=e,this.handleSizeChanged(),0==this.$pivot.x&&0==this.$pivot.y||(this.$pivotAsAnchor?this.applyPivot():(i||this.setXY(this.x-this.$pivot.x*n,this.y-this.$pivot.y*s),this.updatePivotOffset())),this.updateGear(2),this.$parent&&(this.$relations.onOwnerSizeChanged(n,s),this.$parent.setBoundsChangedFlag()),this.$displayObject.emit("__sizeChanged",this)}},o.prototype.ensureSizeCorrect=function(){},Object.defineProperty(o.prototype,"sourceHeight",{get:function(){return this.$sourceHeight},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"sourceWidth",{get:function(){return this.$sourceWidth},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"initHeight",{get:function(){return this.$initHeight},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"initWidth",{get:function(){return this.$initWidth},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"actualWidth",{get:function(){return this.width*Math.abs(this.$scaleX)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"actualHeight",{get:function(){return this.height*Math.abs(this.$scaleY)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scaleX",{get:function(){return this.$scaleX},set:function(t){this.setScale(t,this.$scaleY)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scaleY",{get:function(){return this.$scaleY},set:function(t){this.setScale(this.$scaleX,t)},enumerable:!0,configurable:!0}),o.prototype.setScale=function(t,e){this.$scaleX==t&&this.$scaleY==e||(this.$scaleX=t,this.$scaleY=e,this.handleScaleChanged(),this.applyPivot(),this.updateGear(2))},Object.defineProperty(o.prototype,"skewX",{get:function(){return this.$skewX},set:function(t){this.setSkew(t,this.$skewY)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"skewY",{get:function(){return this.$skewY},set:function(t){this.setSkew(this.$skewX,t)},enumerable:!0,configurable:!0}),o.prototype.setSkew=function(t,e){this.$skewX==t&&this.$skewY==e||(this.$skewX=t,this.$skewY=e,this.$displayObject.skew.set(t*-h.utils.NumberUtil.RADIAN,e*h.utils.NumberUtil.RADIAN),this.applyPivot())},o.prototype.mapPivotWidth=function(t){return t*this.$width},o.prototype.mapPivotHeight=function(t){return t*this.$height},Object.defineProperty(o.prototype,"pivotX",{get:function(){return this.$pivot.x},set:function(t){this.setPivot(t,this.pivotY)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pivotY",{get:function(){return this.$pivot.y},set:function(t){this.setPivot(this.pivotX,t)},enumerable:!0,configurable:!0}),o.prototype.setPivot=function(t,e,i){void 0===i&&(i=!1),this.$pivot.x==t&&this.$pivot.y==e&&this.$pivotAsAnchor==i||(this.$pivot.set(t,e),this.$pivotAsAnchor=i,this.updatePivotOffset(),this.handleXYChanged())},o.prototype.internalSetPivot=function(t,e,i){this.$pivot.set(t,e),(this.$pivotAsAnchor=i)&&this.handleXYChanged()},o.prototype.updatePivotOffset=function(){if(0!=this.$pivot.x||0!=this.$pivot.y&&this.$displayObject.transform){var t=this.mapPivotWidth(this.$pivot.x),e=this.mapPivotHeight(this.$pivot.y);o.sHelperPoint.set(t,e),this.$displayObject.transform.updateLocalTransform();var i=this.$displayObject.localTransform,n=i.apply(o.sHelperPoint,o.sHelperPoint);n.x-=i.tx,n.y-=i.ty,this.$pivotOffset.set(this.$pivot.x*this.$width-n.x,this.$pivot.y*this.$height-n.y)}else this.$pivotOffset.set(0,0)},o.prototype.applyPivot=function(){0==this.$pivot.x&&0==this.$pivot.y||(this.updatePivotOffset(),this.handleXYChanged())},Object.defineProperty(o.prototype,"touchable",{get:function(){return this.$touchable},set:function(t){this.$touchable=t,this.$displayObject.interactive=this.$touchable},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"grayed",{get:function(){return this.$grayed},set:function(t){this.$grayed!=t&&(this.$grayed=t,this.handleGrayedChanged(),this.updateGear(3))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"enabled",{get:function(){return!this.$grayed&&this.$touchable},set:function(t){this.grayed=!t,this.touchable=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rotation",{get:function(){return this.$rotation},set:function(t){this.$rotation!=t&&(this.$rotation=t,this.$displayObject&&(this.$displayObject.rotation=h.utils.NumberUtil.angleToRadian(this.normalizeRotation)),this.applyPivot(),this.updateGear(3))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"normalizeRotation",{get:function(){var t=this.$rotation%360;return 180<t?t-=360:t<-180&&(t+=360),t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$alpha!=t&&(this.$alpha=t,this.updateAlpha())},enumerable:!0,configurable:!0}),o.prototype.updateAlpha=function(){this.$displayObject&&(this.$displayObject.alpha=this.$alpha),this.updateGear(3)},Object.defineProperty(o.prototype,"visible",{get:function(){return this.$visible},set:function(t){this.$visible!=t&&(this.$visible=t,this.$displayObject&&(this.$displayObject.visible=this.$visible),this.$parent&&(this.$parent.childStateChanged(this),this.$parent.setBoundsChangedFlag()),this.emit("__visibleChanged",this.$visible,this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"internalVisible",{get:function(){return this.$internalVisible},set:function(t){t!=this.$internalVisible&&(this.$internalVisible=t,this.$parent&&this.$parent.childStateChanged(this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"finalVisible",{get:function(){return this.$visible&&this.$internalVisible&&(!this.$group||this.$group.finalVisible)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"sortingOrder",{get:function(){return this.$sortingOrder},set:function(t){if(t<0&&(t=0),this.$sortingOrder!=t){var e=this.$sortingOrder;this.$sortingOrder=t,null!=this.$parent&&this.$parent.childSortingOrderChanged(this,e,this.$sortingOrder)}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"focusable",{get:function(){return this.$focusable},set:function(t){this.$focusable=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"focused",{get:function(){return this.root.focus==this},enumerable:!0,configurable:!0}),o.prototype.requestFocus=function(){for(var t=this;t&&!t.$focusable;)t=t.parent;null!=t&&(this.root.focus=t)},Object.defineProperty(o.prototype,"tooltips",{get:function(){return this.$tooltips},set:function(t){this.$tooltips=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"blendMode",{get:function(){return this.$displayObject&&this.$displayObject instanceof PIXI.Sprite?h.BlendModeMap[this.$displayObject.blendMode]||"None":h.BlendModeMap[0]},set:function(t){if(t&&t.length&&this.$displayObject&&this.$displayObject instanceof PIXI.Sprite)for(var e=0;e<h.BlendModeMap.length;e++)if(h.BlendModeMap[e].toLowerCase()===t.toLowerCase())return void(this.$displayObject.blendMode=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"filters",{get:function(){return this.$displayObject.filters},set:function(t){this.$displayObject.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inContainer",{get:function(){return null!=this.$displayObject.parent},enumerable:!0,configurable:!0}),o.isDisplayObjectOnStage=function(t){if(!t||!t.parent)return!1;for(var e=t;null!=e;){if(e==h.GRoot.inst.nativeStage)return!0;e=e.parent}return!1},Object.defineProperty(o.prototype,"onStage",{get:function(){return o.isDisplayObjectOnStage(this.$displayObject)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"resourceURL",{get:function(){return null!=this.packageItem?"{ui://"+this.packageItem.owner.id+this.packageItem.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"group",{get:function(){return this.$group},set:function(t){this.$group=t},enumerable:!0,configurable:!0}),o.prototype.getGear=function(t){var e=this.$gears[t];if(null==e){switch(t){case 0:e=new h.GearDisplay(this);break;case 1:e=new h.GearXY(this);break;case 2:e=new h.GearSize(this);break;case 3:e=new h.GearLook(this);break;case 4:if(!h.isColorGear(this))throw new Error("Invalid component type to add GearColor feature, please check the component named "+this.$name+" in the Editor.");e=new h.GearColor(this);break;case 5:if(!h.isAnimationGear(this))throw new Error("Invalid component type to add GearAnimation feature, please check the component named "+this.$name+" in the Editor.");e=new h.GearAnimation(this);break;case 6:e=new h.GearText(this);break;case 7:e=new h.GearIcon(this);break;default:throw new Error("FGUI: invalid gear type")}this.$gears[t]=e}return e},o.prototype.updateGear=function(t){null!=this.$gears[t]&&this.$gears[t].updateState()},o.prototype.updateGearFromRelations=function(t,e,i){null!=this.$gears[t]&&this.$gears[t].updateFromRelations(e,i)},o.prototype.hasGearController=function(t,e){return this.$gears[t]&&this.$gears[t].controller==e},o.prototype.lockGearDisplay=function(){var t=this.$gears[0];if(t&&t.controller){var e=t.lock();return this.checkGearVisible(),e}return 0},o.prototype.releaseGearDisplay=function(t){var e=this.$gears[0];e&&e.controller&&(e.release(t),this.checkGearVisible())},o.prototype.checkGearVisible=function(){if(!this.$handlingController){var t=this.$gears[0],e=!t||t.connected;e!=this.$internalVisible&&(this.$internalVisible=e,this.$parent&&this.$parent.childStateChanged(this))}},Object.defineProperty(o.prototype,"gearXY",{get:function(){return this.getGear(1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"gearSize",{get:function(){return this.getGear(2)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"gearLook",{get:function(){return this.getGear(3)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"relations",{get:function(){return this.$relations},enumerable:!0,configurable:!0}),o.prototype.addRelation=function(t,e,i){void 0===i&&(i=!1),this.$relations.add(t,e,i)},o.prototype.removeRelation=function(t,e){void 0===e&&(e=0),this.$relations.remove(t,e)},Object.defineProperty(o.prototype,"displayObject",{get:function(){return this.$displayObject},enumerable:!0,configurable:!0}),o.prototype.createDisplayObject=function(){},o.prototype.setDisplayObject=function(t){this.$displayObject=t},Object.defineProperty(o.prototype,"parent",{get:function(){return this.$parent},set:function(t){this.$parent=t},enumerable:!0,configurable:!0}),o.prototype.removeFromParent=function(){this.$parent&&this.$parent.removeChild(this)},Object.defineProperty(o.prototype,"root",{get:function(){if(this instanceof h.GRoot)return this;for(var t=this.$parent;t;){if(t instanceof h.GRoot)return t;t=t.parent}return h.GRoot.inst},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"text",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"icon",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),o.prototype.dispose=function(){this.removeFromParent(),this.$relations.dispose(),this.removeAllListeners(),h.GRoot.inst.nativeStage.off(h.InteractiveEvents.Move,this.$moving,this),h.GRoot.inst.nativeStage.off(h.InteractiveEvents.Up,this.$end,this),h.GRoot.inst.nativeStage.off(h.InteractiveEvents.Move,this.$moving2,this),h.GRoot.inst.nativeStage.off(h.InteractiveEvents.Up,this.$end2,this),this.$displayObject.destroy()},o.prototype.click=function(t,e){return this.on(h.InteractiveEvents.Click,t,e)},o.prototype.removeClick=function(t,e){return this.off(h.InteractiveEvents.Click,t,e)},o.prototype.hasClick=function(t){return this.hasListener(h.InteractiveEvents.Click,t)},o.prototype.on=function(t,e,i){return null==t||this.$displayObject.on(t,e,i),this},o.prototype.off=function(t,e,i){return null==t||this.$displayObject.listeners(t,!0)&&this.$displayObject.off(t,e,i),this},o.prototype.once=function(t,e,i){return null==t||this.$displayObject.once(t,e,i),this},o.prototype.hasListener=function(t,e){return e?0<=this.$displayObject.listeners(t).indexOf(e):this.$displayObject.listeners(t,!0)},o.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return!e||e.length<=0?e=[t]:e.unshift(t),this.$displayObject.emit.apply(this.$displayObject,e)},o.prototype.removeAllListeners=function(t){this.$displayObject.removeAllListeners(t)},Object.defineProperty(o.prototype,"draggable",{get:function(){return this.$draggable},set:function(t){this.$draggable!=t&&(this.$draggable=t,this.initDrag())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dragBounds",{get:function(){return this.$dragBounds},set:function(t){this.$dragBounds=t},enumerable:!0,configurable:!0}),o.prototype.startDrag=function(t){void 0===t&&(t=-1),this.onStage&&this.dragBegin()},o.prototype.stopDrag=function(){this.dragEnd()},Object.defineProperty(o.prototype,"dragging",{get:function(){return o.draggingObject==this},enumerable:!0,configurable:!0}),o.prototype.localToGlobal=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),this.$pivotAsAnchor&&(t+=this.$pivot.x*this.$width,e+=this.$pivot.y*this.$height),i||(i=o.sHelperPoint),i.x=t,i.y=e,this.$displayObject.toGlobal(i,i)},o.prototype.globalToLocal=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),i||(i=o.sHelperPoint),i.set(t,e),i=this.$displayObject.toLocal(i,h.GRoot.inst.nativeStage),this.$pivotAsAnchor&&(i.x-=this.$pivot.x*this.$width,i.y-=this.$pivot.y*this.$height),i},o.prototype.localToRoot=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.localToGlobal(t,e,i);return n.x/=h.GRoot.inst.contentScaleFactor,n.y/=h.GRoot.inst.contentScaleFactor,n},o.prototype.rootToLocal=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),t*=h.GRoot.inst.contentScaleFactor,e*=h.GRoot.inst.contentScaleFactor,this.globalToLocal(t,e,i)},o.prototype.localToGlobalRect=function(t,e,i,n,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),null==s&&(s=o.sDragHelperRect);var r=this.localToGlobal(t,e);return s.x=r.x,s.y=r.y,s.width=i,s.height=n,s},o.prototype.globalToLocalRect=function(t,e,i,n,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),null==s&&(s=o.sDragHelperRect);var r=this.globalToLocal(t,e);return s.x=r.x,s.y=r.y,s.width=i,s.height=n,s},o.prototype.handleControllerChanged=function(t){this.$handlingController=!0;for(var e=0;e<8;e++){var i=this.$gears[e];null!=i&&i.controller==t&&i.apply()}this.$handlingController=!1,this.checkGearVisible()},o.prototype.switchDisplayObject=function(t){if(t!=this.$displayObject){var e=this.$displayObject;if(this.inContainer){var i=this.$displayObject.parent.getChildIndex(this.$displayObject);this.$displayObject.parent.addChildAt(t,i),this.$displayObject.parent.removeChild(this.$displayObject)}this.$displayObject=t,this.$displayObject.x=e.x,this.$displayObject.y=e.y,this.$displayObject.rotation=e.rotation,this.$displayObject.alpha=e.alpha,this.$displayObject.visible=e.visible,this.$displayObject.scale.x=e.scale.x,this.$displayObject.scale.y=e.scale.y,this.$displayObject.interactive=e.interactive,this.$displayObject.interactiveChildren=e.interactiveChildren}},o.prototype.handleXYChanged=function(){if(this.$displayObject){var t=this.$x,e=this.$y;this.$pivotAsAnchor&&(t-=this.$pivot.x*this.$width,e-=this.$pivot.y*this.$height),this.$pixelSnapping&&(t=Math.round(t),e=Math.round(e)),this.$displayObject.position.set(t+this.$pivotOffset.x,e+this.$pivotOffset.y)}},o.prototype.handleSizeChanged=function(){},o.prototype.handleScaleChanged=function(){this.$displayObject&&this.$displayObject.scale.set(this.$scaleX,this.$scaleY)},Object.defineProperty(o.prototype,"colorFilter",{get:function(){if(this.$colorFilter)return this.$colorFilter;if(this.$colorFilter=new PIXI.filters.ColorMatrixFilter,this.$displayObject){var t=this.$displayObject.filters||[];t.push(this.$colorFilter),this.$displayObject.filters=t}return this.$colorFilter},enumerable:!0,configurable:!0}),o.prototype.updateColorComponents=function(t,e,i,n){o.$colorHelper||(o.$colorHelper=new h.utils.ColorMatrix);var s=o.$colorHelper;s.setColor(t,100*e,100*i,180*n);var r=this.colorFilter;r.enabled=!0,r.reset(),r.matrix=s.toArray(),this.$lastColorComponents||(this.$lastColorComponents=[]),this.$lastColorComponents.length=0,this.$lastColorComponents.push(s.brightness,s.contrast,s.saturation,s.hue)},o.prototype.handleGrayedChanged=function(){if(this.$displayObject){var t=this.colorFilter;t.enabled=!0,this.$grayed?t.blackAndWhite(!0):this.$lastColorComponents&&4<=this.$lastColorComponents.length?this.updateColorComponents(this.$lastColorComponents[0],this.$lastColorComponents[1],this.$lastColorComponents[2],this.$lastColorComponents[3]):t.enabled=!1}},o.prototype.constructFromResource=function(){},o.prototype.setupBeforeAdd=function(t){var e,i;if(this.$id=t.attributes.id,this.$name=t.attributes.name,i=(e=t.attributes.xy).split(","),this.setXY(parseInt(i[0]),parseInt(i[1])),(e=t.attributes.size)&&(i=e.split(","),this.$initWidth=parseInt(i[0]),this.$initHeight=parseInt(i[1]),this.setSize(this.$initWidth,this.$initHeight,!0)),(e=t.attributes.scale)&&(i=e.split(","),this.setScale(parseFloat(i[0]),parseFloat(i[1]))),(e=t.attributes.rotation)&&(this.rotation=parseInt(e)),(e=t.attributes.skew)&&(i=e.split(","),this.setSkew(parseFloat(i[0]),parseFloat(i[1]))),e=t.attributes.pivot){i=e.split(",");var n=parseFloat(i[0]),s=parseFloat(i[1]);e=t.attributes.anchor,this.setPivot(n,s,"true"==e)}if((e=t.attributes.alpha)&&(this.alpha=parseFloat(e)),"false"==t.attributes.touchable&&(this.touchable=!1),"false"==t.attributes.visible&&(this.visible=!1),"true"==t.attributes.grayed&&(this.grayed=!0),this.tooltips=t.attributes.tooltips,(e=t.attributes.blend)&&(this.blendMode=e),e=t.attributes.filter)switch(e){case"color":i=(e=t.attributes.filterData).split(","),this.updateColorComponents(parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]))}},o.prototype.setupAfterAdd=function(t){var i=this,e=t.attributes.group;e&&(this.$group=this.$parent.getChildById(e)),t.children.forEach(function(t){var e=h.GearXMLNodeNameMap[t.nodeName];null!=e&&i.getGear(e).setup(t)},this)},o.castFromNativeObject=function(t){return h.isUIObject(t)?t.UIOwner:null},o.prototype.initDrag=function(){this.$draggable?this.on(h.InteractiveEvents.Down,this.$touchBegin,this):this.off(h.InteractiveEvents.Down,this.$touchBegin,this)},o.prototype.dragBegin=function(){null!=o.draggingObject&&o.draggingObject.stopDrag(),o.sGlobalDragStart.x=h.GRoot.statusData.mouseX,o.sGlobalDragStart.y=h.GRoot.statusData.mouseY,this.localToGlobalRect(0,0,this.width,this.height,o.sGlobalRect),o.draggingObject=this,h.GRoot.inst.nativeStage.on(h.InteractiveEvents.Move,this.$moving2,this),h.GRoot.inst.nativeStage.on(h.InteractiveEvents.Up,this.$end2,this)},o.prototype.dragEnd=function(){o.draggingObject==this&&(h.GRoot.inst.nativeStage.off(h.InteractiveEvents.Move,this.$moving2,this),h.GRoot.inst.nativeStage.off(h.InteractiveEvents.Up,this.$end2,this),o.draggingObject=null),o.$dragBeginCancelled=!0},o.prototype.reset=function(){h.GRoot.inst.nativeStage.off(h.InteractiveEvents.Move,this.$moving,this),h.GRoot.inst.nativeStage.off(h.InteractiveEvents.Up,this.$end,this)},o.prototype.$touchBegin=function(t){null==this.$touchDownPoint&&(this.$touchDownPoint=new PIXI.Point),this.$touchDownPoint.x=t.data.global.x,this.$touchDownPoint.y=t.data.global.y,h.GRoot.inst.nativeStage.on(h.InteractiveEvents.Move,this.$moving,this),h.GRoot.inst.nativeStage.on(h.InteractiveEvents.Up,this.$end,this)},o.prototype.$end=function(t){this.reset()},o.prototype.$moving=function(t){var e=h.UIConfig.touchDragSensitivity;null!=this.$touchDownPoint&&Math.abs(this.$touchDownPoint.x-t.data.global.x)<e&&Math.abs(this.$touchDownPoint.y-t.data.global.y)<e||(this.reset(),o.$dragBeginCancelled=!1,t.currentTarget=this.$displayObject,this.$displayObject.emit("__dragStart",t,this),o.$dragBeginCancelled||this.dragBegin())},o.prototype.$moving2=function(t){var e=t.data.global.x-o.sGlobalDragStart.x+o.sGlobalRect.x,i=t.data.global.y-o.sGlobalDragStart.y+o.sGlobalRect.y;if(null!=this.$dragBounds){var n=h.GRoot.inst.localToGlobalRect(this.$dragBounds.x,this.$dragBounds.y,this.$dragBounds.width,this.$dragBounds.height,o.sDragHelperRect);e<n.x?e=n.x:e+o.sGlobalRect.width>n.right&&(e=n.right-o.sGlobalRect.width)<n.x&&(e=n.x),i<n.y?i=n.y:i+o.sGlobalRect.height>n.bottom&&(i=n.bottom-o.sGlobalRect.height)<n.y&&(i=n.y)}o.sUpdatingWhileDragging=!0,o.sHelperPoint.x=e,o.sHelperPoint.y=i;var s=this.parent.globalToLocal(e,i,o.sHelperPoint);this.setXY(Math.round(s.x),Math.round(s.y)),o.sUpdatingWhileDragging=!1,t.currentTarget=this.$displayObject,this.$displayObject.emit("__dragMoving",t,this)},o.prototype.$end2=function(t){o.draggingObject==this&&(this.stopDrag(),t.currentTarget=this.$displayObject,this.$displayObject.emit("__dragEnd",t,this))},o.gInstanceCounter=0,o.sGlobalDragStart=new PIXI.Point,o.sGlobalRect=new PIXI.Rectangle,o.sHelperPoint=new PIXI.Point,o.sDragHelperRect=new PIXI.Rectangle,o}();h.GObject=t}(fgui||(fgui={})),function(g){var t=function(i){function t(){var t=i.call(this)||this;return t.$sortingChildCount=0,t.$children=[],t.$controllers=[],t.$transitions=[],t.$margin=new g.utils.Margin,t.$alignOffset=new PIXI.Point,t}return __extends(t,i),t.prototype.createDisplayObject=function(){this.$rootContainer=new g.UIContainer(this),this.setDisplayObject(this.$rootContainer),this.$container=this.$rootContainer},t.prototype.dispose=function(){g.GTimer.inst.remove(this.$validate,this),this.off("added",this.$added,this),this.off("removed",this.$removed,this),this.$transitions.forEach(function(t){t.dispose()});for(var t=this.$children.length-1;0<=t;--t){var e=this.$children[t];e.parent=null,e.dispose()}this.$boundsChanged=!1,this.$scrollPane&&this.$scrollPane.dispose(),i.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"displayListContainer",{get:function(){return this.$container},enumerable:!0,configurable:!0}),t.prototype.addChild=function(t){return this.addChildAt(t,this.$children.length),t},t.prototype.addChildAt=function(t,e){if(void 0===e&&(e=0),!t)throw new Error("Invalid child");var i=this.$children.length;if(0<=e&&e<=i){if(t.parent==this)this.setChildIndex(t,e);else{t.removeFromParent();var n=(t.parent=this).$children.length;0!=t.sortingOrder?(this.$sortingChildCount++,e=this.getInsertPosForSortingChild(t)):0<this.$sortingChildCount&&e>n-this.$sortingChildCount&&(e=n-this.$sortingChildCount),e==n?this.$children.push(t):this.$children.splice(e,0,t),this.childStateChanged(t),this.setBoundsChangedFlag()}return t}throw new Error("Invalid child index")},t.prototype.getInsertPosForSortingChild=function(t){var e=this.$children.length,i=0;for(i=0;i<e;i++){var n=this.$children[i];if(n!=t&&t.sortingOrder<n.sortingOrder)break}return i},t.prototype.removeChild=function(t,e){void 0===e&&(e=!1);var i=this.$children.indexOf(t);return-1!=i&&this.removeChildAt(i,e),t},t.prototype.removeChildAt=function(t,e){if(void 0===e&&(e=!1),0<=t&&t<this.numChildren){var i=this.$children[t];return i.parent=null,0!=i.sortingOrder&&this.$sortingChildCount--,this.$children.splice(t,1),i.inContainer&&this.$container.removeChild(i.displayObject),!0===e&&i.dispose(),this.setBoundsChangedFlag(),i}throw new Error("Invalid child index")},t.prototype.removeChildren=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=!1),(e<0||e>=this.numChildren)&&(e=this.numChildren-1);for(var n=t;n<=e;++n)this.removeChildAt(t,i)},t.prototype.getChildAt=function(t){if(void 0===t&&(t=0),0<=t&&t<this.numChildren)return this.$children[t];throw new Error("Invalid child index")},t.prototype.getChild=function(t){for(var e=this.$children.length,i=0;i<e;++i)if(this.$children[i].name==t)return this.$children[i];return null},t.prototype.getChildInGroup=function(t,e){for(var i=this.$children.length,n=0;n<i;++n){var s=this.$children[n];if(s.group==e&&s.name==t)return s}return null},t.prototype.getChildById=function(t){for(var e=this.$children.length,i=0;i<e;++i)if(this.$children[i].id==t)return this.$children[i];return null},t.prototype.getChildIndex=function(t){return this.$children.indexOf(t)},t.prototype.setChildIndex=function(t,e){void 0===e&&(e=0);var i=this.$children.indexOf(t);if(-1==i)throw new Error("no such child found");if(0==t.sortingOrder){var n=this.$children.length;0<this.$sortingChildCount&&e>n-this.$sortingChildCount-1&&(e=n-this.$sortingChildCount-1),this.$setChildIndex(t,i,e)}},t.prototype.setChildIndexBefore=function(t,e){var i=this.$children.indexOf(t);if(-1==i)throw new Error("no such child found");if(0!=t.sortingOrder)return i;var n=this.$children.length;return 0<this.$sortingChildCount&&e>n-this.$sortingChildCount-1&&(e=n-this.$sortingChildCount-1),i<e?this.$setChildIndex(t,i,e-1):this.$setChildIndex(t,i,e)},t.prototype.$setChildIndex=function(t,e,i){void 0===i&&(i=0);var n=this.$children.length;if(n<i&&(i=n),e==i)return e;if(this.$children.splice(e,1),this.$children.splice(i,0,t),t.inContainer){for(var s=0,r=this.$container.children.length,o=0;o<i;o++){this.$children[o].inContainer&&s++}s==r&&s--,this.$container.setChildIndex(t.displayObject,s),this.setBoundsChangedFlag()}return i},t.prototype.swapChildren=function(t,e){var i=this.$children.indexOf(t),n=this.$children.indexOf(e);if(-1==i||-1==n)throw new Error("no such child found");this.swapChildrenAt(i,n)},t.prototype.swapChildrenAt=function(t,e){void 0===e&&(e=0);var i=this.$children[t],n=this.$children[e];this.setChildIndex(i,e),this.setChildIndex(n,t)},Object.defineProperty(t.prototype,"numChildren",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),t.prototype.isAncestorOf=function(t){if(null==t)return!1;for(var e=t.parent;e;){if(e==this)return!0;e=e.parent}return!1},t.prototype.addController=function(t){this.$controllers.push(t),(t.$parent=this).applyController(t)},t.prototype.getControllerAt=function(t){return this.$controllers[t]},t.prototype.getController=function(t){for(var e=this.$controllers.length,i=0;i<e;++i){var n=this.$controllers[i];if(n.name==t)return n}return null},t.prototype.removeController=function(e){var t=this.$controllers.indexOf(e);if(-1==t)throw new Error("controller not exists");e.$parent=null,this.$controllers.splice(t,1),this.$children.forEach(function(t){t.handleControllerChanged(e)})},Object.defineProperty(t.prototype,"controllers",{get:function(){return this.$controllers},enumerable:!0,configurable:!0}),t.prototype.childStateChanged=function(e){var i=this;if(!this.$buildingDisplayList)if(e instanceof g.GGroup)this.$children.forEach(function(t){t.group==e&&i.childStateChanged(t)},this);else if(e.displayObject)if(e.finalVisible){if(!e.displayObject.parent){for(var t=0,n=this.$children.length,s=0;s<n;s++){var r=this.$children[s];if(r==e)break;r.displayObject&&r.displayObject.parent&&t++}this.$container.addChildAt(e.displayObject,t)}}else e.displayObject.parent&&this.$container.removeChild(e.displayObject)},t.prototype.applyController=function(e){this.$applyingController=e,this.$children.forEach(function(t){t.handleControllerChanged(e)}),this.$applyingController=null,e.executeActions()},t.prototype.applyAllControllers=function(){var e=this;this.$controllers.forEach(function(t){e.applyController(t)},this)},t.prototype.adjustRadioGroupDepth=function(i,n){var s=-1,r=-1;this.$children.forEach(function(t,e){t==i?s=e:t instanceof g.GButton&&t.relatedController==n&&r<e&&(r=e)}),s<r&&(null!=this.$applyingController&&this.$children[r].handleControllerChanged(this.$applyingController),this.swapChildrenAt(s,r))},t.prototype.getTransitionAt=function(t){return this.$transitions[t]},t.prototype.getTransition=function(t){for(var e=this.$transitions.length,i=0;i<e;++i){var n=this.$transitions[i];if(n.name==t)return n}return null},t.prototype.isChildInView=function(t){return null!=this.$rootContainer.scrollRect?0<=t.x+t.width&&t.x<=this.width&&0<=t.y+t.height&&t.y<=this.height:null==this.$scrollPane||this.$scrollPane.isChildInView(t)},t.prototype.getFirstChildInView=function(){for(var t=this.$children.length,e=0;e<t;++e){var i=this.$children[e];if(this.isChildInView(i))return e}return-1},Object.defineProperty(t.prototype,"scrollPane",{get:function(){return this.$scrollPane},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opaque",{get:function(){return this.$opaque},set:function(t){this.$opaque!=t&&(this.$opaque=t,this.$opaque?this.updateOpaque():this.$rootContainer.hitArea&&this.$rootContainer.hitArea instanceof PIXI.Rectangle&&(this.$rootContainer.hitArea.width=this.$rootContainer.hitArea.height=0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"margin",{get:function(){return this.$margin},set:function(t){this.$margin.copy(t),null!=this.$rootContainer.scrollRect&&(this.$container.x=this.$margin.left+this.$alignOffset.x,this.$container.y=this.$margin.top+this.$alignOffset.y),this.handleSizeChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this.$rootContainer.mask},set:function(t){t&&(t.interactive=t.interactiveChildren=!1,t instanceof PIXI.Graphics&&(t.isMask=!0),this.$rootContainer.mask=t)},enumerable:!0,configurable:!0}),t.prototype.updateOpaque=function(){this.$rootContainer.hitArea||(this.$rootContainer.hitArea=new PIXI.Rectangle);var t=this.$rootContainer.hitArea;t.x=t.y=0,t.width=this.width,t.height=this.height},t.prototype.updateScrollRect=function(){var t=this.$rootContainer.scrollRect;null==t&&(t=new PIXI.Rectangle);var e=this.width-this.$margin.right,i=this.height-this.$margin.bottom;t.x=t.y=0,t.width=e,t.height=i,this.$rootContainer.scrollRect=t},t.prototype.setupScroll=function(t,e,i,n,s,r){this.$rootContainer==this.$container&&(this.$container=new PIXI.Container,this.$rootContainer.addChild(this.$container)),this.$scrollPane=new g.ScrollPane(this,e,t,i,n,s,r),this.setBoundsChangedFlag()},t.prototype.setupOverflow=function(t){1==t?(this.$rootContainer==this.$container&&(this.$container=new PIXI.Container,this.$rootContainer.addChild(this.$container)),this.updateScrollRect(),this.$container.x=this.$margin.left,this.$container.y=this.$margin.top):0==this.$margin.left&&0==this.$margin.top||(this.$rootContainer==this.$container&&(this.$container=new PIXI.Container,this.$rootContainer.addChild(this.$container)),this.$container.x=this.$margin.left,this.$container.y=this.$margin.top),this.setBoundsChangedFlag()},t.prototype.handleSizeChanged=function(){this.$scrollPane?this.$scrollPane.onOwnerSizeChanged():null!=this.$rootContainer.scrollRect&&this.updateScrollRect(),this.$opaque&&this.updateOpaque()},t.prototype.handleGrayedChanged=function(){var t=this.getController("grayed");if(null==t){var e=this.grayed;this.$children.forEach(function(t){t.grayed=e})}else t.selectedIndex=this.grayed?1:0},t.prototype.setBoundsChangedFlag=function(){(this.$scrollPane||this.$trackBounds)&&(this.$boundsChanged||(this.$boundsChanged=!0,g.GTimer.inst.callLater(this.$validate,this)))},t.prototype.$validate=function(t){this.$boundsChanged&&this.updateBounds()},t.prototype.ensureBoundsCorrect=function(){this.$boundsChanged&&this.updateBounds()},t.prototype.updateBounds=function(){var e=0,i=0,t=0,n=0;if(0<this.$children.length){e=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY;var s=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=0;this.$children.forEach(function(t){t.ensureSizeCorrect(),(o=t.x)<e&&(e=o),(o=t.y)<i&&(i=o),o=t.x+t.actualWidth,s<o&&(s=o),o=t.y+t.actualHeight,r<o&&(r=o)}),t=s-e,n=r-i}this.setBounds(e,i,t,n)},t.prototype.setBounds=function(t,e,i,n){void 0===n&&(n=0),this.$boundsChanged=!1,this.$scrollPane&&this.$scrollPane.setContentSize(Math.round(t+i),Math.round(e+n))},Object.defineProperty(t.prototype,"viewWidth",{get:function(){return null!=this.$scrollPane?this.$scrollPane.viewWidth:this.width-this.$margin.left-this.$margin.right},set:function(t){null!=this.$scrollPane?this.$scrollPane.viewWidth=t:this.width=t+this.$margin.left+this.$margin.right},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewHeight",{get:function(){return null!=this.$scrollPane?this.$scrollPane.viewHeight:this.height-this.$margin.top-this.$margin.bottom},set:function(t){null!=this.$scrollPane?this.$scrollPane.viewHeight=t:this.height=t+this.$margin.top+this.$margin.bottom},enumerable:!0,configurable:!0}),t.prototype.getSnappingPosition=function(t,e,i){i||(i=new PIXI.Point);var n=this.$children.length;if(n<=0)return i.x=0,i.y=0,i;this.ensureBoundsCorrect();var s=null,r=null,o=0;if(0!=e){for(;o<n;o++)if(e<(s=this.$children[o]).y){if(0==o){e=0;break}e=e<(r=this.$children[o-1]).y+r.actualHeight/2?r.y:s.y;break}o==n&&(e=s.y)}if(0!=t){for(0<o&&o--;o<n;o++)if(t<(s=this.$children[o]).x){if(0==o){t=0;break}t=t<(r=this.$children[o-1]).x+r.actualWidth/2?r.x:s.x;break}o==n&&(t=s.x)}return i.x=t,i.y=e,i},t.prototype.childSortingOrderChanged=function(t,e,i){if(void 0===i&&(i=0),0==i)this.$sortingChildCount--,this.setChildIndex(t,this.$children.length);else{0==e&&this.$sortingChildCount++;var n=this.$children.indexOf(t),s=this.getInsertPosForSortingChild(t);n<s?this.$setChildIndex(t,n,s-1):this.$setChildIndex(t,n,s)}},t.prototype.constructFromResource=function(){this.constructInternal(null,0)},t.prototype.constructInternal=function(n,s){var t,e,i,r=this,o=this.packageItem.owner.getItemAsset(this.packageItem);if(this.$inProgressBuilding=!0,e=(t=o.attributes.size).split(","),this.$sourceWidth=parseInt(e[0]),this.$sourceHeight=parseInt(e[1]),this.$initWidth=this.$sourceWidth,this.$initHeight=this.$sourceHeight,this.setSize(this.$sourceWidth,this.$sourceHeight),(t=o.attributes.pivot)&&(e=t.split(","),t=o.attributes.anchor,this.internalSetPivot(parseFloat(e[0]),parseFloat(e[1]),"true"==t)),t=o.attributes.opaque,this.opaque="false"!=t,i=(t=o.attributes.overflow)?g.ParseOverflowType(t):0,(t=o.attributes.margin)&&this.$margin.parse(t),2==i){var h;h=(t=o.attributes.scroll)?g.ParseScrollType(t):1;var a=void 0;a=(t=o.attributes.scrollBar)?g.ParseScrollBarDisplayType(t):0;var l=void 0;l=(t=o.attributes.scrollBarFlags)?parseInt(t):0;var c=new g.utils.Margin;(t=o.attributes.scrollBarMargin)&&c.parse(t);var u=void 0,p=void 0;(t=o.attributes.scrollBarRes)&&(u=(e=t.split(","))[0],p=e[1]),this.setupScroll(c,h,a,l,u,p)}else this.setupOverflow(i);this.$buildingDisplayList=!0;var $=o.children;$.forEach(function(t){if("controller"==t.nodeName){var e=new g.controller.Controller;r.$controllers.push(e),e.$parent=r,e.setup(t)}});var d=this.packageItem.displayList;if(d.forEach(function(t,e){var i;null!=n?i=n[s+e]:t.packageItem?((i=g.UIObjectFactory.newObject(t.packageItem)).packageItem=t.packageItem,i.constructFromResource()):i=g.UIObjectFactory.newObjectDirectly(t.type),i.$inProgressBuilding=!0,i.setupBeforeAdd(t.desc),(i.parent=r).$children.push(i)},this),this.relations.setup(o),this.$children.forEach(function(t,e){t.relations.setup(d[e].desc),t.setupAfterAdd(d[e].desc),t.$inProgressBuilding=!1}),t=o.attributes.mask){var f=this.getChildById(t).displayObject;if(!(f instanceof PIXI.Graphics||f instanceof PIXI.Sprite))throw new Error("only PIXI.Sprite or PIXI.Graphics can be applied as mask object");this.mask=f}$.forEach(function(t){if("transition"==t.nodeName){var e=new g.Transition(r);r.$transitions.push(e),e.setup(t)}},this),0<this.$transitions.length&&(this.on("added",this.$added,this),this.on("removed",this.$removed,this)),this.applyAllControllers(),this.$buildingDisplayList=!1,this.$inProgressBuilding=!1,this.appendChildrenList(),this.setBoundsChangedFlag(),this.constructFromXML(o)},t.prototype.appendChildrenList=function(){var e=this;this.$children.forEach(function(t){null!=t.displayObject&&t.finalVisible&&e.$container.addChild(t.displayObject)},this)},t.prototype.constructFromXML=function(t){},t.prototype.$added=function(t){this.$transitions.forEach(function(t){t.autoPlay&&t.play({times:t.autoPlayRepeat,delay:t.autoPlayDelay})})},t.prototype.$removed=function(t){this.$transitions.forEach(function(t){t.stop(!1,!1)})},t}(g.GObject);g.GComponent=t}(fgui||(fgui={})),function(s){var t=function(i){function n(){var t=i.call(this)||this;return t.$mode=0,t.$title="",t.$icon="",t.$pageOption=new s.controller.PageOption,t.$changeStateOnClick=!0,t.$downEffect=0,t.$downEffectValue=.8,t}return __extends(n,i),n.prototype.setDisplayObject=function(t){i.prototype.setDisplayObject.call(this,t),this.$displayObject.buttonMode=!0},Object.defineProperty(n.prototype,"icon",{get:function(){return this.$icon},set:function(t){this.$icon=t,t=this.$selected&&this.$selectedIcon?this.$selectedIcon:this.$icon,null!=this.$iconObject&&(this.$iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedIcon",{get:function(){return this.$selectedIcon},set:function(t){this.$selectedIcon=t,t=this.$selected&&this.$selectedIcon?this.$selectedIcon:this.$icon,null!=this.$iconObject&&(this.$iconObject.icon=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this.$title},set:function(t){this.$title=t,this.$titleObject&&(this.$titleObject.text=this.$selected&&this.$selectedTitle?this.$selectedTitle:this.$title),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this.title},set:function(t){this.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedTitle",{get:function(){return this.$selectedTitle},set:function(t){this.$selectedTitle=t,this.$titleObject&&(this.$titleObject.text=this.$selected&&this.$selectedTitle?this.$selectedTitle:this.$title)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"titleColor",{get:function(){return s.isColorableTitle(this.$titleObject)?this.$titleObject.titleColor:0},set:function(t){s.isColorableTitle(this.$titleObject)&&(this.$titleObject.titleColor=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fontSize",{get:function(){return s.isColorableTitle(this.$titleObject)?this.$titleObject.fontSize:0},set:function(t){s.isColorableTitle(this.$titleObject)&&(this.$titleObject.fontSize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selected",{get:function(){return this.$selected},set:function(t){if(0!=this.$mode&&this.$selected!=t){if(this.$selected=t,this.grayed&&this.$buttonController&&this.$buttonController.hasPage(n.DISABLED)?this.$selected?this.setState(n.SELECTED_DISABLED):this.setState(n.DISABLED):this.$selected?this.setState(this.$over?n.SELECTED_OVER:n.DOWN):this.setState(this.$over?n.OVER:n.UP),this.$selectedTitle&&this.$titleObject&&(this.$titleObject.text=this.$selected?this.$selectedTitle:this.$title),this.$selectedIcon){var e=this.$selected?this.$selectedIcon:this.$icon;null!=this.$iconObject&&(this.$iconObject.icon=e)}this.$relatedController&&this.$parent&&!this.$parent.$buildingDisplayList&&(this.$selected?(this.$relatedController.selectedPageId=this.$pageOption.id,this.$relatedController.$autoRadioGroupDepth&&this.$parent.adjustRadioGroupDepth(this,this.$relatedController)):1==this.$mode&&this.$relatedController.selectedPageId==this.$pageOption.id&&(this.$relatedController.oppositePageId=this.$pageOption.id))}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mode",{get:function(){return this.$mode},set:function(t){this.$mode!=t&&(0==t&&(this.selected=!1),this.$mode=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relatedController",{get:function(){return this.$relatedController},set:function(t){t!=this.$relatedController&&(this.$relatedController=t,this.$pageOption.controller=t,this.$pageOption.clear())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pageOption",{get:function(){return this.$pageOption},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"changeStateOnClick",{get:function(){return this.$changeStateOnClick},set:function(t){this.$changeStateOnClick=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"linkedPopup",{get:function(){return this.$linkedPopup},set:function(t){this.$linkedPopup=t},enumerable:!0,configurable:!0}),n.prototype.addStateListener=function(t,e){this.on("__stateChanged",t,e)},n.prototype.removeStateListener=function(t,e){this.off("__stateChanged",t,e)},n.prototype.fireClick=function(t){void 0===t&&(t=!0),t&&0==this.$mode&&(this.setState(n.OVER),s.GTimer.inst.add(100,1,this.setState,this,n.DOWN),s.GTimer.inst.add(200,1,this.setState,this,n.UP)),this.$click(null)},n.prototype.setState=function(t){if(this.$buttonController&&(this.$buttonController.selectedPage=t),1==this.$downEffect)if(t==n.DOWN||t==n.SELECTED_OVER||t==n.SELECTED_DISABLED){var e=255*this.$downEffectValue,i=(e<<16)+(e<<8)+e;this.$children.forEach(function(t){s.isColorGear(t)&&(t.color=i)})}else this.$children.forEach(function(t){s.isColorGear(t)&&(t.color=16777215)});else 2==this.$downEffect&&(t==n.DOWN||t==n.SELECTED_OVER||t==n.SELECTED_DISABLED?this.setScale(this.$downEffectValue,this.$downEffectValue):this.setScale(1,1))},n.prototype.handleControllerChanged=function(t){i.prototype.handleControllerChanged.call(this,t),this.$relatedController==t&&(this.selected=this.$pageOption.id==t.selectedPageId)},n.prototype.handleGrayedChanged=function(){this.$buttonController&&this.$buttonController.hasPage(n.DISABLED)?this.grayed?this.$selected&&this.$buttonController.hasPage(n.SELECTED_DISABLED)?this.setState(n.SELECTED_DISABLED):this.setState(n.DISABLED):this.$selected?this.setState(n.DOWN):this.setState(n.UP):i.prototype.handleGrayedChanged.call(this)},n.prototype.constructFromXML=function(t){var e;i.prototype.constructFromXML.call(this,t),(e=(t=s.utils.XmlParser.getChildNodes(t,"Button")[0]).attributes.mode)&&(this.$mode=s.ParseButtonMode(e)),(e=t.attributes.downEffect)&&(this.$downEffect="dark"==e?1:"scale"==e?2:0,e=t.attributes.downEffectValue,this.$downEffectValue=parseFloat(e),2==this.$downEffect&&this.setPivot(.5,.5)),this.$buttonController=this.getController("button"),this.$titleObject=this.getChild("title"),this.$iconObject=this.getChild("icon"),null!=this.$titleObject&&(this.$title=this.$titleObject.text),null!=this.$iconObject&&(this.$icon=this.$iconObject.icon),0==this.$mode&&this.setState(n.UP),this.on(s.InteractiveEvents.Over,this.$rollover,this),this.on(s.InteractiveEvents.Out,this.$rollout,this),this.on(s.InteractiveEvents.Down,this.$mousedown,this),this.on(s.InteractiveEvents.Click,this.$click,this)},n.prototype.setupAfterAdd=function(t){if(i.prototype.setupAfterAdd.call(this,t),t=s.utils.XmlParser.getChildNodes(t,"Button")[0]){var e=void 0;(e=t.attributes.title)&&(this.title=e),(e=t.attributes.icon)&&(this.icon=e),(e=t.attributes.selectedTitle)&&(this.selectedTitle=e),(e=t.attributes.selectedIcon)&&(this.selectedIcon=e),(e=t.attributes.titleColor)&&(this.titleColor=s.utils.StringUtil.convertFromHtmlColor(e)),(e=t.attributes.titleFontSize)&&(this.fontSize=parseInt(e)),e=t.attributes.controller,this.$relatedController=e?this.$parent.getController(e):null,this.$pageOption.id=t.attributes.page,this.selected="true"==t.attributes.checked}},n.prototype.$rollover=function(t){this.$buttonController&&this.$buttonController.hasPage(n.OVER)&&(this.$over=!0,this.$down||this.setState(this.$selected?n.SELECTED_OVER:n.OVER))},n.prototype.$rollout=function(t){this.$buttonController&&this.$buttonController.hasPage(n.OVER)&&(this.$over=!1,this.$down||this.setState(this.$selected?n.DOWN:n.UP))},n.prototype.$mousedown=function(t){this.$down=!0,s.GRoot.inst.on(s.InteractiveEvents.Up,this.$mouseup,this),0==this.$mode&&(this.grayed&&this.$buttonController&&this.$buttonController.hasPage(n.DISABLED)?this.setState(n.SELECTED_DISABLED):this.setState(n.DOWN)),null!=this.$linkedPopup&&(this.$linkedPopup instanceof s.Window?this.$linkedPopup.toggleVisible():this.root.togglePopup(this.$linkedPopup,this))},n.prototype.$mouseup=function(t){this.$down&&(s.GRoot.inst.off(s.InteractiveEvents.Up,this.$mouseup,this),this.$down=!1,0==this.$mode&&(this.grayed&&this.$buttonController&&this.$buttonController.hasPage(n.DISABLED)?this.setState(n.DISABLED):this.$over?this.setState(n.OVER):this.setState(n.UP)))},n.prototype.$click=function(t){this.$changeStateOnClick&&(1==this.$mode?(this.selected=!this.$selected,this.emit("__stateChanged",this)):2==this.$mode&&(this.$selected||(this.selected=!0,this.emit("__stateChanged",this))))},n.prototype.dispose=function(){s.GTimer.inst.remove(this.setState,this),s.GTimer.inst.remove(this.setState,this),s.GRoot.inst.off(s.InteractiveEvents.Up,this.$mouseup,this),i.prototype.dispose.call(this)},n.UP="up",n.DOWN="down",n.OVER="over",n.SELECTED_OVER="selectedOver",n.DISABLED="disabled",n.SELECTED_DISABLED="selectedDisabled",n}(s.GComponent);s.GButton=t}(fgui||(fgui={})),function(r){var t=function(s){function t(){var t=s.call(this)||this;return t.$visibleItemCount=0,t.$selectedIndex=0,t.$popupDir=1,t.$visibleItemCount=r.UIConfig.defaultComboBoxVisibleItemCount,t.$itemsUpdated=!0,t.$selectedIndex=-1,t.$items=[],t.$values=[],t}return __extends(t,s),Object.defineProperty(t.prototype,"text",{get:function(){return this.$titleObject?this.$titleObject.text:null},set:function(t){this.$titleObject&&(this.$titleObject.text=t),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return this.$iconObject?this.$iconObject.icon:null},set:function(t){this.$iconObject&&(this.$iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleColor",{get:function(){return r.isColorableTitle(this.$titleObject)?this.$titleObject.titleColor:0},set:function(t){r.isColorableTitle(this.$titleObject)&&(this.$titleObject.titleColor=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleItemCount",{get:function(){return this.$visibleItemCount},set:function(t){this.$visibleItemCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"popupDirection",{get:function(){return this.$popupDir},set:function(t){this.$popupDir=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this.$items},set:function(t){t?this.$items=t.concat():this.$items.length=0,0<this.$items.length?(this.$selectedIndex>=this.$items.length?this.$selectedIndex=this.$items.length-1:-1==this.$selectedIndex&&(this.$selectedIndex=0),this.text=this.$items[this.$selectedIndex],null!=this.$icons&&this.$selectedIndex<this.$icons.length&&(this.icon=this.$icons[this.$selectedIndex])):(this.text="",null!=this.$icons&&(this.icon=null),this.$selectedIndex=-1),this.$itemsUpdated=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icons",{get:function(){return this.$icons},set:function(t){this.$icons=t,null!=this.$icons&&-1!=this.$selectedIndex&&this.$selectedIndex<this.$icons.length&&(this.icon=this.$icons[this.$selectedIndex])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){return this.$values},set:function(t){t?this.$values=t.concat():this.$values.length=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this.$selectedIndex},set:function(t){this.$selectedIndex!=t&&(this.$selectedIndex=t,0<=this.selectedIndex&&this.selectedIndex<this.$items.length?(this.text=this.$items[this.$selectedIndex],null!=this.$icons&&this.$selectedIndex<this.$icons.length&&(this.icon=this.$icons[this.$selectedIndex])):(this.text="",null!=this.$icons&&(this.icon=null)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.$values[this.$selectedIndex]},set:function(t){this.selectedIndex=this.$values.indexOf(t)},enumerable:!0,configurable:!0}),t.prototype.setState=function(t){this.$buttonController&&(this.$buttonController.selectedPage=t)},t.prototype.constructFromXML=function(t){var e;if(s.prototype.constructFromXML.call(this,t),t=r.utils.XmlParser.getChildNodes(t,"ComboBox")[0],this.$buttonController=this.getController("button"),this.$titleObject=this.getChild("title"),this.$iconObject=this.getChild("icon"),e=t.attributes.dropdown){if(this.$dropdown=r.UIPackage.createObjectFromURL(e),!this.$dropdown)throw new Error("the 'dropdown' is not specified, it must be a component definied in the package pool");if(this.$dropdown.name="this.dropdown",this.$list=this.$dropdown.getChild("list"),null==this.$list)throw new Error(this.resourceURL+": the dropdown component must have a GList child and named 'list'.");this.$list.on("__itemClick",this.$clickItem,this),this.$list.addRelation(this.$dropdown,14),this.$list.removeRelation(this.$dropdown,15),this.$dropdown.addRelation(this.$list,15),this.$dropdown.removeRelation(this.$list,14),this.$dropdown.on("removed",this.$popupWinClosed,this)}PIXI.utils.isMobile.any||(this.on(r.InteractiveEvents.Over,this.$rollover,this),this.on(r.InteractiveEvents.Out,this.$rollout,this)),this.on(r.InteractiveEvents.Down,this.$mousedown,this)},t.prototype.dispose=function(){r.GTimer.inst.remove(this.delayedClickItem,this),this.$list.off("__itemClick",this.$clickItem,this),this.$dropdown.off("removed",this.$popupWinClosed,this),r.GRoot.inst.nativeStage.off(r.InteractiveEvents.Up,this.$mouseup,this),this.$popupWinClosed(null),this.$dropdown&&(this.$dropdown.dispose(),this.$dropdown=null),s.prototype.dispose.call(this)},t.prototype.setupAfterAdd=function(t){var i=this;if(s.prototype.setupAfterAdd.call(this,t),t=r.utils.XmlParser.getChildNodes(t,"ComboBox")[0]){var n;(n=t.attributes.titleColor)&&(this.titleColor=r.utils.StringUtil.convertFromHtmlColor(n)),(n=t.attributes.visibleItemCount)&&(this.$visibleItemCount=parseInt(n));var e=t.children;e&&e.forEach(function(t,e){"item"==t.nodeName&&(i.$items.push(t.attributes.title),i.$values.push(t.attributes.value),(n=t.attributes.icon)&&(i.$icons||(i.$icons=new Array(length)),i.$icons[e]=n))}),(n=t.attributes.title)?(this.text=n,this.$selectedIndex=this.$items.indexOf(n)):0<this.$items.length?(this.$selectedIndex=0,this.text=this.$items[0]):this.$selectedIndex=-1,(n=t.attributes.icon)&&(this.icon=n),(n=t.attributes.direction)&&("up"==n?this.$popupDir=2:"auto"==n&&(this.$popupDir=0))}},t.prototype.showDropdown=function(){var n=this;this.$itemsUpdated&&(this.$itemsUpdated=!1,this.$list.removeChildrenToPool(),this.$items.forEach(function(t,e){var i=n.$list.addItemFromPool();i.name=e<n.$values.length?n.$values[e]:"",i.text=n.$items[e],i.icon=null!=n.$icons&&e<n.$icons.length?n.$icons[e]:null},this),this.$list.resizeToFit(this.$visibleItemCount)),this.$list.selectedIndex=-1,this.$dropdown.width=this.width,this.root.togglePopup(this.$dropdown,this,this.$popupDir),this.$dropdown.parent&&this.setState(r.GButton.DOWN)},t.prototype.$popupWinClosed=function(t){this.$over?this.setState(r.GButton.OVER):this.setState(r.GButton.UP)},t.prototype.$clickItem=function(t,e){r.GTimer.inst.add(100,1,this.delayedClickItem,this,this.$list.getChildIndex(e))},t.prototype.delayedClickItem=function(t){this.$dropdown.parent instanceof r.GRoot&&this.$dropdown.parent.hidePopup(),this.$selectedIndex=t,0<=this.$selectedIndex?this.text=this.$items[this.$selectedIndex]:this.text="",this.emit("__stateChanged",this)},t.prototype.$rollover=function(t){this.$over=!0,this.$down||this.$dropdown&&this.$dropdown.parent||this.setState(r.GButton.OVER)},t.prototype.$rollout=function(t){this.$over=!1,this.$down||this.$dropdown&&this.$dropdown.parent||this.setState(r.GButton.UP)},t.prototype.$mousedown=function(t){t.stopPropagation(),r.GRoot.inst.checkPopups(t.target),this.$down=!0,r.GRoot.inst.nativeStage.on(r.InteractiveEvents.Up,this.$mouseup,this),this.$dropdown&&this.showDropdown()},t.prototype.$mouseup=function(t){this.$down&&(this.$down=!1,r.GRoot.inst.nativeStage.off(r.InteractiveEvents.Up,this.$mouseup,this),this.$dropdown&&!this.$dropdown.parent&&(this.$over?this.setState(r.GButton.OVER):this.setState(r.GButton.UP)))},t}(r.GComponent);r.GComboBox=t}(fgui||(fgui={})),function(r){var t=function(){function t(t){this.$lockToken=0,this.$owner=t,this.$easeType=r.ParseEaseType("Quad.Out"),this.$tweenTime=.3,this.$tweenDelay=0}return Object.defineProperty(t.prototype,"controller",{get:function(){return this.$controller},set:function(t){t!=this.$controller&&(this.$controller=t,this.$controller&&this.init())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tween",{get:function(){return this.$tween},set:function(t){this.$tween=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tweenDelay",{get:function(){return this.$tweenDelay},set:function(t){this.$tweenDelay=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tweenTime",{get:function(){return this.$tweenTime},set:function(t){this.$tweenTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"easeType",{get:function(){return this.$easeType},set:function(t){this.$easeType=t},enumerable:!0,configurable:!0}),t.prototype.setup=function(t){var e,i=this;if(this.$controller=this.$owner.parent.getController(t.attributes.controller),null!=this.$controller)if(this.init(),(e=t.attributes.tween)&&(this.$tween=!0),(e=t.attributes.ease)&&(this.$easeType=r.ParseEaseType(e)),(e=t.attributes.duration)&&(this.$tweenTime=parseFloat(e)),(e=t.attributes.delay)&&(this.$tweenDelay=parseFloat(e)),this instanceof r.GearDisplay)(e=t.attributes.pages)&&(this.pages=e.split(","));else{var n,s=void 0;(e=t.attributes.pages)&&(n=e.split(",")),(e=t.attributes.values)&&(s=e.split("|")),n&&s&&s.forEach(function(t,e){i.addStatus(n[e],t)}),(e=t.attributes.default)&&this.addStatus(null,e)}},t.prototype.updateFromRelations=function(t,e){},t.prototype.addStatus=function(t,e){},t.prototype.init=function(){},t.prototype.apply=function(){},t.prototype.updateState=function(){},t.disableAllTweenEffect=!1,t}();r.GearBase=t}(fgui||(fgui={})),function(t){var e=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.init=function(){this.$default=new s(this.$owner.playing,this.$owner.frame),this.$storage={}},t.prototype.addStatus=function(t,e){if("-"!=e){var i;null==t?i=this.$default:(i=new s,this.$storage[t]=i);var n=e.split(",");i.frame=parseInt(n[0]),i.playing="p"==n[1]}},t.prototype.apply=function(){this.$owner.$gearLocked=!0;var t=this.$storage[this.$controller.selectedPageId];t||(t=this.$default),this.$owner.frame=t.frame,this.$owner.playing=t.playing,this.$owner.$gearLocked=!1},t.prototype.updateState=function(){if(null!=this.$controller&&!this.$owner.$gearLocked&&!this.$owner.$inProgressBuilding){var t=this.$storage[this.$controller.selectedPageId];t||(t=new s,this.$storage[this.$controller.selectedPageId]=t),t.frame=this.$owner.frame,t.playing=this.$owner.playing}},t}(t.GearBase);t.GearAnimation=e;var s=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=0),this.playing=t,this.frame=e}}(fgui||(fgui={})),function(n){var t=function(i){function t(t){var e=i.call(this,t)||this;return e.$default=0,e}return __extends(t,i),t.prototype.init=function(){this.$default=this.$owner.color,this.$storage={}},t.prototype.addStatus=function(t,e){if("-"!=e){var i=n.utils.StringUtil.convertFromHtmlColor(e);null==t?this.$default=i:this.$storage[t]=i}},t.prototype.apply=function(){this.$owner.$gearLocked=!0;var t=this.$storage[this.$controller.selectedPageId];this.$owner.color=null!=t?Math.floor(t):Math.floor(this.$default),this.$owner.$gearLocked=!1},t.prototype.updateState=function(){null==this.$controller||this.$owner.$gearLocked||this.$owner.$inProgressBuilding||(this.$storage[this.$controller.selectedPageId]=this.$owner.color)},t}(n.GearBase);n.GearColor=t}(fgui||(fgui={})),function(t){var e=function(i){function t(t){var e=i.call(this,t)||this;return e.$vid=0,e.$lockToken=1,e}return __extends(t,i),t.prototype.init=function(){this.pages=null},t.prototype.lock=function(){return this.$vid++,this.$lockToken},t.prototype.release=function(t){t==this.$lockToken&&this.$vid--},Object.defineProperty(t.prototype,"connected",{get:function(){return null==this.controller||0<this.$vid},enumerable:!0,configurable:!0}),t.prototype.apply=function(){this.$lockToken++,this.$lockToken<=0&&(this.$lockToken=1),null==this.pages||0==this.pages.length||-1!=this.pages.indexOf(this.$controller.selectedPageId)?this.$vid=1:this.$vid=0},t}(t.GearBase);t.GearDisplay=e}(fgui||(fgui={})),function(t){var e=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.init=function(){this.$default=this.$owner.icon,this.$storage={}},t.prototype.addStatus=function(t,e){null==t?this.$default=e:this.$storage[t]=e},t.prototype.apply=function(){this.$owner.$gearLocked=!0;var t=this.$storage[this.$controller.selectedPageId];this.$owner.icon=null!=t?t:this.$default,this.$owner.$gearLocked=!1},t.prototype.updateState=function(){null==this.$controller||this.$owner.$gearLocked||this.$owner.$inProgressBuilding||(this.$storage[this.$controller.selectedPageId]=this.$owner.icon)},t}(t.GearBase);t.GearIcon=e}(fgui||(fgui={})),function(r){var t=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.init=function(){this.$default=new s(this.$owner.alpha,this.$owner.rotation,this.$owner.grayed),this.$storage={}},t.prototype.addStatus=function(t,e){if("-"!=e){var i,n=e.split(",");null==t?i=this.$default:(i=new s,this.$storage[t]=i),i.alpha=parseFloat(n[0]),i.rotation=parseInt(n[1]),i.grayed="1"==n[2]}},t.prototype.apply=function(){var t=this,e=this.$storage[this.$controller.selectedPageId];if(e||(e=this.$default),!this.$tween||r.UIPackage.$constructingObjects||r.GearBase.disableAllTweenEffect)this.$owner.$gearLocked=!0,this.$owner.grayed=e.grayed,this.$owner.alpha=e.alpha,this.$owner.rotation=e.rotation,this.$owner.$gearLocked=!1;else{if(this.$owner.$gearLocked=!0,this.$owner.grayed=e.grayed,this.$owner.$gearLocked=!1,this.$tweener){if(this.$tweenTarget.alpha==e.alpha&&this.$tweenTarget.rotation==e.rotation)return;this.$tweener.tick(1e8),this.$tweener=null}var i=e.alpha!=this.$owner.alpha,n=e.rotation!=this.$owner.rotation;if(i||n){this.$owner.hasGearController(0,this.$controller)&&(this.$lockToken=this.$owner.lockGearDisplay()),this.$tweenTarget=e;var s={onChange:function(){t.$owner.$gearLocked=!0,i&&(t.$owner.alpha=t.$tweenValue.x),n&&(t.$owner.rotation=t.$tweenValue.y),t.$owner.$gearLocked=!1}};null==this.$tweenValue&&(this.$tweenValue=new PIXI.Point),this.$tweenValue.x=this.$owner.alpha,this.$tweenValue.y=this.$owner.rotation,this.$tweener=createjs.Tween.get(this.$tweenValue,s).wait(1e3*this.$tweenDelay).to({x:e.alpha,y:e.rotation},1e3*this.$tweenTime,this.$easeType).call(this.tweenComplete,null,this)}}},t.prototype.tweenComplete=function(){0!=this.$lockToken&&(this.$owner.releaseGearDisplay(this.$lockToken),this.$lockToken=0),this.$tweener=null,this.$owner.emit("__gearStop",this)},t.prototype.updateState=function(){if(null!=this.$controller&&!this.$owner.$gearLocked&&!this.$owner.$inProgressBuilding){var t=this.$storage[this.$controller.selectedPageId];t||(t=new s,this.$storage[this.$controller.selectedPageId]=t),t.alpha=this.$owner.alpha,t.rotation=this.$owner.rotation,t.grayed=this.$owner.grayed}},t}(r.GearBase);r.GearLook=t;var s=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=!1),this.alpha=t,this.rotation=e,this.grayed=i}}(fgui||(fgui={})),function(r){var t=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.init=function(){this.$default=new o(this.$owner.width,this.$owner.height,this.$owner.scaleX,this.$owner.scaleY),this.$storage={}},t.prototype.addStatus=function(t,e){if("-"!=e){var i,n=e.split(",");null==t?i=this.$default:(i=new o,this.$storage[t]=i),i.width=parseInt(n[0]),i.height=parseInt(n[1]),2<n.length&&(i.scaleX=parseFloat(n[2]),i.scaleY=parseFloat(n[3]))}},t.prototype.apply=function(){var t=this,e=this.$storage[this.$controller.selectedPageId];if(e||(e=this.$default),!this.$tween||r.UIPackage.$constructingObjects||r.GearBase.disableAllTweenEffect)this.$owner.$gearLocked=!0,this.$owner.setSize(e.width,e.height,this.$owner.gearXY.controller==this.$controller),this.$owner.setScale(e.scaleX,e.scaleY),this.$owner.$gearLocked=!1;else{if(this.$tweener){if(this.$tweenTarget.width==e.width&&this.$tweenTarget.height==e.height&&this.$tweenTarget.scaleX==e.scaleX&&this.$tweenTarget.scaleY==e.scaleY)return;this.$tweener.tick(1e8),this.$tweener=null}var i=e.width!=this.$owner.width||e.height!=this.$owner.height,n=e.scaleX!=this.$owner.scaleX||e.scaleY!=this.$owner.scaleY;if(i||n){this.$owner.hasGearController(0,this.$controller)&&(this.$lockToken=this.$owner.lockGearDisplay()),this.$tweenTarget=e;var s={onChange:function(){t.$owner.$gearLocked=!0,i&&t.$owner.setSize(t.$tweenValue.width,t.$tweenValue.height,t.$owner.gearXY.controller==t.$controller),n&&t.$owner.setScale(t.$tweenValue.scaleX,t.$tweenValue.scaleY),t.$owner.$gearLocked=!1}};null==this.$tweenValue&&(this.$tweenValue=new o),this.$tweenValue.width=this.$owner.width,this.$tweenValue.height=this.$owner.height,this.$tweenValue.scaleX=this.$owner.scaleX,this.$tweenValue.scaleY=this.$owner.scaleY,this.$tweener=createjs.Tween.get(this.$tweenValue,s).wait(1e3*this.$tweenDelay).to({width:e.width,height:e.height,scaleX:e.scaleX,scaleY:e.scaleY},1e3*this.$tweenTime,this.$easeType).call(this.tweenComplete,null,this)}}},t.prototype.tweenComplete=function(){0!=this.$lockToken&&(this.$owner.releaseGearDisplay(this.$lockToken),this.$lockToken=0),this.$tweener=null,this.$owner.emit("__gearStop",this)},t.prototype.updateState=function(){if(null!=this.$controller&&!this.$owner.$gearLocked&&!this.$owner.$inProgressBuilding){var t=this.$storage[this.$controller.selectedPageId];t||(t=new o,this.$storage[this.$controller.selectedPageId]=t),t.width=this.$owner.width,t.height=this.$owner.height,t.scaleX=this.$owner.scaleX,t.scaleY=this.$owner.scaleY}},t.prototype.updateFromRelations=function(t,e){if(null!=this.$controller&&null!=this.$storage){for(var i in this.$storage){var n=this.$storage[i];n.width+=t,n.height+=e}this.$default.width+=t,this.$default.height+=e,this.updateState()}},t}(r.GearBase);r.GearSize=t;var o=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.width=t,this.height=e,this.scaleX=i,this.scaleY=n}}(fgui||(fgui={})),function(t){var e=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.init=function(){this.$default=this.$owner.text,this.$storage={}},t.prototype.addStatus=function(t,e){null==t?this.$default=e:this.$storage[t]=e},t.prototype.apply=function(){this.$owner.$gearLocked=!0;var t=this.$storage[this.$controller.selectedPageId];this.$owner.text=null!=t?t:this.$default,this.$owner.$gearLocked=!1},t.prototype.updateState=function(){null==this.$controller||this.$owner.$gearLocked||this.$owner.$inProgressBuilding||(this.$storage[this.$controller.selectedPageId]=this.$owner.text)},t}(t.GearBase);t.GearText=e}(fgui||(fgui={})),function(n){var t=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.init=function(){this.$default=new PIXI.Point(this.$owner.x,this.$owner.y),this.$storage={}},t.prototype.addStatus=function(t,e){if("-"!=e){var i,n=e.split(",");null==t?i=this.$default:(i=new PIXI.Point,this.$storage[t]=i),i.x=parseInt(n[0]),i.y=parseInt(n[1])}},t.prototype.apply=function(){var t=this,e=this.$storage[this.$controller.selectedPageId];if(e||(e=this.$default),!this.$tween||n.UIPackage.$constructingObjects||n.GearBase.disableAllTweenEffect)this.$owner.$gearLocked=!0,this.$owner.setXY(e.x,e.y),this.$owner.$gearLocked=!1;else{if(this.$tweener){if(this.$tweenTarget.x==e.x&&this.$tweenTarget.y==e.y)return;this.$tweener.tick(1e8),this.$tweener=null}if(this.$owner.x!=e.x||this.$owner.y!=e.y){this.$owner.hasGearController(0,this.$controller),this.$lockToken=this.$owner.lockGearDisplay(),this.$tweenTarget=e;var i={onChange:function(){t.$owner.$gearLocked=!0,t.$owner.setXY(t.$tweenValue.x,t.$tweenValue.y),t.$owner.$gearLocked=!1}};null==this.$tweenValue&&(this.$tweenValue=new PIXI.Point),this.$tweenValue.x=this.$owner.x,this.$tweenValue.y=this.$owner.y,this.$tweener=createjs.Tween.get(this.$tweenValue,i).wait(1e3*this.$tweenDelay).to({x:e.x,y:e.y},1e3*this.$tweenTime,this.$easeType).call(this.tweenComplete,null,this)}}},t.prototype.tweenComplete=function(){0!=this.$lockToken&&(this.$owner.releaseGearDisplay(this.$lockToken),this.$lockToken=0),this.$tweener=null,this.$owner.emit("__gearStop",this)},t.prototype.updateState=function(){if(null!=this.$controller&&!this.$owner.$gearLocked&&!this.$owner.$inProgressBuilding){var t=this.$storage[this.$controller.selectedPageId];t||(t=new PIXI.Point,this.$storage[this.$controller.selectedPageId]=t),t.x=this.$owner.x,t.y=this.$owner.y}},t.prototype.updateFromRelations=function(t,e){if(null!=this.$controller&&null!=this.$storage){for(var i in this.$storage){var n=this.$storage[i];n.x+=t,n.y+=e}this.$default.x+=t,this.$default.y+=e,this.updateState()}},t}(n.GearBase);n.GearXY=t}(fgui||(fgui={})),function(o){var t=function(r){function t(){var t=r.call(this)||this;return t.$type=0,t.$lineSize=0,t.$lineColor=0,t.$fillColor=0,t.$lineSize=1,t.$lineAlpha=1,t.$fillAlpha=1,t.$fillColor=16777215,t}return __extends(t,r),t.prototype.drawRect=function(t,e,i,n,s,r){void 0===r&&(r=null),this.$type=1,this.$lineSize=t,this.$lineColor=e,this.$lineAlpha=i,this.$fillColor=n,this.$fillAlpha=s,this.$corner=r,this.drawGraph()},t.prototype.drawEllipse=function(t,e,i,n,s){this.$type=2,this.$lineSize=t,this.$lineColor=e,this.$lineAlpha=i,this.$fillColor=n,this.$fillAlpha=s,this.$corner=null,this.drawGraph()},Object.defineProperty(t.prototype,"color",{get:function(){return this.$fillColor},set:function(t){this.$fillColor=t,0!=this.$type&&this.drawGraph()},enumerable:!0,configurable:!0}),t.prototype.drawGraph=function(){var t=this.$displayObject;t.interactive=this.touchable,t.clear();var e=this.width,i=this.height;if(0!=e&&0!=i){if(0==this.$lineSize?t.lineStyle(0,0,0):t.lineStyle(this.$lineSize,this.$lineColor,this.$lineAlpha),t.beginFill(this.$fillColor,this.$fillAlpha),1==this.$type)this.$corner&&1<=this.$corner.length?t.drawRoundedRect(0,0,e,i,this.$corner[0]):t.drawRect(0,0,e,i);else{var n=.5*e,s=.5*i;e==i?t.drawCircle(n,n,n):t.drawEllipse(n,s,n,s)}t.endFill()}},t.prototype.replaceMe=function(t){if(!this.$parent)throw new Error("parent not set");t.name=this.name,t.alpha=this.alpha,t.rotation=this.rotation,t.visible=this.visible,t.touchable=this.touchable,t.grayed=this.grayed,t.setXY(this.x,this.y),t.setSize(this.width,this.height);var e=this.$parent.getChildIndex(this);this.$parent.addChildAt(t,e),t.relations.copyFrom(this.relations),this.$parent.removeChild(this,!0)},t.prototype.addBeforeMe=function(t){if(null==this.$parent)throw new Error("parent not set");var e=this.$parent.getChildIndex(this);this.$parent.addChildAt(t,e)},t.prototype.addAfterMe=function(t){if(null==this.$parent)throw new Error("parent not set");var e=this.$parent.getChildIndex(this);e++,this.$parent.addChildAt(t,e)},t.prototype.setNativeObject=function(t){this.$type=0;var e=this.$displayObject;e.interactive=this.touchable,e.clear(),e.removeChildren(),e.addChild(t)},t.prototype.createDisplayObject=function(){this.$displayObject=new o.UISprite(this)},t.prototype.handleSizeChanged=function(){0!=this.$type&&this.drawGraph()},t.prototype.setupBeforeAdd=function(t){r.prototype.setupBeforeAdd.call(this,t);var e=t.attributes.type;if(e&&"empty"!=e){var i=void 0;(i=t.attributes.lineSize)&&(this.$lineSize=parseInt(i));var n=void 0;(i=t.attributes.lineColor)&&(n=o.utils.StringUtil.convertFromHtmlColor(i,!0),this.$lineColor=16777215&n,this.$lineAlpha=(n>>24&255)/255),(i=t.attributes.fillColor)&&(n=o.utils.StringUtil.convertFromHtmlColor(i,!0),this.$fillColor=16777215&n,this.$fillAlpha=(n>>24&255)/255);var s=void 0;(i=t.attributes.corner)&&(1<(s=i.split(",")).length?this.$corner=[parseInt(s[0]),parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]:this.$corner=[parseInt(s[0])]),this.$type="rect"==e?1:2,this.drawGraph()}},t}(o.GObject);o.GGraph=t}(fgui||(fgui={})),function(e){var t=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return __extends(t,s),t.prototype.createDisplayObject=function(){var t=new e.UIContainer(this);t.interactive=!1,this.setDisplayObject(t)},t.prototype.updateBounds=function(){if(!this.$updating&&this.parent){var t,e=this.$parent.numChildren,i=0,n=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;this.$empty=!0;var h=0;for(i=0;i<e;i++)(t=this.$parent.getChildAt(i)).group==this&&((h=t.x)<n&&(n=h),(h=t.y)<s&&(s=h),r<(h=t.x+t.width)&&(r=h),o<(h=t.y+t.height)&&(o=h),this.$empty=!1);this.$updating=!0,this.$empty?this.setSize(0,0):(this.setXY(n,s),this.setSize(r-n,o-s)),this.$updating=!1}},t.prototype.setXY=function(t,e){if(this.$x!=t||this.$y!=e){var i=t-this.$x,n=e-this.$y;s.prototype.setXY.call(this,t,e),this.moveChildren(i,n)}},t.prototype.moveChildren=function(t,e){if(!this.$updating&&this.$parent){this.$updating=!0;var i,n=this.$parent.numChildren,s=0;for(s=0;s<n;s++)(i=this.$parent.getChildAt(s)).group==this&&i.setXY(i.x+t,i.y+e);this.$updating=!1}},t.prototype.updateAlpha=function(){if(s.prototype.updateAlpha.call(this),!this.$inProgressBuilding){var t,e,i=this.$parent.numChildren;for(t=0;t<i;t++)(e=this.$parent.getChildAt(t)).group==this&&(e.alpha=this.alpha)}},t}(e.GObject);e.GGroup=t}(fgui||(fgui={})),function(n){var t=function(i){function t(){return i.call(this)||this}return __extends(t,i),Object.defineProperty(t.prototype,"touchable",{get:function(){return!1},set:function(t){this.$touchable=!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.$content.tint},set:function(t){this.color!=t&&(this.updateGear(4),this.$content.tint=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flip",{get:function(){return this.$flip},set:function(t){if(this.$flip!=t){this.$flip=t;var e=1,i=1;1!=this.$flip&&3!=this.$flip||(e=-1),2!=this.$flip&&3!=this.$flip||(i=-1),this.$content.scale.set(e,i),this.handleXYChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this.$content.texture},set:function(t){null!=t?(this.$sourceWidth=t.orig.width,this.$sourceHeight=t.orig.height):this.$sourceWidth=this.$sourceHeight=0,this.$initWidth=this.$sourceWidth,this.$initHeight=this.$sourceHeight,this.$content.texture=t},enumerable:!0,configurable:!0}),t.prototype.createDisplayObject=function(){this.$content=new n.UIImage(this),this.setDisplayObject(this.$content)},t.prototype.dispose=function(){this.$content.destroy(),i.prototype.dispose.call(this)},t.prototype.constructFromResource=function(){this.$sourceWidth=this.packageItem.width,this.$sourceHeight=this.packageItem.height,this.$initWidth=this.$sourceWidth,this.$initHeight=this.$sourceHeight,this.$content.$initDisp(this.packageItem),this.setSize(this.$sourceWidth,this.$sourceHeight)},t.prototype.handleXYChanged=function(){i.prototype.handleXYChanged.call(this),0!=this.$flip&&(-1==this.$content.scale.x&&(this.$content.x+=this.width),-1==this.$content.scale.y&&(this.$content.y+=this.height))},t.prototype.handleSizeChanged=function(){this.$content.width=this.width,this.$content.height=this.height},t.prototype.setupBeforeAdd=function(t){var e;i.prototype.setupBeforeAdd.call(this,t),(e=t.attributes.color)&&(this.color=n.utils.StringUtil.convertFromHtmlColor(e)),(e=t.attributes.flip)&&(this.flip=n.ParseFlipType(e))},t}(n.GObject);n.GImage=t}(fgui||(fgui={})),function(r){var t=function(s){function t(){return s.call(this)||this}return __extends(t,s),Object.defineProperty(t.prototype,"icon",{get:function(){return null!=this.$iconObject?this.$iconObject.icon:null},set:function(t){null!=this.$iconObject&&(this.$iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.$titleObject?this.$titleObject.text:null},set:function(t){this.$titleObject&&(this.$titleObject.text=t),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.title},set:function(t){this.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleColor",{get:function(){return r.isColorableTitle(this.$titleObject)?this.$titleObject.titleColor:0},set:function(t){r.isColorableTitle(this.$titleObject)&&(this.$titleObject.titleColor=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return r.isColorableTitle(this.$titleObject)?this.$titleObject.fontSize:0},set:function(t){r.isColorableTitle(this.$titleObject)&&(this.$titleObject.fontSize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editable",{get:function(){return!!(this.$titleObject&&this.$titleObject instanceof r.GTextInput)&&this.$titleObject.editable},set:function(t){this.$titleObject&&(this.$titleObject.editable=t)},enumerable:!0,configurable:!0}),t.prototype.constructFromXML=function(t){s.prototype.constructFromXML.call(this,t),this.$titleObject=this.getChild("title"),this.$iconObject=this.getChild("icon")},t.prototype.setupAfterAdd=function(t){s.prototype.setupAfterAdd.call(this,t);var e=r.utils.XmlParser.getChildNodes(t,"Label");if(e&&0<e.length){var i=void 0;if((i=(t=e[0]).attributes.title)&&(this.text=i),(i=t.attributes.icon)&&(this.icon=i),(i=t.attributes.titleColor)&&(this.titleColor=r.utils.StringUtil.convertFromHtmlColor(i)),this.$titleObject instanceof r.GTextInput){i=t.attributes.prompt;var n=this.$titleObject;i&&(n.promptText=i),(i=t.attributes.maxLength)&&(n.maxLength=parseInt(i)),(i=t.attributes.restrict)&&(n.restrict=i),(i=t.attributes.password)&&(n.password="true"==i)}}},t}(r.GComponent);r.GLabel=t}(fgui||(fgui={})),function(O){var r=function(){this.width=0,this.height=0},t=function(u){function P(){var t=u.call(this)||this;return t.scrollItemToViewOnClick=!0,t.foldInvisibleItems=!1,t.$lineCount=0,t.$columnCount=0,t.$lineGap=0,t.$columnGap=0,t.$numItems=0,t.$realNumItems=0,t.$firstIndex=0,t.$curLineItemCount=0,t.$curLineItemCount2=0,t.$virtualListChanged=0,t.$apexIndex=0,t.$childrenRenderOrder=0,t.$trackBounds=!0,t.$pool=new O.utils.GObjectRecycler,t.$layout=0,t.$autoResizeItem=!0,t.$selectionMode=0,t.opaque=!0,t.$align="left",t.$verticalAlign=0,t.$container=new PIXI.Container,t.$rootContainer.addChild(t.$container),t}return __extends(P,u),Object.defineProperty(P.prototype,"childrenRenderOrder",{get:function(){return this.$childrenRenderOrder},set:function(t){this.$childrenRenderOrder!=t&&(this.$childrenRenderOrder=t,this.appendChildrenList())},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"apexIndex",{get:function(){return this.$apexIndex},set:function(t){this.$apexIndex!=t&&(this.$apexIndex=t,2==this.$childrenRenderOrder&&this.appendChildrenList())},enumerable:!0,configurable:!0}),P.prototype.appendChildrenList=function(){var t,e,i=this.$children.length;if(0!=i)switch(this.$childrenRenderOrder){case 0:for(t=0;t<i;t++)null!=(e=this.$children[t]).displayObject&&e.finalVisible&&this.$container.addChild(e.displayObject);break;case 1:for(t=i-1;0<=t;t--)null!=(e=this.$children[t]).displayObject&&e.finalVisible&&this.$container.addChild(e.displayObject);break;case 2:for(t=0;t<this.$apexIndex;t++)null!=(e=this.$children[t]).displayObject&&e.finalVisible&&this.$container.addChild(e.displayObject);for(t=i-1;t>=this.$apexIndex;t--)null!=(e=this.$children[t]).displayObject&&e.finalVisible&&this.$container.addChild(e.displayObject)}},P.prototype.setXY=function(t,e){this.$x==t&&this.$y==e||(this.$x=t,this.$y=e,this.handleXYChanged(),this.updateGear(1),O.GObject.draggingObject!=this||O.GObject.sUpdatingWhileDragging||this.localToGlobalRect(0,0,this.width,this.height,O.GObject.sGlobalRect))},P.prototype.$setChildIndex=function(t,e,i){void 0===i&&(i=0);var n=this.$children.length;if(n<i&&(i=n),e==i)return e;if(this.$children.splice(e,1),this.$children.splice(i,0,t),t.inContainer){var s=0,r=void 0;if(0==this.$childrenRenderOrder){for(r=0;r<i;r++)this.$children[r].inContainer&&s++;s==this.$container.children.length&&s--,this.$container.setChildIndex(t.displayObject,s)}else if(1==this.$childrenRenderOrder){for(r=n-1;i<r;r--)this.$children[r].inContainer&&s++;s==this.$container.children.length&&s--,this.$container.setChildIndex(t.displayObject,s)}else O.GTimer.inst.callLater(this.appendChildrenList,this);this.setBoundsChangedFlag()}return i},P.prototype.childStateChanged=function(e){var i=this;if(!this.$buildingDisplayList)if(e instanceof O.GGroup)this.$children.forEach(function(t){t.group==e&&i.childStateChanged(t)},this);else if(e.displayObject)if(e.finalVisible){var t=void 0,n=void 0,s=this.$children.length;if(!e.displayObject.parent){var r=0;if(0==this.$childrenRenderOrder){for(var o=0;o<s&&(n=this.$children[o])!=e;o++)null!=n.displayObject&&null!=n.displayObject.parent&&r++;this.$container.addChildAt(e.displayObject,r)}else if(1==this.$childrenRenderOrder){for(t=s-1;0<=t&&(n=this.$children[t])!=e;t--)null!=n.displayObject&&null!=n.displayObject.parent&&r++;this.$container.addChildAt(e.displayObject,r)}else this.$container.addChild(e.displayObject),O.GTimer.inst.callLater(this.appendChildrenList,this)}}else e.displayObject.parent&&this.$container.removeChild(e.displayObject)},P.prototype.dispose=function(){O.GTimer.inst.remove(this._refreshVirtualList,this),this.$pool.clear(),this.$scrollPane&&(this.$scrollPane.off("__scroll",this.$scrolled,this),this.$scrollPane.dispose()),u.prototype.dispose.call(this)},Object.defineProperty(P.prototype,"layout",{get:function(){return this.$layout},set:function(t){this.$layout!=t&&(this.$layout=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"lineCount",{get:function(){return this.$lineCount},set:function(t){this.$lineCount!=t&&(this.$lineCount=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"columnCount",{get:function(){return this.$columnCount},set:function(t){this.$columnCount!=t&&(this.$columnCount=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"lineGap",{get:function(){return this.$lineGap},set:function(t){this.$lineGap!=t&&(this.$lineGap=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"columnGap",{get:function(){return this.$columnGap},set:function(t){this.$columnGap!=t&&(this.$columnGap=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"align",{get:function(){return this.$align},set:function(t){this.$align!=t&&(this.$align=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$verticalAlign!=t&&(this.$verticalAlign=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"virtualItemSize",{get:function(){return this.$itemSize},set:function(t){this.$virtual&&(null==this.$itemSize&&(this.$itemSize=new PIXI.Point),this.$itemSize.copy(t),this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"defaultItem",{get:function(){return this.$defaultItem},set:function(t){this.$defaultItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"autoResizeItem",{get:function(){return this.$autoResizeItem},set:function(t){this.$autoResizeItem!=t&&(this.$autoResizeItem=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"selectionMode",{get:function(){return this.$selectionMode},set:function(t){this.$selectionMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"selectionController",{get:function(){return this.$selectionController},set:function(t){this.$selectionController=t},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"itemPool",{get:function(){return this.$pool},enumerable:!0,configurable:!0}),P.prototype.getFromPool=function(t){void 0===t&&(t=null),t||(t=this.$defaultItem);var e=this.$pool.get(t);return null!=e&&(e.visible=!0),e},P.prototype.returnToPool=function(t){t.displayObject.cacheAsBitmap=!1,this.$pool.recycle(t.resourceURL,t)},P.prototype.addChildAt=function(t,e){if(void 0===e&&(e=0),u.prototype.addChildAt.call(this,t,e),t instanceof O.GButton){var i=t;i.selected=!1,i.changeStateOnClick=!1}return t.click(this.$clickItem,this),t},P.prototype.addItem=function(t){return void 0===t&&(t=null),t||(t=this.$defaultItem),this.addChild(O.UIPackage.createObjectFromURL(t))},P.prototype.addItemFromPool=function(t){return void 0===t&&(t=null),this.addChild(this.getFromPool(t))},P.prototype.removeChildAt=function(t,e){if(void 0===e&&(e=!1),0<=t&&t<this.numChildren){var i=this.$children[t];return i.parent=null,0!=i.sortingOrder&&this.$sortingChildCount--,this.$children.splice(t,1),i.inContainer&&(this.$container.removeChild(i.displayObject),2==this.$childrenRenderOrder&&O.GTimer.inst.callLater(this.appendChildrenList,this)),!0===e&&i.dispose(),this.setBoundsChangedFlag(),i.removeClick(this.$clickItem,this),i}throw new Error("Invalid child index")},P.prototype.removeChildToPoolAt=function(t){void 0===t&&(t=0);var e=u.prototype.removeChildAt.call(this,t);this.returnToPool(e)},P.prototype.removeChildToPool=function(t){u.prototype.removeChild.call(this,t),this.returnToPool(t)},P.prototype.removeChildrenToPool=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),(e<0||e>=this.$children.length)&&(e=this.$children.length-1);for(var i=t;i<=e;++i)this.removeChildToPoolAt(t)},Object.defineProperty(P.prototype,"selectedIndex",{get:function(){for(var t=this.$children.length,e=0;e<t;e++){var i=this.$children[e];if(null!=i&&i.selected)return this.childIndexToItemIndex(e)}return-1},set:function(t){this.clearSelection(),0<=t&&t<this.numItems&&this.addSelection(t)},enumerable:!0,configurable:!0}),P.prototype.getSelection=function(){var i=this,n=[];return this.$children.forEach(function(t,e){null!=t&&t.selected&&n.push(i.childIndexToItemIndex(e))},this),n},P.prototype.addSelection=function(t,e){if(void 0===e&&(e=!1),3!=this.$selectionMode&&(this.checkVirtualList(),0==this.$selectionMode&&this.clearSelection(),e&&this.scrollToView(t),!((t=this.itemIndexToChildIndex(t))<0||t>=this.$children.length))){var i=this.getChildAt(t);null==i||i.selected||(i.selected=!0,this.updateSelectionController(t))}},P.prototype.removeSelection=function(t){if(void 0===t&&(t=0),3!=this.$selectionMode&&!((t=this.itemIndexToChildIndex(t))>=this.$children.length)){var e=this.getChildAt(t);null!=e&&e.selected&&(e.selected=!1)}},P.prototype.clearSelection=function(){this.$children.forEach(function(t){null!=t&&(t.selected=!1)},this)},P.prototype.selectAll=function(){this.checkVirtualList();var i=-1;this.$children.forEach(function(t,e){t&&(t.selected=!0,i=e)},this),-1!=i&&this.updateSelectionController(i)},P.prototype.selectNone=function(){this.$children.forEach(function(t){t&&t instanceof O.GButton&&(t.selected=!1)},this)},P.prototype.selectReverse=function(){this.checkVirtualList();var i=-1;this.$children.forEach(function(t,e){t&&t instanceof O.GButton&&(t.selected=!t.selected,t.selected&&(i=e))},this),-1!=i&&this.updateSelectionController(i)},P.prototype.handleArrowKey=function(t){void 0===t&&(t=0);var e,i,n,s,r,o=this.selectedIndex;if(-1!=o)switch(t){case 1:if(0==this.$layout||3==this.$layout)0<=--o&&(this.clearSelection(),this.addSelection(o,!0));else if(2==this.$layout||4==this.$layout){i=this.$children[o],s=0;for(var h=o-1;0<=h;h--){if((e=this.$children[h]).y!=i.y){i=e;break}s++}for(;0<=n;n--)if((e=this.$children[n]).y!=i.y){this.clearSelection(),this.addSelection(n+s+1,!0);break}}break;case 3:if(1==this.$layout||2==this.$layout||4==this.$layout)++o<this.$children.length&&(this.clearSelection(),this.addSelection(o,!0));else if(3==this.$layout){for(i=this.$children[o],s=0,r=this.$children.length,n=o+1;n<r;n++){if((e=this.$children[n]).x!=i.x){i=e;break}s++}for(;n<r;n++)if((e=this.$children[n]).x!=i.x){this.clearSelection(),this.addSelection(n-s-1,!0);break}}break;case 5:if(0==this.$layout||3==this.$layout)++o<this.$children.length&&(this.clearSelection(),this.addSelection(o,!0));else if(2==this.$layout||4==this.$layout){for(i=this.$children[o],s=0,r=this.$children.length,n=o+1;n<r;n++){if((e=this.$children[n]).y!=i.y){i=e;break}s++}for(;n<r;n++)if((e=this.$children[n]).y!=i.y){this.clearSelection(),this.addSelection(n-s-1,!0);break}}break;case 7:if(1==this.$layout||2==this.$layout||4==this.$layout)0<=--o&&(this.clearSelection(),this.addSelection(o,!0));else if(3==this.$layout){for(i=this.$children[o],s=0,n=o-1;0<=n;n--){if((e=this.$children[n]).x!=i.x){i=e;break}s++}for(;0<=n;n--)if((e=this.$children[n]).x!=i.x){this.clearSelection(),this.addSelection(n+s+1,!0);break}}}},P.prototype.$clickItem=function(t){if(null==this.$scrollPane||!this.$scrollPane.$isDragged){var e=O.GObject.castFromNativeObject(t.currentTarget);e&&(this.setSelectionOnEvent(e),this.$scrollPane&&this.scrollItemToViewOnClick&&this.$scrollPane.scrollToView(e,!0),this.emit("__itemClick",t,e))}},P.prototype.setSelectionOnEvent=function(t){if(t instanceof O.GButton&&3!=this.$selectionMode){var e=this.getChildIndex(t);0==this.$selectionMode?t.selected||(this.clearSelectionExcept(t),t.selected=!0):t.selected?this.clearSelectionExcept(t):(this.clearSelectionExcept(t),t.selected=!0),t.selected&&this.updateSelectionController(e)}},P.prototype.clearSelectionExcept=function(t){this.$children.forEach(function(t){t&&t instanceof O.GButton&&t.selected&&(t.selected=!1)},this)},P.prototype.resizeToFit=function(t,e){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=0),this.ensureBoundsCorrect();var i=this.numItems;if(i<t&&(t=i),this.$virtual){var n=Math.ceil(t/this.$curLineItemCount);0==this.$layout||2==this.$layout?this.viewHeight=n*this.$itemSize.y+Math.max(0,n-1)*this.$lineGap:this.viewWidth=n*this.$itemSize.x+Math.max(0,n-1)*this.$columnGap}else if(0==t)0==this.$layout||2==this.$layout?this.viewHeight=e:this.viewWidth=e;else{for(var s=t-1,r=null;0<=s&&(r=this.getChildAt(s),this.foldInvisibleItems&&!r.visible);)s--;if(s<0)0==this.$layout||2==this.$layout?this.viewHeight=e:this.viewWidth=e;else{var o=0;0==this.$layout||2==this.$layout?((o=r.y+r.height)<e&&(o=e),this.viewHeight=o):((o=r.x+r.width)<e&&(o=e),this.viewWidth=o)}}},P.prototype.getMaxItemWidth=function(){var e=0;return this.$children.forEach(function(t){t&&t.width>e&&(e=t.width)},this),e},P.prototype.handleSizeChanged=function(){u.prototype.handleSizeChanged.call(this),this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0)},P.prototype.handleControllerChanged=function(t){u.prototype.handleControllerChanged.call(this,t),this.$selectionController==t&&(this.selectedIndex=t.selectedIndex)},P.prototype.updateSelectionController=function(t){if(null!=this.$selectionController&&!this.$selectionController.$updating&&t<this.$selectionController.pageCount){var e=this.$selectionController;this.$selectionController=null,e.selectedIndex=t,this.$selectionController=e}},P.prototype.getSnappingPosition=function(t,e,i){if(this.$virtual){i||(i=new PIXI.Point);var n=void 0,s=void 0;return 0==this.$layout||2==this.$layout?(P.posHelper=n=e,s=this.getIndexOnPos1(!1),e=P.posHelper,s<this.$virtualItems.length&&n-e>this.$virtualItems[s].height/2&&s<this.$realNumItems&&(e+=this.$virtualItems[s].height+this.$lineGap)):(1==this.$layout||3==this.$layout?(P.posHelper=n=t,s=this.getIndexOnPos2(!1)):(P.posHelper=n=t,s=this.getIndexOnPos3(!1)),t=P.posHelper,s<this.$virtualItems.length&&n-t>this.$virtualItems[s].width/2&&s<this.$realNumItems&&(t+=this.$virtualItems[s].width+this.$columnGap)),i.x=t,i.y=e,i}return u.prototype.getSnappingPosition.call(this,t,e,i)},P.prototype.scrollToView=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),this.$virtual){if(0==this.$numItems)return;if(this.checkVirtualList(),t>=this.$virtualItems.length)throw new Error("Invalid child index: "+t+" is larger than max length: "+this.$virtualItems.length);this.$loop&&(t=Math.floor(this.$firstIndex/this.$numItems)*this.$numItems+t);var n=void 0,s=this.$virtualItems[t],r=0,o=void 0;if(0==this.$layout||2==this.$layout){for(o=0;o<t;o+=this.$curLineItemCount)r+=this.$virtualItems[o].height+this.$lineGap;n=new PIXI.Rectangle(0,r,this.$itemSize.x,s.height)}else if(1==this.$layout||3==this.$layout){for(o=0;o<t;o+=this.$curLineItemCount)r+=this.$virtualItems[o].width+this.$columnGap;n=new PIXI.Rectangle(r,0,s.width,this.$itemSize.y)}else{var h=t/(this.$curLineItemCount*this.$curLineItemCount2);n=new PIXI.Rectangle(h*this.viewWidth+t%this.$curLineItemCount*(s.width+this.$columnGap),t/this.$curLineItemCount%this.$curLineItemCount2*(s.height+this.$lineGap),s.width,s.height)}i=!0,null!=this.$scrollPane&&this.$scrollPane.scrollToView(n,e,i)}else{var a=this.getChildAt(t);null!=a&&(null!=this.$scrollPane?this.$scrollPane.scrollToView(a,e,i):null!=this.parent&&null!=this.parent.scrollPane&&this.parent.scrollPane.scrollToView(a,e,i))}},P.prototype.getFirstChildInView=function(){return this.childIndexToItemIndex(u.prototype.getFirstChildInView.call(this))},P.prototype.childIndexToItemIndex=function(t){if(!this.$virtual)return t;if(4==this.$layout){for(var e=this.$firstIndex;e<this.$realNumItems;e++)if(null!=this.$virtualItems[e].obj&&--t<0)return e;return t}return t+=this.$firstIndex,this.$loop&&0<this.$numItems&&(t%=this.$numItems),t},P.prototype.itemIndexToChildIndex=function(t){if(!this.$virtual)return t;if(4==this.$layout)return this.getChildIndex(this.$virtualItems[t].obj);if(this.$loop&&0<this.$numItems){var e=this.$firstIndex%this.$numItems;t=e<=t?this.$firstIndex+(t-e):this.$firstIndex+this.$numItems+(e-t)}else t-=this.$firstIndex;return t},P.prototype.setVirtual=function(){this.$setVirtual(!1)},P.prototype.setVirtualAndLoop=function(){this.$setVirtual(!0)},P.prototype.$setVirtual=function(t){if(!this.$virtual){if(null==this.$scrollPane)throw new Error("Virtual list must be scrollable");if(t){if(2==this.$layout||3==this.$layout)throw new Error("Virtual list with loop mode is not supported for both FlowHorizontal and FlowVertical layout");this.$scrollPane.bouncebackEffect=!1}if(this.$virtual=!0,this.$loop=t,this.$virtualItems=[],this.removeChildrenToPool(),null==this.$itemSize){this.$itemSize=new PIXI.Point;var e=this.getFromPool(null);if(null==e)throw new Error("Virtual list must have a default list item resource specified.");this.$itemSize.x=e.width,this.$itemSize.y=e.height,this.returnToPool(e)}0==this.$layout||2==this.$layout?this.$scrollPane.scrollSpeed=this.$itemSize.y:this.$scrollPane.scrollSpeed=this.$itemSize.x,this.$scrollPane.on("__scroll",this.$scrolled,this),this.setVirtualListChangedFlag(!0)}},Object.defineProperty(P.prototype,"numItems",{get:function(){return this.$virtual?this.$numItems:this.$children.length},set:function(t){if(this.$virtual){if(null==this.itemRenderer)throw new Error("list.itemRenderer is required");this.$numItems=t,this.$loop?this.$realNumItems=5*this.$numItems:this.$realNumItems=this.$numItems;var e=this.$virtualItems.length;if(this.$realNumItems>e)for(var i=e;i<this.$realNumItems;i++){var n=new r;n.width=this.$itemSize.x,n.height=this.$itemSize.y,this.$virtualItems.push(n)}0!=this.$virtualListChanged&&O.GTimer.inst.remove(this._refreshVirtualList,this),this._refreshVirtualList()}else{var s=this.$children.length;if(s<t)for(i=s;i<t;i++)null==this.itemProvider?this.addItemFromPool():this.addItemFromPool(this.itemProvider(i));else this.removeChildrenToPool(t,s);if(null!=this.itemRenderer)for(i=0;i<t;i++)this.itemRenderer(i,this.getChildAt(i))}},enumerable:!0,configurable:!0}),P.prototype.refreshVirtualList=function(){this.setVirtualListChangedFlag(!1)},P.prototype.checkVirtualList=function(){0!=this.$virtualListChanged&&(this._refreshVirtualList(),O.GTimer.inst.remove(this._refreshVirtualList,this))},P.prototype.setVirtualListChangedFlag=function(t){void 0===t&&(t=!1),t?this.$virtualListChanged=2:0==this.$virtualListChanged&&(this.$virtualListChanged=1),O.GTimer.inst.callLater(this._refreshVirtualList,this)},P.prototype._refreshVirtualList=function(){var t=2==this.$virtualListChanged;this.$virtualListChanged=0,this.$eventLocked=!0,t&&(0==this.$layout||1==this.$layout?this.$curLineItemCount=1:2==this.$layout?0<this.$columnCount?this.$curLineItemCount=this.$columnCount:(this.$curLineItemCount=Math.floor((this.$scrollPane.viewWidth+this.$columnGap)/(this.$itemSize.x+this.$columnGap)),this.$curLineItemCount<=0&&(this.$curLineItemCount=1)):3==this.$layout?0<this.$lineCount?this.$curLineItemCount=this.$lineCount:(this.$curLineItemCount=Math.floor((this.$scrollPane.viewHeight+this.$lineGap)/(this.$itemSize.y+this.$lineGap)),this.$curLineItemCount<=0&&(this.$curLineItemCount=1)):(0<this.$columnCount?this.$curLineItemCount=this.$columnCount:(this.$curLineItemCount=Math.floor((this.$scrollPane.viewWidth+this.$columnGap)/(this.$itemSize.x+this.$columnGap)),this.$curLineItemCount<=0&&(this.$curLineItemCount=1)),0<this.$lineCount?this.$curLineItemCount2=this.$lineCount:(this.$curLineItemCount2=Math.floor((this.$scrollPane.viewHeight+this.$lineGap)/(this.$itemSize.y+this.$lineGap)),this.$curLineItemCount2<=0&&(this.$curLineItemCount2=1))));var e=0,i=0;if(0<this.$realNumItems){var n=void 0,s=Math.ceil(this.$realNumItems/this.$curLineItemCount)*this.$curLineItemCount,r=Math.min(this.$curLineItemCount,this.$realNumItems);if(0==this.$layout||2==this.$layout){for(n=0;n<s;n+=this.$curLineItemCount)e+=this.$virtualItems[n].height+this.$lineGap;if(0<e&&(e-=this.$lineGap),this.$autoResizeItem)i=this.$scrollPane.viewWidth;else{for(n=0;n<r;n++)i+=this.$virtualItems[n].width+this.$columnGap;0<i&&(i-=this.$columnGap)}}else if(1==this.$layout||3==this.$layout){for(n=0;n<s;n+=this.$curLineItemCount)i+=this.$virtualItems[n].width+this.$columnGap;if(0<i&&(i-=this.$columnGap),this.$autoResizeItem)e=this.scrollPane.viewHeight;else{for(n=0;n<r;n++)e+=this.$virtualItems[n].height+this.$lineGap;0<e&&(e-=this.$lineGap)}}else{i=Math.ceil(s/(this.$curLineItemCount*this.$curLineItemCount2))*this.viewWidth,e=this.viewHeight}}this.handleAlign(i,e),this.$scrollPane.setContentSize(i,e),this.$eventLocked=!1,this.handleScroll(!0)},P.prototype.$scrolled=function(t){this.handleScroll(!1)},P.prototype.getIndexOnPos1=function(t){if(this.$realNumItems<this.$curLineItemCount)return P.posHelper=0;var e,i,n;if(0<this.numChildren&&!t){if(i=this.getChildAt(0).y,P.posHelper<i){for(e=this.$firstIndex-this.$curLineItemCount;0<=e;e-=this.$curLineItemCount)if((i-=this.$virtualItems[e].height+this.$lineGap)<=P.posHelper)return P.posHelper=i,e;return P.posHelper=0}for(e=this.$firstIndex;e<this.$realNumItems;e+=this.$curLineItemCount){if(n=i+this.$virtualItems[e].height+this.$lineGap,P.posHelper<n)return P.posHelper=i,e;i=n}return P.posHelper=i,this.$realNumItems-this.$curLineItemCount}for(e=i=0;e<this.$realNumItems;e+=this.$curLineItemCount){if(n=i+this.$virtualItems[e].height+this.$lineGap,P.posHelper<n)return P.posHelper=i,e;i=n}return P.posHelper=i,this.$realNumItems-this.$curLineItemCount},P.prototype.getIndexOnPos2=function(t){if(this.$realNumItems<this.$curLineItemCount)return P.posHelper=0;var e,i,n;if(0<this.numChildren&&!t){if(i=this.getChildAt(0).x,P.posHelper<i){for(e=this.$firstIndex-this.$curLineItemCount;0<=e;e-=this.$curLineItemCount)if((i-=this.$virtualItems[e].width+this.$columnGap)<=P.posHelper)return P.posHelper=i,e;return P.posHelper=0}for(e=this.$firstIndex;e<this.$realNumItems;e+=this.$curLineItemCount){if(n=i+this.$virtualItems[e].width+this.$columnGap,P.posHelper<n)return P.posHelper=i,e;i=n}return P.posHelper=i,this.$realNumItems-this.$curLineItemCount}for(e=i=0;e<this.$realNumItems;e+=this.$curLineItemCount){if(n=i+this.$virtualItems[e].width+this.$columnGap,P.posHelper<n)return P.posHelper=i,e;i=n}return P.posHelper=i,this.$realNumItems-this.$curLineItemCount},P.prototype.getIndexOnPos3=function(t){if(this.$realNumItems<this.$curLineItemCount)return P.posHelper=0;var e,i,n=this.viewWidth,s=Math.floor(P.posHelper/n),r=s*(this.$curLineItemCount*this.$curLineItemCount2),o=s*n;for(i=0;i<this.$curLineItemCount;i++){if(e=o+this.$virtualItems[r+i].width+this.$columnGap,P.posHelper<e)return P.posHelper=o,r+i;o=e}return P.posHelper=o,r+this.$curLineItemCount-1},P.prototype.handleScroll=function(t){var e,i;this.$eventLocked||(0==this.$layout||2==this.$layout?(this.$loop&&(e=this.$scrollPane.scrollingPosY,i=this.$numItems*(this.$itemSize.y+this.$lineGap),0==e?this.$scrollPane.posY=i:e==this.$scrollPane.contentHeight-this.$scrollPane.viewHeight&&(this.$scrollPane.posY=this.$scrollPane.contentHeight-i-this.viewHeight)),this.handleScroll1(t)):1==this.$layout||3==this.$layout?(this.$loop&&(e=this.$scrollPane.scrollingPosX,i=this.$numItems*(this.$itemSize.x+this.$columnGap),0==e?this.$scrollPane.posX=i:e==this.$scrollPane.contentWidth-this.$scrollPane.viewWidth&&(this.$scrollPane.posX=this.$scrollPane.contentWidth-i-this.viewWidth)),this.handleScroll2(t)):(this.$loop&&(e=this.$scrollPane.scrollingPosX,i=Math.floor(this.$numItems/(this.$curLineItemCount*this.$curLineItemCount2))*this.viewWidth,0==e?this.$scrollPane.posX=i:e==this.$scrollPane.contentWidth-this.$scrollPane.viewWidth&&(this.$scrollPane.posX=this.$scrollPane.contentWidth-i-this.viewWidth)),this.handleScroll3(t)),this.$boundsChanged=!1)},P.prototype.handleScroll1=function(t){if(!(3<++P.scrollEnterCounter)){var e=this.$scrollPane.scrollingPosY,i=e+this.$scrollPane.viewHeight,n=i==this.$scrollPane.contentHeight;P.posHelper=e;var s=this.getIndexOnPos1(t);if(e=P.posHelper,s!=this.$firstIndex||t){var r,o,h,a,l,c=this.$firstIndex,u=this.$firstIndex=s,p=s<c,$=this.numChildren,d=c+$-1,f=p?d:c,g=0,y=e,m=0,b=0,v=this.defaultItem,w=(this.$scrollPane.viewWidth-this.$columnGap*(this.$curLineItemCount-1))/this.$curLineItemCount;for(P.posHelper++;u<this.$realNumItems&&(n||y<i);){if((null==(o=this.$virtualItems[u]).obj||t)&&(null!=this.itemProvider&&(null==(v=this.itemProvider(u%this.$numItems))&&(v=this.$defaultItem),v=O.UIPackage.normalizeURL(v)),null!=o.obj&&o.obj.resourceURL!=v&&(this.removeChildToPool(o.obj),o.obj=null)),null==o.obj){if(p){for(l=f;c<=l;l--)if(null!=(h=this.$virtualItems[l]).obj&&h.updateFlag!=P.itemInfoReuseFlag&&h.obj.resourceURL==v){o.obj=h.obj,h.obj=null,l==f&&f--;break}}else for(l=f;l<=d;l++)if(null!=(h=this.$virtualItems[l]).obj&&h.updateFlag!=P.itemInfoReuseFlag&&h.obj.resourceURL==v){o.obj=h.obj,h.obj=null,l==f&&f++;break}null!=o.obj?this.setChildIndex(o.obj,p?u-s:this.numChildren):(o.obj=this.$pool.get(v),p?this.addChildAt(o.obj,u-s):this.addChild(o.obj)),o.obj instanceof O.GButton&&(o.obj.selected=!1),r=!0}else r=t;r&&(this.$autoResizeItem&&(0==this.$layout||0<this.$columnCount)&&o.obj.setSize(w,o.obj.height,!0),this.itemRenderer(u%this.$numItems,o.obj),u%this.$curLineItemCount==0&&(m+=Math.ceil(o.obj.height)-o.height,u==s&&s<c&&(b=Math.ceil(o.obj.height)-o.height)),o.width=Math.ceil(o.obj.width),o.height=Math.ceil(o.obj.height)),o.updateFlag=P.itemInfoReuseFlag,o.obj.setXY(g,y),u==s&&(i+=o.height),g+=o.width+this.$columnGap,u%this.$curLineItemCount==this.$curLineItemCount-1&&(g=0,y+=o.height+this.$lineGap),u++}for(a=0;a<$;a++)(o=this.$virtualItems[c+a]).updateFlag!=P.itemInfoReuseFlag&&null!=o.obj&&(this.removeChildToPool(o.obj),o.obj=null);0==m&&0==b||this.$scrollPane.changeContentSizeOnScrolling(0,m,0,b),0<u&&0<this.numChildren&&this.$container.y<0&&this.getChildAt(0).y>-this.$container.y&&this.handleScroll1(!1),P.scrollEnterCounter--}else P.scrollEnterCounter--}},P.prototype.handleScroll2=function(t){if(!(3<++P.scrollEnterCounter)){var e=this.$scrollPane.scrollingPosX,i=e+this.$scrollPane.viewWidth,n=e==this.$scrollPane.contentWidth;P.posHelper=e;var s=this.getIndexOnPos2(t);if(e=P.posHelper,s!=this.$firstIndex||t){var r,o,h,a,l,c=this.$firstIndex,u=this.$firstIndex=s,p=s<c,$=this.numChildren,d=c+$-1,f=p?d:c,g=e,y=0,m=0,b=0,v=this.defaultItem,w=(this.$scrollPane.viewHeight-this.$lineGap*(this.$curLineItemCount-1))/this.$curLineItemCount;for(P.itemInfoReuseFlag++;u<this.$realNumItems&&(n||g<i);){if((null==(o=this.$virtualItems[u]).obj||t)&&(null!=this.itemProvider&&(null==(v=this.itemProvider(u%this.$numItems))&&(v=this.$defaultItem),v=O.UIPackage.normalizeURL(v)),null!=o.obj&&o.obj.resourceURL!=v&&(this.removeChildToPool(o.obj),o.obj=null)),null==o.obj){if(p){for(l=f;c<=l;l--)if(null!=(h=this.$virtualItems[l]).obj&&h.updateFlag!=P.itemInfoReuseFlag&&h.obj.resourceURL==v){o.obj=h.obj,h.obj=null,l==f&&f--;break}}else for(l=f;l<=d;l++)if(null!=(h=this.$virtualItems[l]).obj&&h.updateFlag!=P.itemInfoReuseFlag&&h.obj.resourceURL==v){o.obj=h.obj,h.obj=null,l==f&&f++;break}null!=o.obj?this.setChildIndex(o.obj,p?u-s:this.numChildren):(o.obj=this.$pool.get(v),p?this.addChildAt(o.obj,u-s):this.addChild(o.obj)),o.obj instanceof O.GButton&&(o.obj.selected=!1),r=!0}else r=t;r&&(this.$autoResizeItem&&(1==this.$layout||0<this.$lineCount)&&o.obj.setSize(o.obj.width,w,!0),this.itemRenderer(u%this.$numItems,o.obj),u%this.$curLineItemCount==0&&(m+=Math.ceil(o.obj.width)-o.width,u==s&&s<c&&(b=Math.ceil(o.obj.width)-o.width)),o.width=Math.ceil(o.obj.width),o.height=Math.ceil(o.obj.height)),o.updateFlag=P.itemInfoReuseFlag,o.obj.setXY(g,y),u==s&&(i+=o.width),y+=o.height+this.$lineGap,u%this.$curLineItemCount==this.$curLineItemCount-1&&(y=0,g+=o.width+this.$columnGap),u++}for(a=0;a<$;a++)(o=this.$virtualItems[c+a]).updateFlag!=P.itemInfoReuseFlag&&null!=o.obj&&(this.removeChildToPool(o.obj),o.obj=null);0==m&&0==b||this.$scrollPane.changeContentSizeOnScrolling(m,0,b,0),0<u&&0<this.numChildren&&this.$container.x<0&&this.getChildAt(0).x>-this.$container.x&&this.handleScroll2(!1),P.scrollEnterCounter--}else P.scrollEnterCounter--}},P.prototype.handleScroll3=function(t){var e=this.$scrollPane.scrollingPosX;P.posHelper=e;var i=this.getIndexOnPos3(t);if(e=P.posHelper,i!=this.$firstIndex||t){var n=this.$firstIndex;this.$firstIndex=i;var s,r,o,h,a,l=n,c=this.$virtualItems.length,u=this.$curLineItemCount*this.$curLineItemCount2,p=i%this.$curLineItemCount,$=this.viewWidth,d=Math.floor(i/u)*u,f=d+2*u,g=this.$defaultItem,y=(this.$scrollPane.viewWidth-this.$columnGap*(this.$curLineItemCount-1))/this.$curLineItemCount,m=(this.$scrollPane.viewHeight-this.$lineGap*(this.$curLineItemCount2-1))/this.$curLineItemCount2;for(P.itemInfoReuseFlag++,r=d;r<f;r++)if(!(r>=this.$realNumItems)){if(a=r%this.$curLineItemCount,r-d<u){if(a<p)continue}else if(p<a)continue;(o=this.$virtualItems[r]).updateFlag=P.itemInfoReuseFlag}var b=null,v=0;for(r=d;r<f;r++)if(!(r>=this.$realNumItems)&&(o=this.$virtualItems[r]).updateFlag==P.itemInfoReuseFlag){if(null==o.obj){for(;l<c;){if(null!=(h=this.$virtualItems[l]).obj&&h.updateFlag!=P.itemInfoReuseFlag){o.obj=h.obj,h.obj=null;break}l++}-1==v&&(v=this.getChildIndex(b)+1),null==o.obj?(null!=this.itemProvider&&(null==(g=this.itemProvider(r%this.$numItems))&&(g=this.$defaultItem),g=O.UIPackage.normalizeURL(g)),o.obj=this.$pool.get(g),this.addChildAt(o.obj,v)):v=this.setChildIndexBefore(o.obj,v),v++,o.obj instanceof O.GButton&&(o.obj.selected=!1),s=!0}else s=t,v=-1,b=o.obj;s&&(this.$autoResizeItem&&(this.$curLineItemCount==this.$columnCount&&this.$curLineItemCount2==this.$lineCount?o.obj.setSize(y,m,!0):this.$curLineItemCount==this.$columnCount?o.obj.setSize(y,o.obj.height,!0):this.$curLineItemCount2==this.$lineCount&&o.obj.setSize(o.obj.width,m,!0)),this.itemRenderer(r%this.$numItems,o.obj),o.width=Math.ceil(o.obj.width),o.height=Math.ceil(o.obj.height))}var w=d/u*$,I=w,x=0,C=0;for(r=d;r<f;r++)r>=this.$realNumItems||((o=this.$virtualItems[r]).updateFlag==P.itemInfoReuseFlag&&o.obj.setXY(I,x),o.height>C&&(C=o.height),r%this.$curLineItemCount==this.$curLineItemCount-1?(I=w,x+=C+this.$lineGap,C=0,r==d+u-1&&(I=w+=$,x=0)):I+=o.width+this.$columnGap);for(r=l;r<c;r++)(o=this.$virtualItems[r]).updateFlag!=P.itemInfoReuseFlag&&null!=o.obj&&(this.removeChildToPool(o.obj),o.obj=null)}},P.prototype.handleAlign=function(t,e){var i=0,n=0;e<this.viewHeight&&(1==this.$verticalAlign?n=Math.floor((this.viewHeight-e)/2):2==this.$verticalAlign&&(n=this.viewHeight-e)),t<this.viewWidth&&("center"==this.$align?i=Math.floor((this.viewWidth-t)/2):"right"==this.$align&&(i=this.viewWidth-t)),i==this.$alignOffset.x&&n==this.$alignOffset.y||(this.$alignOffset.set(i,n),null!=this.$scrollPane?this.$scrollPane.adjustMaskContainer():(this.$container.x=this.$margin.left+this.$alignOffset.x,this.$container.y=this.$margin.top+this.$alignOffset.y))},P.prototype.updateBounds=function(){if(!this.$virtual){var t,e,i=0,n=0,s=0,r=0,o=0,h=0,a=0,l=0,c=0,u=this.$children.length,p=this.viewWidth,$=this.viewHeight,d=0,f=0,g=0;if(0==this.$layout){for(t=0;t<u;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=n&&(n+=this.$lineGap),e.y=n,this.$autoResizeItem&&e.setSize(p,e.height,!0),n+=Math.ceil(e.height),e.width>s&&(s=e.width));o=Math.ceil(s),h=n}else if(1==this.$layout){for(t=0;t<u;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=i&&(i+=this.$columnGap),e.x=i,this.$autoResizeItem&&e.setSize(e.width,$,!0),i+=Math.ceil(e.width),e.height>r&&(r=e.height));o=i,h=Math.ceil(r)}else if(2==this.$layout)if(this.$autoResizeItem&&0<this.$columnCount){for(t=0;t<u;t++)if(e=this.getChildAt(t),(!this.foldInvisibleItems||e.visible)&&(d+=e.sourceWidth,++a==this.$columnCount||t==u-1)){for(g=(p-d-(a-1)*this.$columnGap)/d,i=0,a=f;a<=t;a++)e=this.getChildAt(a),this.foldInvisibleItems&&!e.visible||(e.setXY(i,n),a<t?(e.setSize(e.sourceWidth+Math.round(e.sourceWidth*g),e.height,!0),i+=Math.ceil(e.width)+this.$columnGap):e.setSize(p-i,e.height,!0),e.height>r&&(r=e.height));n+=Math.ceil(r)+this.$lineGap,f=t+1,d=a=r=0}h=n+Math.ceil(r),o=p}else{for(t=0;t<u;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=i&&(i+=this.$columnGap),(0!=this.$columnCount&&a>=this.$columnCount||0==this.$columnCount&&i+e.width>p&&0!=r)&&(i=0,n+=Math.ceil(r)+this.$lineGap,a=r=0),e.setXY(i,n),s<(i+=Math.ceil(e.width))&&(s=i),e.height>r&&(r=e.height),a++);h=n+Math.ceil(r),o=Math.ceil(s)}else if(3==this.$layout)if(this.$autoResizeItem&&0<this.$lineCount){for(t=0;t<u;t++)if(e=this.getChildAt(t),(!this.foldInvisibleItems||e.visible)&&(d+=e.sourceHeight,++a==this.$lineCount||t==u-1)){for(g=($-d-(a-1)*this.$lineGap)/d,n=0,a=f;a<=t;a++)e=this.getChildAt(a),this.foldInvisibleItems&&!e.visible||(e.setXY(i,n),a<t?(e.setSize(e.width,e.sourceHeight+Math.round(e.sourceHeight*g),!0),n+=Math.ceil(e.height)+this.$lineGap):e.setSize(e.width,$-n,!0),e.width>s&&(s=e.width));i+=Math.ceil(s)+this.$columnGap,f=t+1,d=a=s=0}o=i+Math.ceil(s),h=$}else{for(t=0;t<u;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=n&&(n+=this.$lineGap),(0!=this.$lineCount&&a>=this.$lineCount||0==this.$lineCount&&n+e.height>$&&0!=s)&&(n=0,i+=Math.ceil(s)+this.$columnGap,a=s=0),e.setXY(i,n),r<(n+=Math.ceil(e.height))&&(r=n),e.width>s&&(s=e.width),a++);o=i+Math.ceil(s),h=Math.ceil(r)}else{var y=void 0;if(this.$autoResizeItem&&0<this.$lineCount&&(y=Math.floor(($-(this.$lineCount-1)*this.$lineGap)/this.$lineCount)),this.$autoResizeItem&&0<this.$columnCount){for(t=0;t<u;t++)if(e=this.getChildAt(t),(!this.foldInvisibleItems||e.visible)&&(d+=e.sourceWidth,++a==this.$columnCount||t==u-1)){for(g=(p-d-(a-1)*this.$columnGap)/d,i=0,a=f;a<=t;a++)e=this.getChildAt(a),this.foldInvisibleItems&&!e.visible||(e.setXY(l*p+i,n),a<t?(e.setSize(e.sourceWidth+Math.round(e.sourceWidth*g),0<this.$lineCount?y:e.height,!0),i+=Math.ceil(e.width)+this.$columnGap):e.setSize(p-i,0<this.$lineCount?y:e.height,!0),e.height>r&&(r=e.height));n+=Math.ceil(r)+this.$lineGap,f=t+1,c++,((d=a=r=0)!=this.$lineCount&&c>=this.$lineCount||0==this.$lineCount&&n+e.height>$)&&(l++,c=n=0)}}else for(t=0;t<u;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=i&&(i+=this.$columnGap),this.$autoResizeItem&&0<this.$lineCount&&e.setSize(e.width,y,!0),(0!=this.$columnCount&&a>=this.$columnCount||0==this.$columnCount&&i+e.width>p&&0!=r)&&(i=0,n+=Math.ceil(r)+this.$lineGap,c++,((a=r=0)!=this.$lineCount&&c>=this.$lineCount||0==this.$lineCount&&n+e.height>$&&0!=s)&&(l++,c=n=0)),e.setXY(l*p+i,n),s<(i+=Math.ceil(e.width))&&(s=i),e.height>r&&(r=e.height),a++);h=0<l?$:n+Math.ceil(r),o=(l+1)*p}this.handleAlign(o,h),this.setBounds(0,0,o,h)}},P.prototype.setupBeforeAdd=function(t){var n,e,i,s=this;if(u.prototype.setupBeforeAdd.call(this,t),(n=t.attributes.layout)&&(this.$layout=O.ParseListLayoutType(n)),i=(n=t.attributes.overflow)?O.ParseOverflowType(n):0,(n=t.attributes.margin)&&this.$margin.parse(n),(n=t.attributes.align)&&(this.$align=O.ParseAlignType(n)),(n=t.attributes.vAlign)&&(this.$verticalAlign=O.ParseVertAlignType(n)),2==i){var r;r=(n=t.attributes.scroll)?O.ParseScrollType(n):1;var o=void 0;o=(n=t.attributes.scrollBar)?O.ParseScrollBarDisplayType(n):0;var h=void 0;h=(n=t.attributes.scrollBarFlags)?parseInt(n):0;var a=new O.utils.Margin;(n=t.attributes.scrollBarMargin)&&a.parse(n);var l=void 0,c=void 0;(n=t.attributes.scrollBarRes)&&(l=(e=n.split(","))[0],c=e[1]),this.setupScroll(a,r,o,h,l,c)}else this.setupOverflow(i);(n=t.attributes.lineGap)&&(this.$lineGap=parseInt(n)),(n=t.attributes.colGap)&&(this.$columnGap=parseInt(n)),(n=t.attributes.lineItemCount)&&(2==this.$layout||4==this.$layout?this.$columnCount=parseInt(n):3==this.$layout&&(this.$lineCount=parseInt(n))),(n=t.attributes.lineItemCount2)&&(this.$lineCount=parseInt(n)),(n=t.attributes.selectionMode)&&(this.$selectionMode=O.ParseListSelectionMode(n)),(n=t.attributes.defaultItem)&&(this.$defaultItem=n),n=t.attributes.autoItemSize,1==this.$layout||0==this.$layout?this.$autoResizeItem="false"!=n:this.$autoResizeItem="true"==n,(n=t.attributes.renderOrder)&&(this.$childrenRenderOrder=O.ParseListChildrenRenderOrder(n),2==this.$childrenRenderOrder&&(n=t.attributes.apex)&&(this.$apexIndex=parseInt(n))),t.children.forEach(function(t){if("item"==t.nodeName){var e=t.attributes.url;if(e||(e=s.$defaultItem),e){var i=s.getFromPool(e);null!=i&&(s.addChild(i),(n=t.attributes.title)&&(i.text=n),(n=t.attributes.icon)&&(i.icon=n),(n=t.attributes.name)&&(i.name=n))}}},this)},P.prototype.setupAfterAdd=function(t){var e;u.prototype.setupAfterAdd.call(this,t),(e=t.attributes.selectionController)&&(this.$selectionController=this.parent.getController(e))},P.itemInfoReuseFlag=0,P.scrollEnterCounter=0,P}(O.GComponent);O.GList=t}(fgui||(fgui={})),function(t){var e,i;e=t.utils||(t.utils={}),i=function(){function t(){this.$count=0,this.$pool={}}return Object.defineProperty(t.prototype,"count",{get:function(){return this.$count},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t in this.$pool){var e=this.$pool[t];e&&(e.length=0,e=null)}this.$pool={},this.$count=0},t.prototype.get=function(t){var e=this.$pool[t];return null==e&&(e=[],this.$pool[t]=e),e.length?(this.$count--,e.shift()):this.createObject(t)},t.prototype.recycle=function(t,e){if(t){var i=this.$pool[t];null==i&&(i=[],this.$pool[t]=i),this.$count++,i.push(e)}},t}(),e.Recycler=i}(fgui||(fgui={})),function(e){var t,i;t=e.utils||(e.utils={}),i=function(i){function t(){return i.call(this)||this}return __extends(t,i),t.prototype.clear=function(){for(var t in this.$pool){var e=this.$pool[t];e&&e.forEach(function(t){t.dispose()})}i.prototype.clear.call(this)},t.prototype.createObject=function(t){return e.UIPackage.createObjectFromURL(t)},t}(t.Recycler),t.GObjectRecycler=i}(fgui||(fgui={})),function(n){var t=function(i){function t(){var t=i.call(this)||this;return t.$frame=0,t.$color=0,t.$contentSourceWidth=0,t.$contentSourceHeight=0,t.$contentWidth=0,t.$contentHeight=0,t.$playing=!0,t.$url="",t.$fill=0,t.$align="left",t.$verticalAlign=0,t.$showErrorSign=!0,t.$color=16777215,t}return __extends(t,i),t.prototype.createDisplayObject=function(){this.$container=new n.UIContainer(this),this.$container.hitArea=new PIXI.Rectangle,this.setDisplayObject(this.$container),this.$container.interactiveChildren=!1},t.prototype.dispose=function(){this.clearContent(),i.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"url",{get:function(){return this.$url},set:function(t){this.$url!=t&&(this.$url=t,this.loadContent(),this.updateGear(7))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return this.$url},set:function(t){this.url=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.$align},set:function(t){this.$align!=t&&(this.$align=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$verticalAlign!=t&&(this.$verticalAlign=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this.$fill},set:function(t){this.$fill!=t&&(this.$fill=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSize",{get:function(){return this.$autoSize},set:function(t){this.$autoSize!=t&&(this.$autoSize=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this.$playing},set:function(t){this.$playing!=t&&(this.$playing=t,this.$content instanceof n.MovieClip&&(this.$content.playing=t),this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this.$frame},set:function(t){this.$frame!=t&&(this.$frame=t,this.$content instanceof n.MovieClip&&(this.$content.currentFrame=t),this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.$color},set:function(t){this.$color!=t&&(this.$color=t,this.updateGear(4),this.applyColor())},enumerable:!0,configurable:!0}),t.prototype.applyColor=function(){this.$content&&(this.$content.tint=this.$color)},Object.defineProperty(t.prototype,"showErrorSign",{get:function(){return this.$showErrorSign},set:function(t){this.$showErrorSign=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this.$content},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this.$content instanceof n.UIImage?this.$content.texture:null},set:function(t){this.url=null,this.switchToMovieMode(!1),this.$content instanceof n.UIImage&&(this.$content.texture=t),t?(this.$contentSourceWidth=t.orig.width,this.$contentSourceHeight=t.orig.height):this.$contentSourceWidth=this.$contentHeight=0,this.updateLayout()},enumerable:!0,configurable:!0}),t.prototype.loadContent=function(){this.clearContent(),this.$url&&(n.utils.StringUtil.startsWith(this.$url,"ui://")?this.loadFromPackage(this.$url):this.loadExternal())},t.prototype.loadFromPackage=function(t){if(this.$contentItem=n.UIPackage.getItemByURL(t),this.$contentItem)if(this.$contentItem.load(),0==this.$contentItem.type)null==this.$contentItem.texture?this.setErrorState():(this.switchToMovieMode(!1),this.$content.$initDisp(this.$contentItem),this.$contentSourceWidth=this.$contentItem.width,this.$contentSourceHeight=this.$contentItem.height,this.updateLayout());else if(2==this.$contentItem.type){this.switchToMovieMode(!0),this.$contentSourceWidth=this.$contentItem.width,this.$contentSourceHeight=this.$contentItem.height;var e=this.$content;e.interval=this.$contentItem.interval,e.swing=this.$contentItem.swing,e.repeatDelay=this.$contentItem.repeatDelay,e.frames=this.$contentItem.frames,e.boundsRect=new PIXI.Rectangle(0,0,this.$contentSourceWidth,this.$contentSourceHeight),this.updateLayout()}else this.setErrorState();else this.setErrorState()},t.prototype.switchToMovieMode=function(t){this.$container.removeChildren(),t?this.$content instanceof n.MovieClip||(this.$content=new n.MovieClip(this)):this.$content instanceof n.UIImage||(this.$content=new n.UIImage(null)),this.$container.addChild(this.$content)},t.prototype.loadExternal=function(){var t=PIXI.utils.TextureCache[this.$url];t||(t=new PIXI.Texture(PIXI.BaseTexture.fromImage(this.$url)),PIXI.Texture.addToCache(t,this.$url)),this.$loadResCompleted(t)},t.prototype.freeExternal=function(t){PIXI.Texture.removeFromCache(t),t.destroy(!0)},t.prototype.$loadResCompleted=function(t){t?this.onExternalLoadSuccess(t):this.onExternalLoadFailed()},t.prototype.onExternalLoadSuccess=function(t){this.$container.removeChildren(),this.$content&&this.$content instanceof n.UIImage||(this.$content=new n.UIImage(null),this.$content.$initDisp()),this.$container.addChild(this.$content),this.$content.texture=t,this.$contentSourceWidth=t.orig.width,this.$contentSourceHeight=t.orig.height,this.updateLayout()},t.prototype.onExternalLoadFailed=function(){this.setErrorState()},t.prototype.setErrorState=function(){this.$showErrorSign&&(null==this.$errorSign&&n.UIConfig.loaderErrorSign&&(this.$errorSign=t.$errorSignPool.get(n.UIConfig.loaderErrorSign)),this.$errorSign&&(this.$errorSign.width=this.width,this.$errorSign.height=this.height,this.$container.addChild(this.$errorSign.displayObject)))},t.prototype.clearErrorState=function(){this.$errorSign&&(this.$container.removeChild(this.$errorSign.displayObject),t.$errorSignPool.recycle(this.$errorSign.resourceURL,this.$errorSign),this.$errorSign=null)},t.prototype.updateLayout=function(){if(null!=this.$content)if(this.$content.position.set(0,0),this.$content.scale.set(1,1),this.$contentWidth=this.$contentSourceWidth,this.$contentHeight=this.$contentSourceHeight,this.$autoSize)this.$updatingLayout=!0,0==this.$contentWidth&&(this.$contentWidth=50),0==this.$contentHeight&&(this.$contentHeight=30),this.setSize(this.$contentWidth,this.$contentHeight),this.$updatingLayout=!1;else{var t=1,e=1;0!=this.$fill&&(t=this.width/this.$contentSourceWidth,e=this.height/this.$contentSourceHeight,1==t&&1==e||(2==this.$fill?t=e:3==this.$fill?e=t:1==this.$fill&&(e<t?t=e:e=t),this.$contentWidth=this.$contentSourceWidth*t,this.$contentHeight=this.$contentSourceHeight*e)),this.$content instanceof n.UIImage?(this.$content.width=this.$contentWidth,this.$content.height=this.$contentHeight):this.$content.scale.set(t,e),"center"==this.$align?this.$content.x=Math.floor((this.width-this.$contentWidth)/2):"right"==this.$align&&(this.$content.x=this.width-this.$contentWidth),1==this.$verticalAlign?this.$content.y=Math.floor((this.height-this.$contentHeight)/2):2==this.$verticalAlign&&(this.$content.y=this.height-this.$contentHeight)}else this.$autoSize&&(this.$updatingLayout=!0,this.setSize(50,30),this.$updatingLayout=!1)},t.prototype.clearContent=function(){this.clearErrorState(),this.$content&&this.$content.parent&&this.$container.removeChild(this.$content),null==this.$contentItem&&this.$content instanceof n.UIImage&&this.freeExternal(this.$content.texture),this.$content&&this.$content.destroy(),this.$content=null,this.$contentItem=null},t.prototype.handleSizeChanged=function(){this.$updatingLayout||this.updateLayout();var t=this.$container.hitArea;t.x=t.y=0,t.width=this.width,t.height=this.height},t.prototype.setupBeforeAdd=function(t){var e;i.prototype.setupBeforeAdd.call(this,t),(e=t.attributes.url)&&(this.$url=e),(e=t.attributes.align)&&(this.$align=n.ParseAlignType(e)),(e=t.attributes.vAlign)&&(this.$verticalAlign=n.ParseVertAlignType(e)),(e=t.attributes.fill)&&(this.$fill=n.ParseLoaderFillType(e)),this.$autoSize="true"==t.attributes.autoSize,(e=t.attributes.errorSign)&&(this.$showErrorSign="true"==e),this.$playing="false"!=t.attributes.playing,(e=t.attributes.color)&&(this.color=n.utils.StringUtil.convertFromHtmlColor(e)),this.$url&&this.loadContent()},t.$errorSignPool=new n.utils.GObjectRecycler,t}(n.GObject);n.GLoader=t}(fgui||(fgui={})),function(n){var t=function(i){function t(){return i.call(this)||this}return __extends(t,i),t.prototype.mapPivotWidth=function(t){return t*this.$sourceWidth},t.prototype.mapPivotHeight=function(t){return t*this.$sourceHeight},t.prototype.handleSizeChanged=function(){null!=this.$displayObject&&0!=this.$sourceWidth&&0!=this.$sourceHeight&&this.$displayObject.scale.set(this.$width/this.$sourceWidth*this.$scaleX,this.$height/this.$sourceHeight*this.$scaleY)},t.prototype.handleScaleChanged=function(){null!=this.$displayObject&&this.$displayObject.scale.set(this.$width/this.$sourceWidth*this.$scaleX,this.$height/this.$sourceHeight*this.$scaleY)},Object.defineProperty(t.prototype,"touchable",{get:function(){return!1},set:function(t){this.$touchable=!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.$movieClip.tint},set:function(t){this.$movieClip.tint=t},enumerable:!0,configurable:!0}),t.prototype.createDisplayObject=function(){this.$movieClip=new n.MovieClip(this),this.setDisplayObject(this.$movieClip)},Object.defineProperty(t.prototype,"playing",{get:function(){return this.$movieClip.playing},set:function(t){this.$movieClip.playing!=t&&(this.$movieClip.playing=t,this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this.$movieClip.currentFrame},set:function(t){this.$movieClip.currentFrame!=t&&(this.$movieClip.currentFrame=t,this.updateGear(5))},enumerable:!0,configurable:!0}),t.prototype.setPlaySettings=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$movieClip.setPlaySettings.apply(this.$movieClip,t)},t.prototype.constructFromResource=function(){this.$sourceWidth=this.packageItem.width,this.$sourceHeight=this.packageItem.height,this.$initWidth=this.$sourceWidth,this.$initHeight=this.$sourceHeight,this.setSize(this.$sourceWidth,this.$sourceHeight),this.packageItem.load(),this.$movieClip.interval=this.packageItem.interval,this.$movieClip.swing=this.packageItem.swing,this.$movieClip.repeatDelay=this.packageItem.repeatDelay,this.$movieClip.frames=this.packageItem.frames,this.$movieClip.boundsRect=new PIXI.Rectangle(0,0,this.$sourceWidth,this.$sourceHeight)},t.prototype.setupBeforeAdd=function(t){var e;i.prototype.setupBeforeAdd.call(this,t),(e=t.attributes.frame)&&(this.$movieClip.currentFrame=parseInt(e)),e=t.attributes.playing,this.$movieClip.playing="false"!=e,(e=t.attributes.color)&&(this.color=n.utils.StringUtil.convertFromHtmlColor(e))},t}(n.GObject);n.GMovieClip=t}(fgui||(fgui={})),function(s){var t=function(i){function n(){var t=i.call(this)||this;return t.$max=0,t.$value=0,t.$barMaxWidth=0,t.$barMaxHeight=0,t.$barMaxWidthDelta=0,t.$barMaxHeightDelta=0,t.$barStartX=0,t.$barStartY=0,t.$tweenValue=0,t.$titleType=0,t.$value=50,t.$max=100,t}return __extends(n,i),Object.defineProperty(n.prototype,"titleType",{get:function(){return this.$titleType},set:function(t){this.$titleType!=t&&(this.$titleType=t,this.update(this.$value))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"max",{get:function(){return this.$max},set:function(t){this.$max!=t&&(this.$max=t,this.update(this.$value))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.$value},set:function(t){null!=this.$tweener&&(this.$tweener.setPaused(!0),this.$tweener=null),this.$value!=t&&(this.$value=t,this.update(this.$value))},enumerable:!0,configurable:!0}),n.prototype.tweenValue=function(t,e){return this.$value!=t?(this.$tweener&&this.$tweener.setPaused(!0),this.$tweenValue=this.$value,this.$value=t,this.$tweener=createjs.Tween.get(this,{onChange:s.utils.Binder.create(this.onUpdateTween,this)}).to({$tweenValue:t},1e3*e,n.easeLinear),this.$tweener):null},n.prototype.onUpdateTween=function(){this.update(this.$tweenValue)},n.prototype.update=function(t){var e=Math.min(t/this.$max,1);if(this.$titleObject)switch(this.$titleType){case 0:this.$titleObject.text=Math.round(100*e)+"%";break;case 1:this.$titleObject.text=Math.round(t)+"/"+Math.round(this.$max);break;case 2:this.$titleObject.text=""+Math.round(t);break;case 3:this.$titleObject.text=""+Math.round(this.$max)}var i=this.width-this.$barMaxWidthDelta,n=this.height-this.$barMaxHeightDelta;this.$reverse?(this.$barObjectH&&(this.$barObjectH.width=i*e,this.$barObjectH.x=this.$barStartX+(i-this.$barObjectH.width)),this.$barObjectV&&(this.$barObjectV.height=n*e,this.$barObjectV.y=this.$barStartY+(n-this.$barObjectV.height))):(this.$barObjectH&&(this.$barObjectH.width=i*e),this.$barObjectV&&(this.$barObjectV.height=n*e)),this.$aniObject instanceof s.GMovieClip&&(this.$aniObject.frame=Math.round(100*e))},n.prototype.constructFromXML=function(t){var e;i.prototype.constructFromXML.call(this,t),(e=(t=s.utils.XmlParser.getChildNodes(t,"ProgressBar")[0]).attributes.titleType)&&(this.$titleType=s.ParseProgressTitleType(e)),this.$reverse="true"==t.attributes.reverse,this.$titleObject=this.getChild("title"),this.$barObjectH=this.getChild("bar"),this.$barObjectV=this.getChild("bar_v"),this.$aniObject=this.getChild("ani"),this.$barObjectH&&(this.$barMaxWidth=this.$barObjectH.width,this.$barMaxWidthDelta=this.width-this.$barMaxWidth,this.$barStartX=this.$barObjectH.x),this.$barObjectV&&(this.$barMaxHeight=this.$barObjectV.height,this.$barMaxHeightDelta=this.height-this.$barMaxHeight,this.$barStartY=this.$barObjectV.y)},n.prototype.handleSizeChanged=function(){i.prototype.handleSizeChanged.call(this),this.$barObjectH&&(this.$barMaxWidth=this.width-this.$barMaxWidthDelta),this.$barObjectV&&(this.$barMaxHeight=this.height-this.$barMaxHeightDelta),this.$inProgressBuilding||this.update(this.$value)},n.prototype.setupAfterAdd=function(t){i.prototype.setupAfterAdd.call(this,t),(t=s.utils.XmlParser.getChildNodes(t,"ProgressBar")[0])&&(this.$value=parseInt(t.attributes.value)||0,this.$max=parseInt(t.attributes.max)||0),this.update(this.$value)},n.prototype.dispose=function(){this.$tweener&&(this.$tweener.setPaused(!0),this.$tweener.removeAllEventListeners()),createjs.Tween.removeTweens(this),this.$tweener=null,i.prototype.dispose.call(this)},n.easeLinear=s.ParseEaseType("linear"),n}(s.GComponent);s.GProgressBar=t}(fgui||(fgui={})),function(j){var T=function(){function e(){this.width=0,this.height=0,this.textHeight=0,this.y=0}return e.get=function(){if(e.pool.length){var t=e.pool.pop();return t.width=0,t.height=0,t.textHeight=0,t.text=null,t.y=0,t}return new e},e.recycle=function(t){e.pool.push(t)},e.recycleMany=function(t){t&&t.length&&t.forEach(function(t){e.pool.push(t)},this),t.length=0},e.pool=[],e}();j.LineInfo=T;var t=function(s){function S(){var t=s.call(this)||this;return t.$verticalAlign=0,t.$offset=new PIXI.Point,t.$singleLine=!0,t.$text="",t.$textWidth=0,t.$textHeight=0,t.$style=new PIXI.TextStyle({fontSize:12,fontFamily:j.UIConfig.defaultFont,align:"left",leading:3,fill:0}),t.$verticalAlign=0,t.$text="",t.$autoSize=1,t.$widthAutoSize=!0,t.$heightAutoSize=!0,t.$bitmapPool=[],t.touchable=!1,t}return __extends(S,s),S.prototype.createDisplayObject=function(){this.$textField=new j.UITextField(this),this.setDisplayObject(this.$textField)},S.prototype.switchBitmapMode=function(t){t&&this.displayObject==this.$textField?(null==this.$btContainer&&(this.$btContainer=new j.UIContainer(this)),this.switchDisplayObject(this.$btContainer)):t||this.displayObject!=this.$btContainer||this.switchDisplayObject(this.$textField)},S.prototype.dispose=function(){j.GTimer.inst.remove(this.$render,this),this.$bitmapFont=null,this.$bitmapPool.length=0,this.$bitmapPool=null,this.$style=null,s.prototype.dispose.call(this)},Object.defineProperty(S.prototype,"text",{get:function(){return this.getText()},set:function(t){this.setText(t)},enumerable:!0,configurable:!0}),S.prototype.setText=function(t){null==t&&(t=""),this.$text!=t&&(this.$text=t,this.updateGear(6),this.parent&&this.parent.$inProgressBuilding?this.renderNow():this.render())},S.prototype.getText=function(){return this.$text},Object.defineProperty(S.prototype,"color",{get:function(){return this.getColor()},set:function(t){this.setColor(t)},enumerable:!0,configurable:!0}),S.prototype.getColor=function(){return this.$color},S.prototype.setColor=function(t){this.$color!=t&&(this.$color=t,this.updateGear(4),this.$style.fill=this.$color,this.render())},Object.defineProperty(S.prototype,"titleColor",{get:function(){return this.color},set:function(t){this.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"lineHeight",{get:function(){return 0<this.$style.lineHeight?this.$style.lineHeight:this.$fontProperties?this.$fontProperties.fontSize+this.$style.strokeThickness+this.$style.leading:+this.$style.fontSize+this.$style.strokeThickness},set:function(t){this.$style.lineHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"font",{get:function(){return this.$font||j.UIConfig.defaultFont},set:function(t){this.$font!=t&&(this.$font=t,this.$font&&j.utils.StringUtil.startsWith(this.$font,"ui://")?this.$bitmapFont=j.UIPackage.getBitmapFontByURL(this.$font):this.$style.fontFamily=this.$font||j.UIConfig.defaultFont,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"fontSize",{get:function(){return+this.$style.fontSize},set:function(t){t<=0||this.$style.fontSize!=t&&(this.$style.fontSize=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"align",{get:function(){return this.$style.align},set:function(t){this.$style.align!=t&&(this.$style.align=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$verticalAlign!=t&&(this.$verticalAlign=t,this.$inProgressBuilding||this.layoutAlign())},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"leading",{get:function(){return this.$style.leading},set:function(t){this.$style.leading!=t&&(this.$style.leading=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"letterSpacing",{get:function(){return this.$style.letterSpacing},set:function(t){this.$style.letterSpacing!=t&&(this.$style.letterSpacing=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"underline",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"bold",{get:function(){return"bold"==this.$style.fontWeight},set:function(t){var e=!0===t?"bold":"normal";this.$style.fontWeight!=e&&(this.$style.fontWeight=e,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"weight",{get:function(){return this.$style.fontWeight},set:function(t){this.$style.fontWeight!=t&&(this.$style.fontWeight=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"variant",{get:function(){return this.$style.fontVariant},set:function(t){this.$style.fontVariant!=t&&(this.$style.fontVariant=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"italic",{get:function(){return"italic"==this.$style.fontStyle},set:function(t){var e=!0===t?"italic":"normal";this.$style.fontStyle!=e&&(this.$style.fontStyle=e,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"multipleLine",{get:function(){return!this.$singleLine},set:function(t){t=!t,this.$singleLine!=t&&(this.$singleLine=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"stroke",{get:function(){return+this.$style.strokeThickness},set:function(t){this.$style.strokeThickness!=t&&(this.$style.strokeThickness=t)},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"strokeColor",{get:function(){return this.$style.stroke},set:function(t){this.$style.stroke!=t&&(this.$style.stroke=t)},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"autoSize",{get:function(){return this.$autoSize},set:function(t){this.$autoSize!=t&&(this.$autoSize=t,this.$widthAutoSize=1==t||3==t,this.$heightAutoSize=1==t||2==t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"textWidth",{get:function(){return this.$requireRender&&this.renderNow(),this.$textWidth},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"textHeight",{get:function(){return this.$requireRender&&this.renderNow(),this.$textHeight},enumerable:!0,configurable:!0}),S.prototype.ensureSizeCorrect=function(){this.$sizeDirty&&this.$requireRender&&this.renderNow()},S.prototype.render=function(){this.$requireRender||(this.$requireRender=!0,j.GTimer.inst.callLater(this.$render,this)),this.$sizeDirty||!this.$widthAutoSize&&!this.$heightAutoSize||(this.$sizeDirty=!0,this.emit("__sizeDelayChange",this))},S.prototype.applyStyle=function(){this.$textField.style.stroke=this.$style.stroke,this.$textField.style.strokeThickness=this.$style.strokeThickness,this.$textField.style.fontStyle=this.$style.fontStyle,this.$textField.style.fontVariant=this.$style.fontVariant,this.$textField.style.fontWeight=this.$style.fontWeight,this.$textField.style.letterSpacing=this.$style.letterSpacing,this.$textField.style.align=this.$style.align,this.$textField.style.fontSize=this.$style.fontSize,this.$textField.style.fontFamily=this.$style.fontFamily,this.$textField.style.fill=this.$style.fill,this.$textField.style.leading=this.$style.leading},S.prototype.$render=function(){this.$requireRender&&this.renderNow()},S.prototype.renderNow=function(t){if(void 0===t&&(t=!0),this.$requireRender=!1,this.$sizeDirty=!1,null==this.$bitmapFont){this.switchBitmapMode(!1),this.applyStyle(),this.$textField.$updateMinHeight();var e=!this.$widthAutoSize&&this.multipleLine;this.$textField.width=this.$textField.style.wordWrapWidth=e||0==this.autoSize?Math.ceil(this.width):1e4,this.$textField.style.wordWrap=e,this.$textField.style.breakWords=e,this.$textField.text=this.$text,this.$fontProperties=PIXI.TextMetrics.measureFont(this.$style.toFontString()),this.$textWidth=Math.ceil(this.$textField.textWidth),0<this.$textWidth&&(this.$textWidth+=2*S.GUTTER_X),this.$textHeight=Math.ceil(this.$textField.textHeight),0<this.$textHeight&&(this.$textHeight+=2*S.GUTTER_Y);var i=this.width,n=this.height;3==this.autoSize?this.shrinkTextField():(this.$textField.scale.set(1,1),this.$widthAutoSize?(i=this.$textWidth,this.$textField.width=i):(i=this.width,this.$heightAutoSize?(n=this.$textHeight,this.$textField.height!=this.$textHeight&&(this.$textField.height=this.$textHeight)):(n=this.height,this.$textHeight>n&&(this.$textHeight=n)))),t&&(this.$updatingSize=!0,this.setSize(i,n),this.$updatingSize=!1),this.layoutAlign()}else this.renderWithBitmapFont(t)},S.prototype.renderWithBitmapFont=function(t){var h=this;this.switchBitmapMode(!0),this.$btContainer.children.forEach(function(t,e){h.$bitmapPool.push(h.$btContainer.getChildAt(e))},this),this.$btContainer.removeChildren(),this.$lines?T.recycleMany(this.$lines):this.$lines=[];var e,a,l=this.letterSpacing,i=this.leading-1,c=this.width-2*S.GUTTER_X,n=0,s=0,r=0,o=0,u=0,p=0,$=0,d=0,f=0,g="",y=S.GUTTER_Y,m=!this.$widthAutoSize&&this.multipleLine,b=this.$bitmapFont.resizable?this.fontSize/this.$bitmapFont.size:1;this.$textWidth=0,this.$textHeight=0;for(var v=this.text.length,w=0;w<v;++w){var I=this.$text.charAt(w),x=I.charCodeAt(w);if("\n"!=I)if(256<x||x<=32?(0<p&&(d=n),p=0):(0==p&&($=n),p++)," "==I?(o=Math.ceil(this.fontSize/2),u=Math.ceil(this.fontSize)):(a=this.$bitmapFont.glyphs[I])?(o=Math.ceil(a.advance*b),u=Math.ceil(a.lineHeight*b)):" "==I?(o=Math.ceil(this.$bitmapFont.size*b/2),u=Math.ceil(this.$bitmapFont.size*b)):u=o=0,r<u&&(r=u),s<u&&(s=u),0!=n&&(n+=l),n+=o,!m||n<=c)g+=I;else{if((e=T.get()).height=s,e.textHeight=r,0==g.length)e.text=I;else if(0<p&&0<d){var C=(g+=I).length-p;e.text=j.utils.StringUtil.trimRight(g.substr(0,C)),e.width=d,g=g.substr(C+1),n-=$}else e.text=g,e.width=n-(o+l),g=I,n=o,r=s=u;e.y=y,y+=e.height+i,e.width>this.$textWidth&&(this.$textWidth=e.width),d=$=p=0,this.$lines.push(e)}else g+=I,(e=T.get()).width=n,0==r&&(0==f&&(f=Math.ceil(this.fontSize*b)),0==s&&(s=f),r=s),f=e.height=s,e.textHeight=r,e.text=g,e.y=y,y+=e.height+i,e.width>this.$textWidth&&(this.$textWidth=e.width),this.$lines.push(e),g="",d=$=p=r=s=n=0}(0<g.length||0<this.$lines.length&&j.utils.StringUtil.endsWith(this.$lines[this.$lines.length-1].text,"\n"))&&((e=T.get()).width=n,0==s&&(s=f),0==r&&(r=s),e.height=s,e.textHeight=r,e.text=g,e.y=y,e.width>this.$textWidth&&(this.$textWidth=e.width),this.$lines.push(e)),0<this.$textWidth&&(this.$textWidth+=2*S.GUTTER_X),0==this.$lines.length?this.$textHeight=0:(e=this.$lines[this.$lines.length-1],this.$textHeight=e.y+e.height+S.GUTTER_Y);var P,O=0;P=this.$widthAutoSize?0==this.$textWidth?0:this.$textWidth:this.width,O=this.$heightAutoSize?0==this.$textHeight?0:this.$textHeight:this.height,t&&(this.$updatingSize=!0,this.setSize(P,O),this.$updatingSize=!1),0!=P&&0!=O&&(c=this.width-2*S.GUTTER_X,this.$lines.forEach(function(t){var e=S.GUTTER_X,i=0,n=0;i="center"==h.align?(c-t.width)/2:"right"==h.align?c-t.width:0,v=t.text.length;for(var s=0;s<v;s++){var r=t.text.charAt(s);if(null!=(a=h.$bitmapFont.glyphs[r])){n=(t.height+t.textHeight)/2-Math.ceil(a.lineHeight*b);var o=void 0;(o=h.$bitmapPool.length?h.$bitmapPool.pop():new PIXI.Sprite).x=e+i+Math.ceil(a.offsetX*b),o.y=t.y+n+Math.ceil(a.offsetY*b),o.texture=a.texture,o.scale.set(b,b),o.tint=h.$color,h.$btContainer.addChild(o),e+=l+Math.ceil(a.advance*b)}else e+=" "==r?l+Math.ceil(h.$bitmapFont.size*b/2):l}}))},S.prototype.localToGlobal=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),t-=this.$offset.x,e-=this.$offset.y,s.prototype.localToGlobal.call(this,t,e,i)},S.prototype.globalToLocal=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0);var n=s.prototype.globalToLocal.call(this,t,e,i);return n.x-=this.$offset.x,n.y-=this.$offset.y,n},S.prototype.handleSizeChanged=function(){this.$updatingSize||(null!=this.$bitmapFont?this.$widthAutoSize||this.render():this.$inProgressBuilding?(this.$textField.width=this.width,this.$textField.height=this.height):3==this.$autoSize?this.shrinkTextField():this.$widthAutoSize||(this.$heightAutoSize?this.$textField.width=this.width:(this.$textField.width=this.width,this.$textField.height=this.height)),this.layoutAlign())},S.prototype.shrinkTextField=function(){var t=Math.min(1,this.width/this.$textWidth);this.$textField.scale.set(t,t)},S.prototype.layoutAlign=function(){var t=this.$textWidth,e=this.$textHeight;if(3==this.autoSize&&(t*=this.displayObject.scale.x,e*=this.displayObject.scale.y),0==this.$verticalAlign||0==e)this.$offset.y=S.GUTTER_Y;else{var i=Math.max(0,this.height-e);1==this.$verticalAlign?this.$offset.y=.5*i:2==this.$verticalAlign&&(this.$offset.y=i)}var n=0;switch(this.$style.align){case"center":n=.5*(this.width-t);break;case"right":n=this.width-t}this.$offset.x=n,this.updatePosition()},S.prototype.updatePosition=function(){this.displayObject.position.set(Math.floor(this.x+this.$offset.x),Math.floor(this.y+this.$offset.y))},S.prototype.handleXYChanged=function(){s.prototype.handleXYChanged.call(this),this.$displayObject&&this.updatePosition()},S.prototype.setupBeforeAdd=function(t){s.prototype.setupBeforeAdd.call(this,t);var e=t.attributes.font;e&&(this.font=e),(e=t.attributes.vAlign)&&(this.verticalAlign=j.ParseVertAlignType(e)),(e=t.attributes.leading)&&(this.$style.leading=parseInt(e)),(e=t.attributes.letterSpacing)&&(this.$style.letterSpacing=parseInt(e)),(e=t.attributes.fontSize)&&(this.$style.fontSize=parseInt(e)),(e=t.attributes.color)&&(this.color=j.utils.StringUtil.convertFromHtmlColor(e)),(e=t.attributes.align)&&(this.align=j.ParseAlignType(e)),(e=t.attributes.autoSize)&&(this.autoSize=j.ParseAutoSizeType(e),this.$widthAutoSize=1==this.$autoSize||3==this.$autoSize,this.$heightAutoSize=1==this.$autoSize||2==this.$autoSize),this.underline="true"==t.attributes.underline,this.italic="true"==t.attributes.italic,this.bold="true"==t.attributes.bold,this.multipleLine="true"!=t.attributes.singleLine,(e=t.attributes.strokeColor)&&(this.strokeColor=j.utils.StringUtil.convertFromHtmlColor(e),e=t.attributes.strokeSize,this.stroke=e?parseInt(e)+1:2)},S.prototype.setupAfterAdd=function(t){s.prototype.setupAfterAdd.call(this,t);var e=t.attributes.text;null!=e&&0<e.length&&(this.text=e),this.$sizeDirty=!1},S.GUTTER_X=2,S.GUTTER_Y=2,S}(j.GObject);j.GTextField=t}(fgui||(fgui={})),function(t){var e=function(){};t.TextBlock=e;var i=function(e){function t(){var t=e.call(this)||this;return t.$textField.interactive=!0,t.$textField.interactiveChildren=!1,t.on("__linkClick",t.$clickLink,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"ubbEnabled",{get:function(){return this.$ubbEnabled},set:function(t){this.$ubbEnabled!=t&&(this.$ubbEnabled=t,this.render())},enumerable:!0,configurable:!0}),t.prototype.setupBeforeAdd=function(t){e.prototype.setupBeforeAdd.call(this,t),this.$ubbEnabled="true"==t.attributes.ubb},Object.defineProperty(t.prototype,"textFlow",{set:function(t){this.$textFlow=t,this.render()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{set:function(t){this.$text=t,null==this.$text&&(this.$text=""),this.$textField.width=this.width,this.updateGear(6),this.render()},enumerable:!0,configurable:!0}),t.prototype.$clickLink=function(t){this.emit("__linkClick",t.text,this)},t.prototype.dispose=function(){this.off("__linkClick",this.$clickLink,this),e.prototype.dispose.call(this)},t}(t.GTextField);t.GRichTextField=i}(fgui||(fgui={})),function(o){var t=function(){this.touchDown=!1,this.mouseX=0,this.mouseY=0};o.GRootStatus=t;var e=function(e){function c(){var t=e.call(this)||this;return null==c.$inst&&(c.$inst=t),t.opaque=!1,t.$popupStack=[],t.$justClosedPopups=[],t.$uid=c.uniqueID++,t}return __extends(c,e),Object.defineProperty(c,"inst",{get:function(){return null==c.$inst&&new c,c.$inst},enumerable:!0,configurable:!0}),Object.defineProperty(c,"statusData",{get:function(){return c.$retStatus},enumerable:!0,configurable:!0}),c.prototype.getObjectUnderPoint=function(t,e){var i=this.$uiStage.applicationContext.renderer.plugins.interaction.hitTest(c.sHelperPoint,this.nativeStage);return o.GObject.castFromNativeObject(i)},c.prototype.attachTo=function(t,e){var i=createjs;i.Ticker.timingMode=i.Ticker.RAF,o.GTimer.inst.setTicker(t.ticker),this.$uiStage&&(this.$uiStage.off("__sizeChanged",this.$winResize,this),this.$uiStage.nativeStage.off(o.InteractiveEvents.Down,this.$stageDown,this),this.$uiStage.nativeStage.off(o.InteractiveEvents.Up,this.$stageUp,this),this.$uiStage.nativeStage.off(o.InteractiveEvents.Move,this.$stageMove,this),this.$uiStage.nativeStage.removeChild(this.$displayObject),this.$uiStage.dispose()),this.$uiStage=new o.UIStage(t,e),this.$uiStage.on("__sizeChanged",this.$winResize,this),this.$uiStage.nativeStage.on(o.InteractiveEvents.Down,this.$stageDown,this),this.$uiStage.nativeStage.on(o.InteractiveEvents.Up,this.$stageUp,this),this.$uiStage.nativeStage.on(o.InteractiveEvents.Move,this.$stageMove,this),this.$uiStage.nativeStage.addChild(this.$displayObject),this.$winResize(this.$uiStage),this.$modalLayer||(this.$modalLayer=new o.GGraph,this.$modalLayer.setSize(this.width,this.height),this.$modalLayer.drawRect(0,0,0,o.UIConfig.modalLayerColor,o.UIConfig.modalLayerAlpha),this.$modalLayer.addRelation(this,24))},Object.defineProperty(c.prototype,"uniqueID",{get:function(){return this.$uid},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"stageWidth",{get:function(){return this.$uiStage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"stageHeight",{get:function(){return this.$uiStage.stageHeight},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"contentScaleFactor",{get:function(){return this.$uiStage.resolution},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"applicationContext",{get:function(){return this.$uiStage.applicationContext},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"nativeStage",{get:function(){return this.$uiStage.nativeStage},enumerable:!0,configurable:!0}),c.prototype.showWindow=function(t){this.addChild(t),t.requestFocus(),t.x>this.width?t.x=this.width-t.width:t.x+t.width<0&&(t.x=0),t.y>this.height?t.y=this.height-t.height:t.y+t.height<0&&(t.y=0),this.adjustModalLayer()},c.prototype.hideWindow=function(t){t.hide()},c.prototype.hideWindowImmediately=function(t){t.parent==this&&this.removeChild(t),this.adjustModalLayer()},c.prototype.bringToFront=function(t){var e;for(e=null==this.$modalLayer.parent||t.modal?this.numChildren-1:this.getChildIndex(this.$modalLayer)-1;0<=e;e--){var i=this.getChildAt(e);if(i==t)return;if(i instanceof o.Window)break}0<=e&&this.setChildIndex(t,e)},c.prototype.showModalWait=function(t){void 0===t&&(t=null),null!=o.UIConfig.globalModalWaiting&&(null==this.$modalWaitPane&&(this.$modalWaitPane=o.UIPackage.createObjectFromURL(o.UIConfig.globalModalWaiting),this.$modalWaitPane.addRelation(this,24)),this.$modalWaitPane.setSize(this.width,this.height),this.addChild(this.$modalWaitPane),this.$modalWaitPane.text=t)},c.prototype.closeModalWait=function(){null!=this.$modalWaitPane&&null!=this.$modalWaitPane.parent&&this.removeChild(this.$modalWaitPane)},c.prototype.closeAllExceptModals=function(){this.$children.slice().forEach(function(t){t instanceof o.Window&&!t.modal&&t.hide()},this)},c.prototype.closeAllWindows=function(){this.$children.slice().forEach(function(t){t instanceof o.Window&&t.hide()},this)},c.prototype.getTopWindow=function(){for(var t=this.numChildren-1;0<=t;t--){var e=this.getChildAt(t);if(e instanceof o.Window)return e}return null},Object.defineProperty(c.prototype,"hasModalWindow",{get:function(){return null!=this.$modalLayer.parent},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"modalWaiting",{get:function(){return this.$modalWaitPane&&this.$modalWaitPane.inContainer},enumerable:!0,configurable:!0}),c.prototype.showPopup=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=0),0<this.$popupStack.length){var n=this.$popupStack.indexOf(t);if(-1!=n)for(var s=this.$popupStack.length-1;n<=s;s--)this.removeChild(this.$popupStack.pop())}var r;this.$popupStack.push(t),this.addChild(t),this.adjustModalLayer();var o,h,a=0,l=0;e?(r=e.localToRoot(),a=e.width,l=e.height):r=this.globalToLocal(c.$retStatus.mouseX,c.$retStatus.mouseY),(o=r.x)+t.width>this.width&&(o=o+a-t.width),h=r.y+l,(0==i&&h+t.height>this.height||2==i)&&(h=r.y-t.height-1)<0&&(h=0,o+=.5*a),t.x=o,t.y=h},c.prototype.togglePopup=function(t,e,i){void 0===e&&(e=null),-1==this.$justClosedPopups.indexOf(t)&&this.showPopup(t,e,i)},c.prototype.hidePopup=function(t){var e;if(void 0===t&&(t=null),null!=t){var i=this.$popupStack.indexOf(t);if(-1!=i)for(e=this.$popupStack.length-1;i<=e;e--)this.closePopup(this.$popupStack.pop())}else{for(e=this.$popupStack.length-1;0<=e;e--)this.closePopup(this.$popupStack[e]);this.$popupStack.length=0}},Object.defineProperty(c.prototype,"hasAnyPopup",{get:function(){return 0!=this.$popupStack.length},enumerable:!0,configurable:!0}),c.prototype.closePopup=function(t){null!=t.parent&&(t instanceof o.Window?t.hide():this.removeChild(t))},c.prototype.showTooltips=function(t){if(null==this.$defaultTooltipWin){var e=o.UIConfig.tooltipsWin;if(!e)return void console.error("UIConfig.tooltipsWin not defined");this.$defaultTooltipWin=o.UIPackage.createObjectFromURL(e)}this.$defaultTooltipWin.text=t,this.showTooltipsWin(this.$defaultTooltipWin)},c.prototype.showTooltipsWin=function(t,e){void 0===e&&(e=null),this.hideTooltips(),this.$tooltipWin=t;var i=0,n=0;null==e?(i=c.$retStatus.mouseX+10,n=c.$retStatus.mouseY+20):(i=e.x,n=e.y);var s=this.globalToLocal(i,n);i=s.x,n=s.y,i+this.$tooltipWin.width>this.width&&(i=i-this.$tooltipWin.width-1)<0&&(i=10),n+this.$tooltipWin.height>this.height&&(n=n-this.$tooltipWin.height-1,0<i-this.$tooltipWin.width-1&&(i=i-this.$tooltipWin.width-1),n<0&&(n=10)),this.$tooltipWin.x=i,this.$tooltipWin.y=n,this.addChild(this.$tooltipWin)},c.prototype.hideTooltips=function(){null!=this.$tooltipWin&&(this.$tooltipWin.parent&&this.removeChild(this.$tooltipWin),this.$tooltipWin=null)},Object.defineProperty(c.prototype,"focus",{get:function(){return this.$focusedObject&&!this.$focusedObject.onStage&&(this.$focusedObject=null),this.$focusedObject},set:function(t){if(t&&(!t.focusable||!t.onStage))throw new Error("Invalid target to focus");this.setFocus(t)},enumerable:!0,configurable:!0}),c.prototype.setFocus=function(t){this.$focusedObject!=t&&(this.$focusedObject=t,this.emit("__focusChanged",this))},c.prototype.adjustModalLayer=function(){var t=this.numChildren;null!=this.$modalWaitPane&&null!=this.$modalWaitPane.parent&&this.setChildIndex(this.$modalWaitPane,t-1);for(var e=t-1;0<=e;e--){var i=this.getChildAt(e);if(i instanceof o.Window&&i.modal)return void(null==this.$modalLayer.parent?this.addChildAt(this.$modalLayer,e):this.setChildIndexBefore(this.$modalLayer,e))}null!=this.$modalLayer.parent&&this.removeChild(this.$modalLayer)},c.prototype.$stageDown=function(t){c.$retStatus.mouseX=t.data.global.x,c.$retStatus.mouseY=t.data.global.y,c.$retStatus.touchDown=!0;for(var e=t.target;e&&e!=this.nativeStage;){if(o.isUIObject(e)){var i=e.UIOwner;if(i.touchable&&i.focusable){this.setFocus(i);break}}e=e.parent}null!=this.$tooltipWin&&this.hideTooltips(),this.checkPopups(t.target)},c.prototype.checkPopups=function(t){if(!this.$checkingPopups&&(this.$checkingPopups=!0,(this.$justClosedPopups.length=0)<this.$popupStack.length)){for(var e=t;e&&e!=this.nativeStage;){if(o.isUIObject(e)){var i=this.$popupStack.indexOf(e.UIOwner);if(-1!=i){for(var n=void 0,s=this.$popupStack.length-1;i<s;s--)n=this.$popupStack.pop(),this.closePopup(n),this.$justClosedPopups.push(n);return}}e=e.parent}var r=void 0;for(s=this.$popupStack.length-1;0<=s;s--)r=this.$popupStack[s],this.closePopup(r),this.$justClosedPopups.push(r);this.$popupStack.length=0}},c.prototype.$stageMove=function(t){c.$retStatus.mouseX=t.data.global.x,c.$retStatus.mouseY=t.data.global.y},c.prototype.$stageUp=function(t){c.$retStatus.touchDown=!1,this.$checkingPopups=!1},c.prototype.$winResize=function(t){this.setSize(t.stageWidth,t.stageHeight)},c.uniqueID=0,c.$retStatus=new t,c}(o.GComponent);o.GRoot=e}(fgui||(fgui={})),function(i){var t=function(e){function s(){var t=e.call(this)||this;return t.$dragOffset=new PIXI.Point,t.$scrollPerc=0,t}return __extends(s,e),s.prototype.setScrollPane=function(t,e){this.$target=t,this.$vertical=e},Object.defineProperty(s.prototype,"displayPerc",{set:function(t){this.$vertical?(this.$fixedGripSize||(this.$grip.height=t*this.$bar.height),this.$grip.y=this.$bar.y+(this.$bar.height-this.$grip.height)*this.$scrollPerc):(this.$fixedGripSize||(this.$grip.width=t*this.$bar.width),this.$grip.x=this.$bar.x+(this.$bar.width-this.$grip.width)*this.$scrollPerc)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"scrollPerc",{set:function(t){this.$scrollPerc=t,this.$vertical?this.$grip.y=this.$bar.y+(this.$bar.height-this.$grip.height)*this.$scrollPerc:this.$grip.x=this.$bar.x+(this.$bar.width-this.$grip.width)*this.$scrollPerc},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"minSize",{get:function(){return this.$vertical?(null!=this.$arrowButton1?this.$arrowButton1.height:0)+(null!=this.$arrowButton2?this.$arrowButton2.height:0):(null!=this.$arrowButton1?this.$arrowButton1.width:0)+(null!=this.$arrowButton2?this.$arrowButton2.width:0)},enumerable:!0,configurable:!0}),s.prototype.constructFromXML=function(t){e.prototype.constructFromXML.call(this,t),null!=(t=i.utils.XmlParser.getChildNodes(t,"ScrollBar")[0])&&(this.$fixedGripSize="true"==t.attributes.fixedGripSize),this.$grip=this.getChild("grip"),this.$grip?(this.$bar=this.getChild("bar"),this.$bar?(this.$arrowButton1=this.getChild("arrow1"),this.$arrowButton2=this.getChild("arrow2"),this.$grip.on(i.InteractiveEvents.Down,this.$gripMouseDown,this),this.$arrowButton1&&this.$arrowButton1.on(i.InteractiveEvents.Down,this.$arrowButton1Click,this),this.$arrowButton2&&this.$arrowButton2.on(i.InteractiveEvents.Down,this.$arrowButton2Click,this),this.on(i.InteractiveEvents.Down,this.$barMouseDown,this)):console.error("please create and define 'bar' in the Editor for the scrollbar")):console.error("please create and define 'grip' in the Editor for the scrollbar")},s.prototype.$gripMouseDown=function(t){if(this.$bar){t.stopPropagation(),this.$dragOffset=t.data.getLocalPosition(this.displayObject,this.$dragOffset),this.$dragOffset.x-=this.$grip.x,this.$dragOffset.y-=this.$grip.y;var e=i.GRoot.inst.nativeStage;e.on(i.InteractiveEvents.Move,this.$gripDragging,this),e.on(i.InteractiveEvents.Up,this.$gripDraggingEnd,this)}},s.prototype.$gripDragging=function(t){var e=t.data.getLocalPosition(this.displayObject,s.sScrollbarHelperPoint);if(this.$vertical){var i=e.y-this.$dragOffset.y;this.$target.setPercY((i-this.$bar.y)/(this.$bar.height-this.$grip.height),!1)}else{var n=e.x-this.$dragOffset.x;this.$target.setPercX((n-this.$bar.x)/(this.$bar.width-this.$grip.width),!1)}},s.prototype.$gripDraggingEnd=function(t){var e=i.GRoot.inst.nativeStage;e.off(i.InteractiveEvents.Move,this.$gripDragging,this),e.off(i.InteractiveEvents.Up,this.$gripDraggingEnd,this)},s.prototype.$arrowButton1Click=function(t){t.stopPropagation(),this.$vertical?this.$target.scrollUp():this.$target.scrollLeft()},s.prototype.$arrowButton2Click=function(t){t.stopPropagation(),this.$vertical?this.$target.scrollDown():this.$target.scrollRight()},s.prototype.$barMouseDown=function(t){var e=t.data.getLocalPosition(this.$grip.displayObject,s.sScrollbarHelperPoint);this.$vertical?e.y<0?this.$target.scrollUp(4):this.$target.scrollDown(4):e.x<0?this.$target.scrollLeft(4):this.$target.scrollRight(4)},s.prototype.dispose=function(){this.off(i.InteractiveEvents.Down,this.$barMouseDown,this),this.$arrowButton1&&this.$arrowButton1.off(i.InteractiveEvents.Down,this.$arrowButton1Click,this),this.$arrowButton2&&this.$arrowButton2.off(i.InteractiveEvents.Down,this.$arrowButton2Click,this),this.$grip.off(i.InteractiveEvents.Down,this.$gripMouseDown,this),this.$gripDraggingEnd(null),e.prototype.dispose.call(this)},s.sScrollbarHelperPoint=new PIXI.Point,s}(i.GComponent);i.GScrollBar=t}(fgui||(fgui={})),function(n){var t=function(i){function o(){var t=i.call(this)||this;return t.$max=0,t.$value=0,t.$barMaxWidth=0,t.$barMaxHeight=0,t.$barMaxWidthDelta=0,t.$barMaxHeightDelta=0,t.$titleType=0,t.$value=50,t.$max=100,t.$clickPos=new PIXI.Point,t}return __extends(o,i),Object.defineProperty(o.prototype,"titleType",{get:function(){return this.$titleType},set:function(t){this.$titleType=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"max",{get:function(){return this.$max},set:function(t){this.$max!=t&&(this.$max=t,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"value",{get:function(){return this.$value},set:function(t){this.$value!=t&&(this.$value=t,this.update())},enumerable:!0,configurable:!0}),o.prototype.update=function(){var t=Math.min(this.$value/this.$max,1);this.updateWidthPercent(t)},o.prototype.updateWidthPercent=function(t){if(this.$titleObject)switch(this.$titleType){case 0:this.$titleObject.text=Math.round(100*t)+"%";break;case 1:this.$titleObject.text=this.$value+"/"+this.$max;break;case 2:this.$titleObject.text=""+this.$value;break;case 3:this.$titleObject.text=""+this.$max}this.$barObjectH&&(this.$barObjectH.width=(this.width-this.$barMaxWidthDelta)*t),this.$barObjectV&&(this.$barObjectV.height=(this.height-this.$barMaxHeightDelta)*t),this.$aniObject instanceof n.GMovieClip&&(this.$aniObject.frame=Math.round(100*t))},o.prototype.handleSizeChanged=function(){i.prototype.handleSizeChanged.call(this),this.$barObjectH&&(this.$barMaxWidth=this.width-this.$barMaxWidthDelta),this.$barObjectV&&(this.$barMaxHeight=this.height-this.$barMaxHeightDelta),this.$inProgressBuilding||this.update()},o.prototype.setupAfterAdd=function(t){i.prototype.setupAfterAdd.call(this,t),(t=n.utils.XmlParser.getChildNodes(t,"Slider")[0])&&(this.$value=parseInt(t.attributes.value),this.$max=parseInt(t.attributes.max)),this.update()},o.prototype.constructFromXML=function(t){var e;i.prototype.constructFromXML.call(this,t),(t=n.utils.XmlParser.getChildNodes(t,"Slider")[0])&&(e=t.attributes.titleType)&&(this.$titleType=n.ParseProgressTitleType(e)),this.$titleObject=this.getChild("title"),this.$barObjectH=this.getChild("bar"),this.$barObjectV=this.getChild("bar_v"),this.$aniObject=this.getChild("ani"),this.$gripObject=this.getChild("grip"),this.$barObjectH&&(this.$barMaxWidth=this.$barObjectH.width,this.$barMaxWidthDelta=this.width-this.$barMaxWidth),this.$barObjectV&&(this.$barMaxHeight=this.$barObjectV.height,this.$barMaxHeightDelta=this.height-this.$barMaxHeight),this.$gripObject&&this.$gripObject.on(n.InteractiveEvents.Down,this.$gripMouseDown,this)},o.prototype.$gripMouseDown=function(t){this.$clickPos=this.globalToLocal(t.data.global.x,t.data.global.y),this.$clickPercent=this.$value/this.$max,n.GRoot.inst.nativeStage.on(n.InteractiveEvents.Move,this.$gripMouseMove,this),n.GRoot.inst.nativeStage.on(n.InteractiveEvents.Up,this.$gripMouseUp,this)},o.prototype.$gripMouseMove=function(t){var e,i=this.globalToLocal(t.data.global.x,t.data.global.y,o.sSilderHelperPoint),n=i.x-this.$clickPos.x,s=i.y-this.$clickPos.y;1<(e=this.$barObjectH?this.$clickPercent+n/this.$barMaxWidth:this.$clickPercent+s/this.$barMaxHeight)?e=1:e<0&&(e=0);var r=Math.round(this.$max*e);r!=this.$value&&(this.$value=r,this.emit("__stateChanged",this)),this.updateWidthPercent(e)},o.prototype.$gripMouseUp=function(t){var e=this.$value/this.$max;this.updateWidthPercent(e),n.GRoot.inst.nativeStage.off(n.InteractiveEvents.Move,this.$gripMouseMove,this),n.GRoot.inst.nativeStage.off(n.InteractiveEvents.Up,this.$gripMouseUp,this)},o.prototype.dispose=function(){this.$gripObject&&this.$gripObject.off(n.InteractiveEvents.Down,this.$gripMouseDown,this),n.GRoot.inst.nativeStage.off(n.InteractiveEvents.Move,this.$gripMouseMove,this),n.GRoot.inst.nativeStage.off(n.InteractiveEvents.Up,this.$gripMouseUp,this),i.prototype.dispose.call(this)},o.sSilderHelperPoint=new PIXI.Point,o}(n.GComponent);n.GSlider=t}(fgui||(fgui={})),function(e){var t=function(i){function t(){var t=i.call(this)||this;return t.$util=null,t.$isTyping=!1,t.focusable=!0,t.editable=!0,t.type="text",t.on("removed",t.removed,t),t.$util.initialize(),t}return __extends(t,i),t.prototype.createDisplayObject=function(){i.prototype.createDisplayObject.call(this),this.$displayObject.hitArea=new PIXI.Rectangle},t.prototype.handleSizeChanged=function(){i.prototype.handleSizeChanged.call(this);var t=this.$displayObject.hitArea;t.x=t.y=0,t.width=this.width,t.height=this.height},t.prototype.removed=function(t){this.$util&&this.$util.destroy()},t.prototype.requestFocus=function(){(this.root.focus=this).$util.$onFocus()},Object.defineProperty(t.prototype,"editable",{get:function(){return this.$editable},set:function(t){t!=this.$editable&&(this.$editable=t,this.$editable?(this.$util||(this.$util=new e.utils.InputDelegate(this)),this.$util.initialize()):this.$util&&this.$util.destroy(),this.touchable=this.$editable)},enumerable:!0,configurable:!0}),t.prototype.changeToPassText=function(t){for(var e="",i=0,n=t.length;i<n;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e},t.prototype.getText=function(){return this.$util.text},t.prototype.setText=function(t){null==t&&(t=""),this.$text!=t&&(this.$util.text=t,i.prototype.setText.call(this,t))},t.prototype.setColor=function(t){i.prototype.setColor.call(this,t),this.$util.setColor(t)},Object.defineProperty(t.prototype,"promptText",{get:function(){return this.$util.$getProperty("placeholder")},set:function(t){null==t&&(t=""),this.$util.$setProperty("placeholder",t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return parseInt(this.$util.$getProperty("maxlength"))||0},set:function(t){this.$util.$setProperty("maxlength",String(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"restrict",{get:function(){return this.$util.$restrict},set:function(t){this.$util.$restrict=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"password",{get:function(){return"password"==this.type},set:function(t){this.type="password"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.$util.type},set:function(t){this.$util.type=t},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){i.prototype.dispose.call(this),this.off("removed",this.removed,this),this.$util.destroy(),this.$util=null},t.prototype.renderNow=function(t){void 0===t&&(t=!0),this.$requireRender=!1,this.$sizeDirty=!1,this.$util.$updateProperties(),this.$isTyping&&this.decorateInputbox();var e=this.$text;"password"==this.type&&(this.$text=this.changeToPassText(this.$text)),i.prototype.renderNow.call(this,t),this.$text=e},t.prototype.decorateInputbox=function(){},t.prototype.setupBeforeAdd=function(t){i.prototype.setupBeforeAdd.call(this,t);var e=t.attributes.maxLength;null!=e&&(this.maxLength=parseInt(e)),null!=(e=t.attributes.restrict)&&(this.restrict=e),"true"==(e=t.attributes.password)?this.password=!0:"4"==(e=t.attributes.keyboardType)?this.type="number":"3"==e?this.type="url":"5"==e?this.type="tel":"6"==e&&(this.type="email")},t}(e.GTextField);e.GTextInput=t}(fgui||(fgui={})),function(t){var e=function(){function t(){this.$enumIdx=0,this.$enumCount=0,this.$items=[],this.$itemPool=[]}return t.prototype.getItem=function(){return this.$itemPool.length?this.$itemPool.pop():new i},t.prototype.findItem=function(t,e){for(var i=this.$items.length,n=0;n<i;n++){var s=this.$items[n];if(s.callback==t&&s.thisObj==e)return s}return null},t.prototype.add=function(t,e,i,n,s){var r=this.findItem(i,n);r||((r=this.getItem()).callback=i,r.thisObj=n,this.$items.push(r)),r.delay=t,r.counter=0,r.repeat=e,r.param=s,r.end=!1},t.prototype.callLater=function(t,e,i){this.add(1,1,t,e,i)},t.prototype.callDelay=function(t,e,i,n){this.add(t,1,e,i,n)},t.prototype.exists=function(t,e){return null!=this.findItem(t,e)},t.prototype.remove=function(t,e){var i=this.findItem(t,e);if(i){var n=this.$items.indexOf(i);this.$items.splice(n,1),n<this.$enumIdx&&this.$enumIdx--,this.$enumCount--,i.callback=null,i.param=null,this.$itemPool.push(i)}},t.prototype.advance=function(){for(this.$enumIdx=0,this.$enumCount=this.$items.length;this.$enumIdx<this.$enumCount;){var t=this.$items[this.$enumIdx];this.$enumIdx++;var e=this.$ticker.elapsedMS;if(t.advance(e)){if(t.end&&(this.$enumIdx--,this.$enumCount--,this.$items.splice(this.$enumIdx,1),this.$itemPool.push(t)),t.callback){var i=[e];t.param&&t.param instanceof Array?i=t.param.concat(i):void 0!==t.param&&i.unshift(t.param),t.callback.apply(t.thisObj,i)}t.end&&(t.callback=t.thisObj=t.param=null)}}},t.prototype.setTicker=function(t){this.$ticker&&this.$ticker.remove(this.advance,this,PIXI.UPDATE_PRIORITY.NORMAL),this.$ticker=t,this.$ticker.add(this.advance,this,PIXI.UPDATE_PRIORITY.NORMAL),this.$ticker.started||this.$ticker.start()},t.inst=new t,t}();t.GTimer=e;var i=function(){function t(){this.delay=0,this.counter=0,this.repeat=0}return t.prototype.advance=function(t){return void 0===t&&(t=0),this.counter+=t,this.counter>=this.delay&&(this.counter-=this.delay,this.counter>this.delay&&(this.counter=this.delay),0<this.repeat&&(this.repeat--,0==this.repeat&&(this.end=!0)),!0)},t}()}(fgui||(fgui={})),(fgui||(fgui={})).isAnimationGear=function(t){return t&&"playing"in t&&"frame"in t},(fgui||(fgui={})).isColorableTitle=function(t){return t&&"titleColor"in t&&"fontSize"in t},(fgui||(fgui={})).isColorGear=function(t){return t&&"color"in t},function(n){var t=function(){function t(t){if(void 0===t&&(t=null),!t&&!(t=n.UIConfig.popupMenu))throw new Error("UIConfig.popupMenu not defined");this.$contentPane=n.UIPackage.createObjectFromURL(t),this.$contentPane.on("added",this.$addedToStage,this),this.$list=this.$contentPane.getChild("list"),this.$list.removeChildrenToPool(),this.$list.addRelation(this.$contentPane,14),this.$list.removeRelation(this.$contentPane,15),this.$contentPane.addRelation(this.$list,15),this.$list.on("__itemClick",this.$clickItem,this)}return t.prototype.dispose=function(){n.GTimer.inst.remove(this.$delayClickItem,this),this.$list.off("__itemClick",this.$clickItem,this),this.$contentPane.off("added",this.$addedToStage,this),this.$contentPane.dispose()},t.prototype.addItem=function(t,e){var i=this.$list.addItemFromPool();i.title=t,i.data=e,i.grayed=!1;var n=i.getController("checked");return null!=n&&(n.selectedIndex=0),i},t.prototype.addItemAt=function(t,e,i){var n=this.$list.getFromPool();this.$list.addChildAt(n,e),n.title=t,n.data=i,n.grayed=!1;var s=n.getController("checked");return null!=s&&(s.selectedIndex=0),n},t.prototype.addSeperator=function(){if(null==n.UIConfig.popupMenuSeperator)throw new Error("UIConfig.popupMenuSeperator not defined");this.$list.addItemFromPool(n.UIConfig.popupMenuSeperator)},t.prototype.getItemName=function(t){return this.$list.getChildAt(t).name},t.prototype.setItemText=function(t,e){this.$list.getChild(t).title=e},t.prototype.setItemVisible=function(t,e){var i=this.$list.getChild(t);i.visible!=e&&(i.visible=e,this.$list.setBoundsChangedFlag())},t.prototype.setItemGrayed=function(t,e){this.$list.getChild(t).grayed=e},t.prototype.setItemCheckable=function(t,e){var i=this.$list.getChild(t).getController("checked");null!=i&&(e?0==i.selectedIndex&&(i.selectedIndex=1):i.selectedIndex=0)},t.prototype.setItemChecked=function(t,e){var i=this.$list.getChild(t).getController("checked");null!=i&&(i.selectedIndex=e?2:1)},t.prototype.isItemChecked=function(t){var e=this.$list.getChild(t).getController("checked");return null!=e&&2==e.selectedIndex},t.prototype.removeItem=function(t){var e=this.$list.getChild(t);if(null!=e){var i=this.$list.getChildIndex(e);return this.$list.removeChildToPoolAt(i),!0}return!1},t.prototype.clearItems=function(){this.$list.removeChildrenToPool()},Object.defineProperty(t.prototype,"itemCount",{get:function(){return this.$list.numChildren},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentPane",{get:function(){return this.$contentPane},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"list",{get:function(){return this.$list},enumerable:!0,configurable:!0}),t.prototype.show=function(t,e){void 0===t&&(t=null),(null!=t?t.root:n.GRoot.inst).showPopup(this.contentPane,t instanceof n.GRoot?null:t,e)},t.prototype.$clickItem=function(t,e){n.GTimer.inst.add(100,1,this.$delayClickItem,this,e)},t.prototype.$delayClickItem=function(t){if(t instanceof n.GButton)if(t.grayed)this.$list.selectedIndex=-1;else{var e=t.getController("checked");null!=e&&0!=e.selectedIndex&&(1==e.selectedIndex?e.selectedIndex=2:e.selectedIndex=1);var i=this.$contentPane.parent;i&&i.hidePopup(this.contentPane),null!=t.data&&t.data.call(null),n.GTimer.inst.remove(this.$delayClickItem,this)}},t.prototype.$addedToStage=function(){this.$list.selectedIndex=-1,this.$list.resizeToFit(1e5,10)},t}();n.PopupMenu=t}(fgui||(fgui={})),function(t){var e=function(){function t(t){this.$owner=t,this.$defs=[]}return Object.defineProperty(t.prototype,"owner",{get:function(){return this.$owner},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this.$target},set:function(t){this.$target!=t&&(this.$target&&this.releaseRefTarget(this.$target),this.$target=t,this.$target&&this.addRefTarget(this.$target))},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){if(24==t)return this.add(14,e),void this.add(15,e);for(var i=this.$defs.length,n=0;n<i;n++){if(this.$defs[n].type==t)return}this.internalAdd(t,e)},t.prototype.internalAdd=function(t,e){if(24==t)return this.internalAdd(14,e),void this.internalAdd(15,e);var i=new n;i.percent=e,i.type=t,this.$defs.push(i),(e||1==t||3==t||5==t||8==t||10==t||12==t)&&(this.$owner.pixelSnapping=!0)},t.prototype.remove=function(t){if(void 0===t&&(t=0),24==t)return this.remove(14),void this.remove(15);for(var e=this.$defs.length-1;0<=e;e--)if(this.$defs[e].type==t){this.$defs.splice(e,1);break}},t.prototype.copyFrom=function(t){var i=this;this.target=t.target,this.$defs.length=0,t.$defs.forEach(function(t){var e=new n;e.copyFrom(t),i.$defs.push(e)},this)},t.prototype.dispose=function(){null!=this.$target&&(this.releaseRefTarget(this.$target),this.$target=null)},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0==this.$defs.length},enumerable:!0,configurable:!0}),t.prototype.applyOnSelfResized=function(e,i){var n=this,s=this.$owner.x,r=this.$owner.y;this.$defs.forEach(function(t){switch(t.type){case 3:case 5:n.$owner.x-=e/2;break;case 4:case 6:n.$owner.x-=e;break;case 10:case 12:n.$owner.y-=i/2;break;case 11:case 13:n.$owner.y-=i}},this),s==this.$owner.x&&r==this.$owner.y||(s=this.$owner.x-s,r=this.$owner.y-r,this.$owner.updateGearFromRelations(1,s,r),null!=this.$owner.parent&&this.$owner.parent.$transitions.forEach(function(t){t.updateFromRelations(n.$owner.id,s,r)},this))},t.prototype.applyOnXYChanged=function(t,e,i){var n;switch(t.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:this.$owner.x+=e;break;case 7:case 8:case 9:case 10:case 11:case 12:case 13:this.$owner.y+=i;break;case 14:case 15:break;case 16:case 17:n=this.$owner.x,this.$owner.x+=e,this.$owner.width=this.$owner.$rawWidth-(this.$owner.x-n);break;case 18:case 19:this.$owner.width=this.$owner.$rawWidth+e;break;case 20:case 21:n=this.$owner.y,this.$owner.y+=i,this.$owner.height=this.$owner.$rawHeight-(this.$owner.y-n);break;case 22:case 23:this.$owner.height=this.$owner.$rawHeight+i}},t.prototype.applyOnSizeChanged=function(t){var e,i,n,s;switch(this.$target!=this.$owner.parent?(e=this.$target.x,i=this.$target.y):i=e=0,t.type){case 0:break;case 1:n=this.$owner.x-(e+this.$targetWidth/2),t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+this.$target.$rawWidth/2+n;break;case 2:n=this.$owner.x-(e+this.$targetWidth),t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+this.$target.$rawWidth+n;break;case 3:n=this.$owner.x+this.$owner.$rawWidth/2-(e+this.$targetWidth/2),t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+this.$target.$rawWidth/2+n-this.$owner.$rawWidth/2;break;case 4:n=this.$owner.x+this.$owner.$rawWidth-e,t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+n-this.$owner.$rawWidth;break;case 5:n=this.$owner.x+this.$owner.$rawWidth-(e+this.$targetWidth/2),t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+this.$target.$rawWidth/2+n-this.$owner.$rawWidth;break;case 6:n=this.$owner.x+this.$owner.$rawWidth-(e+this.$targetWidth),t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+this.$target.$rawWidth+n-this.$owner.$rawWidth;break;case 7:break;case 8:n=this.$owner.y-(i+this.$targetHeight/2),t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+this.$target.$rawHeight/2+n;break;case 9:n=this.$owner.y-(i+this.$targetHeight),t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+this.$target.$rawHeight+n;break;case 10:n=this.$owner.y+this.$owner.$rawHeight/2-(i+this.$targetHeight/2),t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+this.$target.$rawHeight/2+n-this.$owner.$rawHeight/2;break;case 11:n=this.$owner.y+this.$owner.$rawHeight-i,t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+n-this.$owner.$rawHeight;break;case 12:n=this.$owner.y+this.$owner.$rawHeight-(i+this.$targetHeight/2),t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+this.$target.$rawHeight/2+n-this.$owner.$rawHeight;break;case 13:n=this.$owner.y+this.$owner.$rawHeight-(i+this.$targetHeight),t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+this.$target.$rawHeight+n-this.$owner.$rawHeight;break;case 14:n=this.$owner.$inProgressBuilding&&this.$owner==this.$target.parent?this.$owner.sourceWidth-this.$target.$initWidth:this.$owner.$rawWidth-this.$targetWidth,t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),this.$target==this.$owner.parent?this.$owner.setSize(this.$target.$rawWidth+n,this.$owner.$rawHeight,!0):this.$owner.width=this.$target.$rawWidth+n;break;case 15:n=this.$owner.$inProgressBuilding&&this.$owner==this.$target.parent?this.$owner.sourceHeight-this.$target.$initHeight:this.$owner.$rawHeight-this.$targetHeight,t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),this.$target==this.$owner.parent?this.$owner.setSize(this.$owner.$rawWidth,this.$target.$rawHeight+n,!0):this.$owner.height=this.$target.$rawHeight+n;break;case 16:break;case 17:n=this.$owner.x-(e+this.$targetWidth),t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),s=this.$owner.x,this.$owner.x=e+this.$target.$rawWidth+n,this.$owner.width=this.$owner.$rawWidth-(this.$owner.x-s);break;case 18:break;case 19:n=this.$owner.$inProgressBuilding&&this.$owner==this.$target.parent?this.$owner.sourceWidth-(e+this.$target.$initWidth):this.$owner.width-(e+this.$targetWidth),this.$owner!=this.$target.parent&&(n+=this.$owner.x),t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),this.$owner!=this.$target.parent?this.$owner.width=e+this.$target.$rawWidth+n-this.$owner.x:this.$owner.width=e+this.$target.$rawWidth+n;break;case 20:break;case 21:n=this.$owner.y-(i+this.$targetHeight),t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),s=this.$owner.y,this.$owner.y=i+this.$target.$rawHeight+n,this.$owner.height=this.$owner.$rawHeight-(this.$owner.y-s);break;case 22:break;case 23:n=this.$owner.$inProgressBuilding&&this.$owner==this.$target.parent?this.$owner.sourceHeight-(i+this.$target.$initHeight):this.$owner.$rawHeight-(i+this.$targetHeight),this.$owner!=this.$target.parent&&(n+=this.$owner.y),t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),this.$owner!=this.$target.parent?this.$owner.height=i+this.$target.$rawHeight+n-this.$owner.y:this.$owner.height=i+this.$target.$rawHeight+n}},t.prototype.addRefTarget=function(t){t!=this.$owner.parent&&t.on("__xyChanged",this.$targetXYChanged,this),t.on("__sizeChanged",this.$targetSizeChanged,this),t.on("__sizeDelayChange",this.$targetSizeWillChange,this),this.$targetX=this.$target.x,this.$targetY=this.$target.y,this.$targetWidth=this.$target.$rawWidth,this.$targetHeight=this.$target.$rawHeight},t.prototype.releaseRefTarget=function(t){t.off("__xyChanged",this.$targetXYChanged,this),t.off("__sizeChanged",this.$targetSizeChanged,this),t.off("__sizeDelayChange",this.$targetSizeWillChange,this)},t.prototype.$targetXYChanged=function(t){var e=this;if(null!=this.$owner.relations.$dealing||null!=this.$owner.group&&this.$owner.group.$updating)return this.$targetX=this.$target.x,void(this.$targetY=this.$target.y);this.$owner.relations.$dealing=this.$target;var i=this.$owner.x,n=this.$owner.y,s=this.$target.x-this.$targetX,r=this.$target.y-this.$targetY;this.$defs.forEach(function(t){e.applyOnXYChanged(t,s,r)},this),this.$targetX=this.$target.x,this.$targetY=this.$target.y,i==this.$owner.x&&n==this.$owner.y||(i=this.$owner.x-i,n=this.$owner.y-n,this.$owner.updateGearFromRelations(1,i,n),null!=this.$owner.parent&&this.$owner.parent.$transitions.forEach(function(t){t.updateFromRelations(e.$owner.id,i,n)},this)),this.$owner.relations.$dealing=null},t.prototype.$targetSizeChanged=function(t){var e=this;if(null==this.$owner.relations.$dealing){this.$owner.relations.$dealing=this.$target;var i=this.$owner.x,n=this.$owner.y,s=this.$owner.$rawWidth,r=this.$owner.$rawHeight;this.$defs.forEach(function(t){e.applyOnSizeChanged(t)},this),this.$targetWidth=this.$target.$rawWidth,this.$targetHeight=this.$target.$rawHeight,i==this.$owner.x&&n==this.$owner.y||(i=this.$owner.x-i,n=this.$owner.y-n,this.$owner.updateGearFromRelations(1,i,n),null!=this.$owner.parent&&this.$owner.parent.$transitions.forEach(function(t){t.updateFromRelations(e.$owner.id,i,n)},this)),s==this.$owner.$rawWidth&&r==this.$owner.$rawHeight||(s=this.$owner.$rawWidth-s,r=this.$owner.$rawHeight-r,this.$owner.updateGearFromRelations(2,s,r)),this.$owner.relations.$dealing=null}},t.prototype.$targetSizeWillChange=function(t){this.$owner.relations.sizeDirty=!0},t}();t.RelationItem=e;var n=function(){function t(){}return t.prototype.copyFrom=function(t){this.percent=t.percent,this.type=t.type},t}();t.RelationDef=n}(fgui||(fgui={})),function(a){var t=function(){function h(t){this.sizeDirty=!1,this.$owner=t,this.$items=[]}return h.prototype.add=function(t,e,i){void 0===i&&(i=!1);for(var n=this.$items.length,s=0;s<n;s++){var r=this.$items[s];if(r.target==t)return void r.add(e,i)}var o=new a.RelationItem(this.$owner);o.target=t,o.add(e,i),this.$items.push(o)},h.prototype.addItems=function(t,e){for(var i,n,s=e.split(","),r=0;r<2;r++)if(i=s[r]){"%"==i.charAt(i.length-1)?(i=i.substr(0,i.length-1),n=!0):n=!1,-1==i.indexOf("-")&&(i=i+"-"+i);var o=h.RELATION_NAMES.indexOf(i);if(-1==o)throw new Error("Invalid relation type");this.add(t,o,n)}},h.prototype.remove=function(t,e){void 0===e&&(e=0);for(var i=this.$items.length,n=0;n<i;){var s=this.$items[n];s.target==t?(s.remove(e),s.isEmpty?(s.dispose(),this.$items.splice(n,1),i--):n++):n++}},h.prototype.contains=function(t){for(var e=this.$items.length,i=0;i<e;i++)if(this.$items[i].target==t)return!0;return!1},h.prototype.clearFor=function(t){for(var e=this.$items.length,i=0;i<e;){var n=this.$items[i];n.target==t?(n.dispose(),this.$items.splice(i,1),e--):i++}},h.prototype.clearAll=function(){this.$items.forEach(function(t){t.dispose()},this),this.$items.length=0},h.prototype.copyFrom=function(t){var i=this;this.clearAll(),t.$items.forEach(function(t){var e=new a.RelationItem(i.$owner);e.copyFrom(t),i.$items.push(e)},this)},h.prototype.dispose=function(){this.clearAll()},h.prototype.onOwnerSizeChanged=function(e,i){this.$items.length<=0||this.$items.forEach(function(t){t.applyOnSelfResized(e,i)},this)},h.prototype.ensureRelationsSizeCorrect=function(){0!=this.$items.length&&(this.sizeDirty=!1,this.$items.forEach(function(t){t.target.ensureSizeCorrect()},this))},Object.defineProperty(h.prototype,"empty",{get:function(){return 0==this.$items.length},enumerable:!0,configurable:!0}),h.prototype.setup=function(t){var n=this;t.children.forEach(function(t){var e,i;"relation"==t.nodeName&&(e=t.attributes.target,(i=n.$owner.parent?e?n.$owner.parent.getChildById(e):n.$owner.parent:n.$owner.getChildById(e))&&n.addItems(i,t.attributes.sidePair))},this)},h.RELATION_NAMES=["left-left","left-center","left-right","center-center","right-left","right-center","right-right","top-top","top-middle","top-bottom","middle-middle","bottom-top","bottom-middle","bottom-bottom","width-width","height-height","leftext-left","leftext-right","rightext-left","rightext-right","topext-top","topext-bottom","bottomext-top","bottomext-bottom"],h}();a.Relations=t}(fgui||(fgui={})),function(f){var t=function(l){function d(t,e,i,n,s,r,o){var h=l.call(this)||this;if(h.$viewWidth=0,h.$viewHeight=0,h.$contentWidth=0,h.$contentHeight=0,h.$scrollType=0,h.$scrollSpeed=0,h.$mouseWheelSpeed=0,h.$onStage=!1,null==d.$easeTypeFunc&&(d.$easeTypeFunc=f.ParseEaseType("cubeOut")),h.$throwTween=new g,h.$owner=t,h.$maskContainer=new f.UIContainer(null),h.$owner.$rootContainer.addChild(h.$maskContainer),h.$container=h.$owner.$container,h.$container.x=0,h.$container.y=0,h.$maskContainer.addChild(h.$container),h.$scrollType=e,h.$scrollBarMargin=i,h.$bouncebackEffect=f.UIConfig.defaultScrollBounceEffect,h.$touchEffect=f.UIConfig.defaultScrollTouchEffect,h.$scrollSpeed=f.UIConfig.defaultScrollSpeed,h.$mouseWheelSpeed=2*h.$scrollSpeed,h.$displayOnLeft=0!=(1&s),h.$snapToItem=0!=(2&s),h.$displayOnDemand=0!=(4&s),h.$pageMode=0!=(8&s),h.$touchEffect=!!(16&s)||!(32&s)&&f.UIConfig.defaultScrollTouchEffect,h.$bouncebackEffect=!!(64&s)||!(128&s)&&f.UIConfig.defaultScrollBounceEffect,h.$inertiaDisabled=0!=(256&s),0==(512&s)&&(h.$maskContainer.scrollRect=new PIXI.Rectangle),h.$xPerc=0,h.$yPerc=0,h.$xPos=0,h.$yPos=0,h.$xOverlap=0,h.$yOverlap=0,h.$aniFlag=0,h.$scrollBarVisible=!0,h.$mouseWheelEnabled=!1,h.$holdAreaPoint=new PIXI.Point,0==n&&(n=f.UIConfig.defaultScrollBarDisplay),3!=n){var a;if(2==h.$scrollType||1==h.$scrollType)if(a=r||f.UIConfig.verticalScrollBar){if(h.$vtScrollBar=f.UIPackage.createObjectFromURL(a),!h.$vtScrollBar)throw new Error("Cannot create scrollbar from "+a);h.$vtScrollBar.setScrollPane(h,!0),h.$owner.$rootContainer.addChild(h.$vtScrollBar.displayObject)}if(2==h.$scrollType||0==h.$scrollType)if(a=o||f.UIConfig.horizontalScrollBar){if(h.$hzScrollBar=f.UIPackage.createObjectFromURL(a),!h.$hzScrollBar)throw new Error("Cannot create scrollbar from "+a);h.$hzScrollBar.setScrollPane(h,!1),h.$owner.$rootContainer.addChild(h.$hzScrollBar.displayObject)}h.$scrollBarDisplayAuto=2==n,h.$scrollBarDisplayAuto&&(h.$scrollBarVisible=!1,h.$vtScrollBar&&(h.$vtScrollBar.displayObject.visible=!1),h.$hzScrollBar&&(h.$hzScrollBar.displayObject.visible=!1))}return h.$contentWidth=0,h.$contentHeight=0,h.setSize(t.width,t.height),h.$owner.on(f.InteractiveEvents.Over,h.$rollOver,h),h.$owner.on(f.InteractiveEvents.Out,h.$rollOut,h),h.$owner.on(f.InteractiveEvents.Down,h.$mouseDown,h),h.$owner.$rootContainer.on("added",h.$ownerAdded,h),h.$owner.$rootContainer.on("removed",h.$ownerRemoved,h),h}return __extends(d,l),d.prototype.$ownerAdded=function(t){this.$onStage=!0},d.prototype.$ownerRemoved=function(t){this.$onStage=!1},Object.defineProperty(d.prototype,"owner",{get:function(){return this.$owner},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"bouncebackEffect",{get:function(){return this.$bouncebackEffect},set:function(t){this.$bouncebackEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"touchEffect",{get:function(){return this.$touchEffect},set:function(t){this.$touchEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"scrollSpeed",{get:function(){return this.$scrollSpeed},set:function(t){this.$scrollSpeed=this.scrollSpeed,0==this.$scrollSpeed&&(this.$scrollSpeed=f.UIConfig.defaultScrollSpeed),this.$mouseWheelSpeed=2*this.$scrollSpeed},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"snapToItem",{get:function(){return this.$snapToItem},set:function(t){this.$snapToItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"percX",{get:function(){return this.$xPerc},set:function(t){this.setPercX(t,!1)},enumerable:!0,configurable:!0}),d.prototype.setPercX=function(t,e){void 0===e&&(e=!1),this.$owner.ensureBoundsCorrect(),(t=f.utils.NumberUtil.clamp01(t))!=this.$xPerc&&(this.$xPerc=t,this.$xPos=this.$xPerc*this.$xOverlap,this.posChanged(e))},Object.defineProperty(d.prototype,"percY",{get:function(){return this.$yPerc},set:function(t){this.setPercY(t,!1)},enumerable:!0,configurable:!0}),d.prototype.setPercY=function(t,e){void 0===e&&(e=!1),this.$owner.ensureBoundsCorrect(),(t=f.utils.NumberUtil.clamp01(t))!=this.$yPerc&&(this.$yPerc=t,this.$yPos=this.$yPerc*this.$yOverlap,this.posChanged(e))},Object.defineProperty(d.prototype,"posX",{get:function(){return this.$xPos},set:function(t){this.setPosX(t,!1)},enumerable:!0,configurable:!0}),d.prototype.setPosX=function(t,e){void 0===e&&(e=!1),this.$owner.ensureBoundsCorrect(),(t=f.utils.NumberUtil.clamp(t,0,this.$xOverlap))!=this.$xPos&&(this.$xPos=t,this.$xPerc=0==this.$xOverlap?0:this.$xPos/this.$xOverlap,this.posChanged(e))},Object.defineProperty(d.prototype,"posY",{get:function(){return this.$yPos},set:function(t){this.setPosY(t,!1)},enumerable:!0,configurable:!0}),d.prototype.setPosY=function(t,e){void 0===e&&(e=!1),this.$owner.ensureBoundsCorrect(),(t=f.utils.NumberUtil.clamp(t,0,this.$yOverlap))!=this.$yPos&&(this.$yPos=t,this.$yPerc=0==this.$yOverlap?0:this.$yPos/this.$yOverlap,this.posChanged(e))},Object.defineProperty(d.prototype,"isBottomMost",{get:function(){return 1==this.$yPerc||0==this.$yOverlap},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"isRightMost",{get:function(){return 1==this.$xPerc||0==this.$xOverlap},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"currentPageX",{get:function(){return this.$pageMode?Math.floor(this.posX/this.$pageSizeH):0},set:function(t){this.$pageMode&&0<this.$xOverlap&&this.setPosX(t*this.$pageSizeH,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"currentPageY",{get:function(){return this.$pageMode?Math.floor(this.posY/this.$pageSizeV):0},set:function(t){this.$pageMode&&0<this.$yOverlap&&this.setPosY(t*this.$pageSizeV,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"scrollingPosX",{get:function(){return f.utils.NumberUtil.clamp(-this.$container.x,0,this.$xOverlap)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"scrollingPosY",{get:function(){return f.utils.NumberUtil.clamp(-this.$container.y,0,this.$yOverlap)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"contentWidth",{get:function(){return this.$contentWidth},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"contentHeight",{get:function(){return this.$contentHeight},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"viewWidth",{get:function(){return this.$viewWidth},set:function(t){t=t+this.$owner.margin.left+this.$owner.margin.right,null!=this.$vtScrollBar&&(t+=this.$vtScrollBar.width),this.$owner.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"viewHeight",{get:function(){return this.$viewHeight},set:function(t){t=t+this.$owner.margin.top+this.$owner.margin.bottom,null!=this.$hzScrollBar&&(t+=this.$hzScrollBar.height),this.$owner.height=t},enumerable:!0,configurable:!0}),d.prototype.getDeltaX=function(t){return t/(this.$contentWidth-this.$viewWidth)},d.prototype.getDeltaY=function(t){return t/(this.$contentHeight-this.$viewHeight)},d.prototype.scrollTop=function(t){void 0===t&&(t=!1),this.setPercY(0,t)},d.prototype.scrollBottom=function(t){void 0===t&&(t=!1),this.setPercY(1,t)},d.prototype.scrollUp=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercY(this.$yPerc-this.getDeltaY(this.$scrollSpeed*t),e)},d.prototype.scrollDown=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercY(this.$yPerc+this.getDeltaY(this.$scrollSpeed*t),e)},d.prototype.scrollLeft=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercX(this.$xPerc-this.getDeltaX(this.$scrollSpeed*t),e)},d.prototype.scrollRight=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercX(this.$xPerc+this.getDeltaX(this.$scrollSpeed*t),e)},d.prototype.scrollToView=function(t,e,i){var n;if(void 0===e&&(e=!1),void 0===i&&(i=!1),this.$owner.ensureBoundsCorrect(),this.$needRefresh&&this.refresh(),t instanceof f.GObject?t.parent!=this.$owner?(t.parent.localToGlobalRect(t.x,t.y,t.width,t.height,d.sHelperRect),n=this.$owner.globalToLocalRect(d.sHelperRect.x,d.sHelperRect.y,d.sHelperRect.width,d.sHelperRect.height,d.sHelperRect)):((n=d.sHelperRect).x=t.x,n.y=t.y,n.width=t.width,n.height=t.height):n=t,0<this.$yOverlap){var s=this.posY,r=s+this.$viewHeight;i||n.y<s||n.height>=this.$viewHeight?this.$pageMode?this.setPosY(Math.floor(n.y/this.$pageSizeV)*this.$pageSizeV,e):this.setPosY(n.y,e):n.y+n.height>r&&(this.$pageMode?this.setPosY(Math.floor(n.y/this.$pageSizeV)*this.$pageSizeV,e):n.height<=this.$viewHeight/2?this.setPosY(n.y+2*n.height-this.$viewHeight,e):this.setPosY(n.y+n.height-this.$viewHeight,e))}if(0<this.$xOverlap){var o=this.posX,h=o+this.$viewWidth;i||n.x<o||n.width>=this.$viewWidth?this.$pageMode?this.setPosX(Math.floor(n.x/this.$pageSizeH)*this.$pageSizeH,e):this.setPosX(n.x,e):n.x+n.width>h&&(this.$pageMode?this.setPosX(Math.floor(n.x/this.$pageSizeH)*this.$pageSizeH,e):n.width<=this.$viewWidth/2?this.setPosX(n.x+2*n.width-this.$viewWidth,e):this.setPosX(n.x+n.width-this.$viewWidth,e))}!e&&this.$needRefresh&&this.refresh()},d.prototype.isChildInView=function(t){var e;return!(0<this.$yOverlap&&((e=t.y+this.$container.y)<-t.height-20||e>this.$viewHeight+20))&&!(0<this.$xOverlap&&((e=t.x+this.$container.x)<-t.width-20||e>this.$viewWidth+20))},d.prototype.cancelDragging=function(){var t=f.GRoot.inst.nativeStage;t.off(f.InteractiveEvents.Move,this.$touchMove,this),t.off(f.InteractiveEvents.Up,this.$touchEnd,this),t.off(f.InteractiveEvents.Click,this.$touchTap,this),d.draggingPane==this&&(d.draggingPane=null),d.$gestureFlag=0,this.$isDragged=!1,this.$maskContainer.interactiveChildren=!0},d.prototype.onOwnerSizeChanged=function(){this.setSize(this.$owner.width,this.$owner.height),this.posChanged(!1)},d.prototype.adjustMaskContainer=function(){var t,e;t=this.$displayOnLeft&&null!=this.$vtScrollBar?Math.floor(this.$owner.margin.left+this.$vtScrollBar.width):Math.floor(this.$owner.margin.left),e=Math.floor(this.$owner.margin.top),t+=this.$owner.$alignOffset.x,e+=this.$owner.$alignOffset.y,this.$maskContainer.x=t,this.$maskContainer.y=e},d.prototype.setSize=function(t,e){this.adjustMaskContainer(),this.$hzScrollBar&&(this.$hzScrollBar.y=e-this.$hzScrollBar.height,this.$vtScrollBar&&!this.$vScrollNone?(this.$hzScrollBar.width=t-this.$vtScrollBar.width-this.$scrollBarMargin.left-this.$scrollBarMargin.right,this.$displayOnLeft?this.$hzScrollBar.x=this.$scrollBarMargin.left+this.$vtScrollBar.width:this.$hzScrollBar.x=this.$scrollBarMargin.left):(this.$hzScrollBar.width=t-this.$scrollBarMargin.left-this.$scrollBarMargin.right,this.$hzScrollBar.x=this.$scrollBarMargin.left)),this.$vtScrollBar&&(this.$displayOnLeft||(this.$vtScrollBar.x=t-this.$vtScrollBar.width),this.$hzScrollBar?this.$vtScrollBar.height=e-this.$hzScrollBar.height-this.$scrollBarMargin.top-this.$scrollBarMargin.bottom:this.$vtScrollBar.height=e-this.$scrollBarMargin.top-this.$scrollBarMargin.bottom,this.$vtScrollBar.y=this.$scrollBarMargin.top),this.$viewWidth=t,this.$viewHeight=e,this.$hzScrollBar&&!this.$hScrollNone&&(this.$viewHeight-=this.$hzScrollBar.height),this.$vtScrollBar&&!this.$vScrollNone&&(this.$viewWidth-=this.$vtScrollBar.width),this.$viewWidth-=this.$owner.margin.left+this.$owner.margin.right,this.$viewHeight-=this.$owner.margin.top+this.$owner.margin.bottom,this.$viewWidth=Math.max(1,this.$viewWidth),this.$viewHeight=Math.max(1,this.$viewHeight),this.$pageSizeH=this.$viewWidth,this.$pageSizeV=this.$viewHeight,this.handleSizeChanged()},d.prototype.setContentSize=function(t,e){this.$contentWidth==t&&this.$contentHeight==e||(this.$contentWidth=t,this.$contentHeight=e,this.handleSizeChanged())},d.prototype.changeContentSizeOnScrolling=function(t,e,i,n){if(this.$contentWidth+=t,this.$contentHeight+=e,this.$isDragged){0!=i&&(this.$container.x-=i),0!=n&&(this.$container.y-=n),this.validateHolderPos(),this.$xOffset+=i,this.$yOffset+=n;var s=this.$y2-this.$y1;this.$y1=this.$container.y,this.$y2=this.$y1+s,s=this.$x2-this.$x1,this.$x1=this.$container.x,this.$x2=this.$x1+s,this.$yPos=-this.$container.y,this.$xPos=-this.$container.x}else 2==this.$tweening&&(0!=i&&(this.$container.x-=i,this.$throwTween.start.x-=i),0!=n&&(this.$container.y-=n,this.$throwTween.start.y-=n));this.handleSizeChanged(!0)},d.prototype.handleSizeChanged=function(t){void 0===t&&(t=!1),this.$displayOnDemand&&(this.$vtScrollBar&&(this.$contentHeight<=this.$viewHeight?this.$vScrollNone||(this.$vScrollNone=!0,this.$viewWidth+=this.$vtScrollBar.width):this.$vScrollNone&&(this.$vScrollNone=!1,this.$viewWidth-=this.$vtScrollBar.width)),this.$hzScrollBar&&(this.$contentWidth<=this.$viewWidth?this.$hScrollNone||(this.$hScrollNone=!0,this.$viewHeight+=this.$hzScrollBar.height):this.$hScrollNone&&(this.$hScrollNone=!1,this.$viewHeight-=this.$hzScrollBar.height))),this.$vtScrollBar&&(this.$viewHeight<this.$vtScrollBar.minSize?this.$vtScrollBar.displayObject.visible=!1:(this.$vtScrollBar.displayObject.visible=this.$scrollBarVisible&&!this.$vScrollNone,0==this.$contentHeight?this.$vtScrollBar.displayPerc=0:this.$vtScrollBar.displayPerc=Math.min(1,this.$viewHeight/this.$contentHeight))),this.$hzScrollBar&&(this.$viewWidth<this.$hzScrollBar.minSize?this.$hzScrollBar.displayObject.visible=!1:(this.$hzScrollBar.displayObject.visible=this.$scrollBarVisible&&!this.$hScrollNone,0==this.$contentWidth?this.$hzScrollBar.displayPerc=0:this.$hzScrollBar.displayPerc=Math.min(1,this.$viewWidth/this.$contentWidth)));var e=this.$maskContainer.scrollRect;null!=e&&(e.x=e.y=0,e.width=this.$viewWidth,e.height=this.$viewHeight,this.$maskContainer.scrollRect=e),0==this.$scrollType||2==this.$scrollType?this.$xOverlap=Math.ceil(Math.max(0,this.$contentWidth-this.$viewWidth)):this.$xOverlap=0,1==this.$scrollType||2==this.$scrollType?this.$yOverlap=Math.ceil(Math.max(0,this.$contentHeight-this.$viewHeight)):this.$yOverlap=0,0==this.$tweening&&t?(0!=this.$xPerc&&1!=this.$xPerc||(this.$xPos=this.$xPerc*this.$xOverlap,this.$container.x=-this.$xPos),0!=this.$yPerc&&1!=this.$yPerc||(this.$yPos=this.$yPerc*this.$yOverlap,this.$container.y=-this.$yPos)):(this.$xPos=f.utils.NumberUtil.clamp(this.$xPos,0,this.$xOverlap),this.$xPerc=0<this.$xOverlap?this.$xPos/this.$xOverlap:0,this.$yPos=f.utils.NumberUtil.clamp(this.$yPos,0,this.$yOverlap),this.$yPerc=0<this.$yOverlap?this.$yPos/this.$yOverlap:0),this.validateHolderPos(),null!=this.$vtScrollBar&&(this.$vtScrollBar.scrollPerc=this.$yPerc),null!=this.$hzScrollBar&&(this.$hzScrollBar.scrollPerc=this.$xPerc)},d.prototype.validateHolderPos=function(){this.$container.x=f.utils.NumberUtil.clamp(this.$container.x,-this.$xOverlap,0),this.$container.y=f.utils.NumberUtil.clamp(this.$container.y,-this.$yOverlap,0)},d.prototype.posChanged=function(t){0==this.$aniFlag?this.$aniFlag=t?1:-1:1!=this.$aniFlag||t||(this.$aniFlag=-1),this.$needRefresh=!0,f.GTimer.inst.callLater(this.refresh,this),2==this.$tweening&&this.killTween()},d.prototype.killTween=function(){1==this.$tweening?(this.$tweener.setPaused(!0),this.$tweening=0,this.$tweener=null,this.syncScrollBar(!0)):2==this.$tweening&&(this.$tweener.setPaused(!0),this.$tweener=null,this.$tweening=0,this.validateHolderPos(),this.syncScrollBar(!0),this.emit("__scrollEnd",this))},d.prototype.refresh=function(){if(this.$needRefresh=!1,f.GTimer.inst.remove(this.refresh,this),this.$pageMode){var t=void 0;0<this.$yOverlap&&1!=this.$yPerc&&0!=this.$yPerc&&(t=Math.floor(this.$yPos/this.$pageSizeV),this.$yPos-t*this.$pageSizeV>this.$pageSizeV/2&&t++,this.$yPos=t*this.$pageSizeV,this.$yPos>this.$yOverlap?(this.$yPos=this.$yOverlap,this.$yPerc=1):this.$yPerc=this.$yPos/this.$yOverlap),0<this.$xOverlap&&1!=this.$xPerc&&0!=this.$xPerc&&(t=Math.floor(this.$xPos/this.$pageSizeH),this.$xPos-t*this.$pageSizeH>this.$pageSizeH/2&&t++,this.$xPos=t*this.$pageSizeH,this.$xPos>this.$xOverlap?(this.$xPos=this.$xOverlap,this.$xPerc=1):this.$xPerc=this.$xPos/this.$xOverlap)}else if(this.$snapToItem){var e=this.$owner.getSnappingPosition(1==this.$xPerc?0:this.$xPos,1==this.$yPerc?0:this.$yPos,d.sHelperPoint);1!=this.$xPerc&&e.x!=this.$xPos&&(this.$xPos=e.x,this.$xPerc=this.$xPos/this.$xOverlap,1<this.$xPerc&&(this.$xPerc=1,this.$xPos=this.$xOverlap)),1!=this.$yPerc&&e.y!=this.$yPos&&(this.$yPos=e.y,this.$yPerc=this.$yPos/this.$yOverlap,1<this.$yPerc&&(this.$yPerc=1,this.$yPos=this.$yOverlap))}this.refresh2(),this.emit("__scroll",this),this.$needRefresh&&(this.$needRefresh=!1,f.GTimer.inst.remove(this.refresh,this),this.refresh2()),this.$aniFlag=0},d.prototype.refresh2=function(){var t=Math.floor(this.$xPos),e=Math.floor(this.$yPos);if(1!=this.$aniFlag||this.$isDragged)null!=this.$tweener&&this.killTween(),this.$isDragged&&(this.$xOffset+=this.$container.x- -t,this.$yOffset+=this.$container.y- -e),this.$container.y=-e,this.$container.x=-t,this.$isDragged&&(this.$y1=this.$y2=this.$container.y,this.$x1=this.$x2=this.$container.x),this.$vtScrollBar&&(this.$vtScrollBar.scrollPerc=this.$yPerc),this.$hzScrollBar&&(this.$hzScrollBar.scrollPerc=this.$xPerc);else{var i=this.$container.x,n=this.$container.y;0<this.$yOverlap?n=-e:0!=this.$container.y&&(this.$container.y=0),0<this.$xOverlap?i=-t:0!=this.$container.x&&(this.$container.x=0),i==this.$container.x&&n==this.$container.y||(null!=this.$tweener&&this.killTween(),this.$tweening=1,this.$maskContainer.interactiveChildren=!1,this.$tweener=createjs.Tween.get(this.$container,{onChange:f.utils.Binder.create(this.$tweenUpdate,this)}).to({x:i,y:n},500,d.$easeTypeFunc).call(this.$tweenComplete,null,this))}},d.prototype.syncPos=function(){0<this.$xOverlap&&(this.$xPos=f.utils.NumberUtil.clamp(-this.$container.x,0,this.$xOverlap),this.$xPerc=this.$xPos/this.$xOverlap),0<this.$yOverlap&&(this.$yPos=f.utils.NumberUtil.clamp(-this.$container.y,0,this.$yOverlap),this.$yPerc=this.$yPos/this.$yOverlap)},d.prototype.syncScrollBar=function(t){void 0===t&&(t=!1),t?(this.$vtScrollBar&&this.$scrollBarDisplayAuto&&this.showScrollBar(!1),this.$hzScrollBar&&this.$scrollBarDisplayAuto&&this.showScrollBar(!1),this.$maskContainer.interactiveChildren=!0):(this.$vtScrollBar&&(this.$vtScrollBar.scrollPerc=0==this.$yOverlap?0:f.utils.NumberUtil.clamp(-this.$container.y,0,this.$yOverlap)/this.$yOverlap,this.$scrollBarDisplayAuto&&this.showScrollBar(!0)),this.$hzScrollBar&&(this.$hzScrollBar.scrollPerc=0==this.$xOverlap?0:f.utils.NumberUtil.clamp(-this.$container.x,0,this.$xOverlap)/this.$xOverlap,this.$scrollBarDisplayAuto&&this.showScrollBar(!0)))},d.prototype.$mouseDown=function(t){if(this.$touchEffect){null!=this.$tweener&&this.killTween(),d.sHelperPoint=t.data.getLocalPosition(this.$maskContainer,d.sHelperPoint),this.$x1=this.$x2=this.$container.x,this.$y1=this.$y2=this.$container.y,this.$xOffset=d.sHelperPoint.x-this.$container.x,this.$yOffset=d.sHelperPoint.y-this.$container.y,this.$time1=this.$time2=Date.now(),this.$holdAreaPoint.x=d.sHelperPoint.x,this.$holdAreaPoint.y=d.sHelperPoint.y,this.$isHoldAreaDone=!1,this.$isDragged=!1;var e=f.GRoot.inst.nativeStage;e.on(f.InteractiveEvents.Move,this.$touchMove,this),e.on(f.InteractiveEvents.Up,this.$touchEnd,this),e.on(f.InteractiveEvents.Click,this.$touchTap,this)}},d.prototype.$touchMove=function(t){if(this.$onStage&&this.$owner.finalVisible&&this.$touchEffect&&(null==d.draggingPane||d.draggingPane==this)&&null==f.GObject.draggingObject){var e,i,n,s,r=f.UIConfig.touchScrollSensitivity,o=t.data.getLocalPosition(this.$maskContainer,d.sHelperPoint);if(1==this.$scrollType){if(!this.$isHoldAreaDone){if(d.$gestureFlag|=1,(e=Math.abs(this.$holdAreaPoint.y-o.y))<r)return;if(0!=(2&d.$gestureFlag)&&e<Math.abs(this.$holdAreaPoint.x-o.x))return}i=!0}else if(0==this.$scrollType){if(!this.$isHoldAreaDone){if(d.$gestureFlag|=2,(e=Math.abs(this.$holdAreaPoint.x-o.x))<r)return;if(0!=(1&d.$gestureFlag)&&e<Math.abs(this.$holdAreaPoint.y-o.y))return}n=!0}else{if(d.$gestureFlag=3,!this.$isHoldAreaDone&&(e=Math.abs(this.$holdAreaPoint.y-o.y))<r&&(e=Math.abs(this.$holdAreaPoint.x-o.x))<r)return;i=n=!0}var h=Date.now();if(50<h-this.$time2&&(this.$time2=this.$time1,this.$time1=h,s=!0),i){var a=Math.floor(d.sHelperPoint.y-this.$yOffset);0<a?!this.$bouncebackEffect||this.$inertiaDisabled?this.$container.y=0:this.$container.y=Math.floor(.5*a):a<-this.$yOverlap||this.$inertiaDisabled?this.$bouncebackEffect?this.$container.y=Math.floor(.5*(a-this.$yOverlap)):this.$container.y=-Math.floor(this.$yOverlap):this.$container.y=a,s&&(this.$y2=this.$y1,this.$y1=this.$container.y)}if(n){var l=Math.floor(d.sHelperPoint.x-this.$xOffset);0<l?!this.$bouncebackEffect||this.$inertiaDisabled?this.$container.x=0:this.$container.x=Math.floor(.5*l):l<0-this.$xOverlap||this.$inertiaDisabled?this.$bouncebackEffect?this.$container.x=Math.floor(.5*(l-this.$xOverlap)):this.$container.x=-Math.floor(this.$xOverlap):this.$container.x=l,s&&(this.$x2=this.$x1,this.$x1=this.$container.x)}(d.draggingPane=this).$maskContainer.interactiveChildren=!1,this.$isHoldAreaDone=!0,this.$isDragged=!0,this.syncPos(),this.syncScrollBar(),this.emit("__scroll",this)}},d.prototype.$touchEnd=function(t){var e=f.GRoot.inst.nativeStage;if(e.off(f.InteractiveEvents.Move,this.$touchMove,this),e.off(f.InteractiveEvents.Up,this.$touchEnd,this),e.off(f.InteractiveEvents.Click,this.$touchTap,this),d.draggingPane==this&&(d.draggingPane=null),d.$gestureFlag=0,this.$isDragged&&this.$touchEffect&&!this.$inertiaDisabled&&this.$owner.onStage){var i=(Date.now()-this.$time2)/1e3;0==i&&(i=.001);var n=(this.$container.y-this.$y2)/i*2*f.UIConfig.defaultTouchScrollSpeedRatio,s=(this.$container.x-this.$x2)/i*2*f.UIConfig.defaultTouchScrollSpeedRatio;this.$throwTween.start.x=this.$container.x,this.$throwTween.start.y=this.$container.y;var r,o=this.$throwTween.change1,h=this.$throwTween.change2,a=0,l=0,c=0,u=0,p=0;if(2==this.$scrollType||0==this.$scrollType?(this.$container.x>f.UIConfig.touchDragSensitivity?p=1:this.$container.x<-this.$xOverlap-f.UIConfig.touchDragSensitivity&&(p=2),o.x=g.calculateChange(s,.3),h.x=0,a=this.$container.x+o.x,this.$pageMode&&a<0&&a>-this.$xOverlap&&(c=Math.floor(-a/this.$pageSizeH),r=Math.min(this.$pageSizeH,this.$contentWidth-(c+1)*this.$pageSizeH),u=-a-c*this.$pageSizeH,Math.abs(o.x)>this.$pageSizeH?.5*r<u&&c++:u>r*(o.x<0?.3:.7)&&c++,(a=-c*this.$pageSizeH)<-this.$xOverlap&&(a=-this.$xOverlap),o.x=a-this.$container.x)):o.x=h.x=0,2==this.$scrollType||1==this.$scrollType?(this.$container.y>f.UIConfig.touchDragSensitivity?p=1:this.$container.y<-this.$yOverlap-f.UIConfig.touchDragSensitivity&&(p=2),o.y=g.calculateChange(n,.3),h.y=0,l=this.$container.y+o.y,this.$pageMode&&l<0&&l>-this.$yOverlap&&(c=Math.floor(-l/this.$pageSizeV),r=Math.min(this.$pageSizeV,this.$contentHeight-(c+1)*this.$pageSizeV),u=-l-c*this.$pageSizeV,Math.abs(o.y)>this.$pageSizeV?.5*r<u&&c++:u>r*(o.y<0?.3:.7)&&c++,(l=-c*this.$pageSizeV)<-this.$yOverlap&&(l=-this.$yOverlap),o.y=l-this.$container.y)):o.y=h.y=0,this.$snapToItem&&!this.$pageMode){a=-a,l=-l;var $=this.$owner.getSnappingPosition(a,l,d.sHelperPoint);a=-$.x,l=-$.y,o.x=a-this.$container.x,o.y=l-this.$container.y}this.$bouncebackEffect?(0<a?h.x=0-this.$container.x-o.x:a<-this.$xOverlap&&(h.x=-this.$xOverlap-this.$container.x-o.x),0<l?h.y=0-this.$container.y-o.y:l<-this.$yOverlap&&(h.y=-this.$yOverlap-this.$container.y-o.y)):(0<a?o.x=0-this.$container.x:a<-this.$xOverlap&&(o.x=-this.$xOverlap-this.$container.x),0<l?o.y=0-this.$container.y:l<-this.$yOverlap&&(o.y=-this.$yOverlap-this.$container.y)),this.$throwTween.value=0,this.$throwTween.change1=o,this.$throwTween.change2=h,null!=this.$tweener&&this.killTween(),this.$tweening=2,this.$tweener=createjs.Tween.get(this.$throwTween,{onChange:f.utils.Binder.create(this.$tweenUpdate2,this)}).to({value:1},300,d.$easeTypeFunc).call(this.$tweenComplete2,null,this),1==p?this.emit("__pullDownRelease",this):2==p&&this.emit("__pullUpRelease",this)}},d.prototype.$touchTap=function(t){this.$isDragged=!1},d.prototype.$rollOver=function(t){this.showScrollBar(!0)},d.prototype.$rollOut=function(t){this.showScrollBar(!1)},d.prototype.dispose=function(){f.GTimer.inst.remove(this.refresh,this),f.GTimer.inst.remove(this.setScrollBarVisible,this),createjs.Tween.removeTweens(this.$throwTween),createjs.Tween.removeTweens(this.$container),this.$tweener&&(this.$tweener.removeAllEventListeners(),this.$tweener=null),this.$owner.$rootContainer.off("added",this.$ownerAdded,this),this.$owner.$rootContainer.off("removed",this.$ownerRemoved,this),this.$owner.off(f.InteractiveEvents.Over,this.$rollOver,this),this.$owner.off(f.InteractiveEvents.Out,this.$rollOut,this),this.$owner.off(f.InteractiveEvents.Down,this.$mouseDown,this);var t=f.GRoot.inst.nativeStage;t.off(f.InteractiveEvents.Move,this.$touchMove,this),t.off(f.InteractiveEvents.Up,this.$touchEnd,this),t.off(f.InteractiveEvents.Click,this.$touchTap,this)},d.prototype.showScrollBar=function(t){t?(this.setScrollBarVisible(!0),f.GTimer.inst.remove(this.setScrollBarVisible,this)):f.GTimer.inst.add(500,1,this.setScrollBarVisible,this,t)},d.prototype.setScrollBarVisible=function(t){this.$scrollBarVisible=t&&0<this.$viewWidth&&0<this.$viewHeight,this.$vtScrollBar&&(this.$vtScrollBar.displayObject.visible=this.$scrollBarVisible&&!this.$vScrollNone),this.$hzScrollBar&&(this.$hzScrollBar.displayObject.visible=this.$scrollBarVisible&&!this.$hScrollNone)},d.prototype.$tweenUpdate=function(){this.syncScrollBar(),this.emit("__scroll",this)},d.prototype.$tweenComplete=function(){this.$tweening=0,this.$tweener=null,this.validateHolderPos(),this.syncScrollBar(!0),this.emit("__scroll",this)},d.prototype.$tweenUpdate2=function(){this.$throwTween.update(this.$container),this.syncPos(),this.syncScrollBar(),this.emit("__scroll",this)},d.prototype.$tweenComplete2=function(){this.$tweening=0,this.$tweener=null,this.validateHolderPos(),this.syncPos(),this.syncScrollBar(!0),this.emit("__scroll",this),this.emit("__scrollEnd",this)},d.$gestureFlag=0,d.sHelperRect=new PIXI.Rectangle,d.sHelperPoint=new PIXI.Point,d}(PIXI.utils.EventEmitter);f.ScrollPane=t;var g=function(){function i(){this.start=new PIXI.Point,this.change1=new PIXI.Point,this.change2=new PIXI.Point}return i.prototype.update=function(t){t.x=Math.floor(this.start.x+this.change1.x*this.value+this.change2.x*this.value*this.value),t.y=Math.floor(this.start.y+this.change1.y*this.value+this.change2.y*this.value*this.value)},i.calculateChange=function(t,e){return e*i.checkpoint*t/i.easeOutCubic(i.checkpoint,0,1,1)},i.easeOutCubic=function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},i.checkpoint=.05,i}()}(fgui||(fgui={})),function(r){var t=function(){function h(t){this.autoPlayRepeat=1,this.autoPlayDelay=0,this.$ownerBaseX=0,this.$ownerBaseY=0,this.$totalTimes=0,this.$totalTasks=0,this.$playing=!1,this.$options=0,this.$maxTime=0,this.$owner=t,this.$items=[],this.$owner.on("__visibleChanged",this.$ownerVisibleChanged,this)}return h.prototype.$ownerVisibleChanged=function(t,e){0==(this.$options&h.OPTION_AUTO_STOP_DISABLED)&&!1===t&&this.stop(0!=(this.$options&h.OPTION_AUTO_STOP_AT_END),!1)},Object.defineProperty(h.prototype,"autoPlay",{get:function(){return this.$autoPlay},set:function(t){this.$autoPlay!=t&&(this.$autoPlay=t,this.$autoPlay?this.$owner.onStage&&this.play({times:this.autoPlayRepeat,delay:this.autoPlayDelay}):this.$owner.onStage||this.stop(!1,!0))},enumerable:!0,configurable:!0}),h.prototype.changeRepeat=function(t){this.$totalTimes=0|t},h.prototype.play=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length&&"object"==typeof t[0]){var i=t[0];this.$play(i.onComplete,i.onCompleteObj,i.onCompleteParam,i.times||1,i.delay||0,!1)}else this.$play(t[0],t[1],t[2],t[3]||1,t[4]||0,!1)},h.prototype.playReverse=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length&&"object"==typeof t[0]){var i=t[0];this.$play(i.onComplete,i.onCompleteObj,i.onCompleteParam,i.times||1,i.delay||0,!0)}else this.$play(t[0],t[1],t[2],t[3]||1,t[4]||0,!0)},h.prototype.$play=function(t,e,i,n,s,r){var o=this;void 0===r&&(r=!1),this.stop(),0==n?n=1:-1==n&&(n=Number.MAX_VALUE),this.$totalTimes=n,this.$reversed=r,this.internalPlay(s),this.$playing=0<this.$totalTasks,this.$playing?(this.$onComplete=t,this.$onCompleteParam=i,this.$onCompleteObj=e,0!=(this.$options&h.OPTION_IGNORE_DISPLAY_CONTROLLER)&&this.$items.forEach(function(t){null!=t.target&&t.target!=o.$owner&&(t.lockToken=t.target.lockGearDisplay())},this)):null!=t&&(i&&i.length?t.apply(e,i):t.call(e,i))},h.prototype.stop=function(t,e){if(void 0===t&&(t=!0),void 0===e&&(e=!1),this.$playing){this.$playing=!1,this.$totalTasks=0,this.$totalTimes=0;var i=this.$onComplete,n=this.$onCompleteParam,s=this.$onCompleteObj;this.$onComplete=null,this.$onCompleteParam=null,this.$onCompleteObj=null;var r=this.$items.length,o=void 0;if(this.$reversed)for(var h=r-1;0<=h;h--)null!=(o=this.$items[h]).target&&this.stopItem(o,t);else for(h=0;h<r;h++)null!=(o=this.$items[h]).target&&this.stopItem(o,t);e&&null!=i&&(n&&0<n.length?i.apply(s,n):i.call(s,n))}},h.prototype.stopItem=function(t,e){if(0!=t.lockToken&&(t.target.releaseGearDisplay(t.lockToken),t.lockToken=0),12==t.type&&t.filterCreated&&(t.target.filters=null),!t.completed)if(this.disposeTween(t),10==t.type){var i=t.target.getTransition(t.value.s);null!=i&&i.stop(e,!1)}else 11==t.type?(r.GTimer.inst.remove(t.$shake,t),t.target.$gearLocked=!0,t.target.setXY(t.target.x-t.startValue.f1,t.target.y-t.startValue.f2),t.target.$gearLocked=!1):e&&(t.tween?t.yoyo&&t.repeat%2!=0?this.applyValue(t,this.$reversed?t.endValue:t.startValue):this.applyValue(t,this.$reversed?t.startValue:t.endValue):9!=t.type&&this.applyValue(t,t.value))},h.prototype.dispose=function(){var i=this;r.GTimer.inst.remove(this.internalPlay,this),this.$owner.off("__visibleChanged",this.$ownerVisibleChanged,this),this.$playing=!1,this.$items.forEach(function(t){if(null!=t.target&&!t.completed)if(i.disposeTween(t),10==t.type){var e=t.target.getTransition(t.value.s);null!=e&&e.dispose()}else 11==t.type&&r.GTimer.inst.remove(t.$shake,t)},this)},Object.defineProperty(h.prototype,"playing",{get:function(){return this.$playing},enumerable:!0,configurable:!0}),h.prototype.setValue=function(i){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];this.$items.forEach(function(t){if(null!=t.label||null!=t.label2){var e;if(t.label==i)e=t.tween?t.startValue:t.value;else{if(t.label2!=i)return;e=t.endValue}switch(t.type){case 0:case 1:case 3:case 2:case 13:e.b1=!0,e.b2=!0,e.f1=parseFloat(n[0]),e.f2=parseFloat(n[1]);break;case 4:e.f1=parseFloat(n[0]);break;case 5:e.i=parseInt(n[0]);break;case 6:e.c=parseFloat(n[0]);break;case 7:e.i=parseInt(n[0]),1<n.length&&(e.b=n[1]);break;case 8:e.b=n[0];break;case 9:e.s=n[0],1<n.length&&(e.f1=parseFloat(n[1]));break;case 10:e.s=n[0],1<n.length&&(e.i=parseInt(n[1]));break;case 11:e.f1=parseFloat(n[0]),1<n.length&&(e.f2=parseFloat(n[1]));break;case 12:e.f1=parseFloat(n[0]),e.f2=parseFloat(n[1]),e.f3=parseFloat(n[2]),e.f4=parseFloat(n[3])}}},this)},h.prototype.setHook=function(t,e,i){for(var n=this.$items.length,s=0;s<n;s++){var r=this.$items[s];if(r.label==t){r.hook=e,r.hookObj=i;break}if(r.label2==t){r.hook2=e,r.hook2Obj=i;break}}},h.prototype.clearHooks=function(){this.$items.forEach(function(t){t.hook=null,t.hookObj=null,t.hook2=null,t.hook2Obj=null},this)},h.prototype.setTarget=function(e,i){this.$items.forEach(function(t){t.label==e&&(t.targetId=i.id)},this)},h.prototype.setDuration=function(e,i){this.$items.forEach(function(t){t.tween&&t.label==e&&(t.duration=i)},this)},h.prototype.updateFromRelations=function(e,i,n){this.$items.forEach(function(t){0==t.type&&t.targetId==e&&(t.tween?(t.startValue.f1+=i,t.startValue.f2+=n,t.endValue.f1+=i,t.endValue.f2+=n):(t.value.f1+=i,t.value.f2+=n))},this)},h.prototype.internalPlay=function(i){var n=this;void 0===i&&(i=0),this.$ownerBaseX=this.$owner.x,this.$ownerBaseY=this.$owner.y,this.$totalTasks=0,this.$items.forEach(function(t){var e;(t.targetId?t.target=n.$owner.getChildById(t.targetId):t.target=n.$owner,null!=t.target)&&(n.disposeTween(t),t.tween?0<(e=n.$reversed?i+n.$maxTime-t.time-t.duration:i+t.time)?(n.$totalTasks++,t.completed=!1,t.tweener=createjs.Tween.get(t.value).wait(1e3*e).call(n.$delayCall,[t],n)):n.startTween(t):(e=n.$reversed?i+n.$maxTime-t.time:i+t.time)<=0?n.applyValue(t,t.value):(n.$totalTasks++,t.completed=!1,t.tweener=createjs.Tween.get(t.value).wait(1e3*e).call(n.$delayCall2,[t],n)))},this)},h.prototype.prepareValue=function(t,e,i){var n,s;switch(void 0===i&&(i=!1),i?(n=t.endValue,s=t.startValue):(n=t.startValue,s=t.endValue),t.type){case 0:case 1:0==t.type?t.target==this.$owner?(n.b1||(n.f1=0),n.b2||(n.f2=0)):(n.b1||(n.f1=t.target.x),n.b2||(n.f2=t.target.y)):(n.b1||(n.f1=t.target.width),n.b2||(n.f2=t.target.height)),t.value.f1=n.f1,t.value.f2=n.f2,s.b1||(s.f1=t.value.f1),s.b2||(s.f2=t.value.f2),t.value.b1=n.b1||s.b1,t.value.b2=n.b2||s.b2,e.f1=s.f1,e.f2=s.f2;break;case 2:case 13:t.value.f1=n.f1,t.value.f2=n.f2,e.f1=s.f1,e.f2=s.f2;break;case 4:t.value.f1=n.f1,e.f1=s.f1;break;case 5:t.value.i=n.i,e.i=s.i;break;case 12:t.value.f1=n.f1,t.value.f2=n.f2,t.value.f3=n.f3,t.value.f4=n.f4,e.f1=s.f1,e.f2=s.f2,e.f3=s.f3,e.f4=s.f4}},h.prototype.startTween=function(t){var e,i=new s;this.prepareValue(t,i,this.$reversed),this.applyValue(t,t.value),0!=t.repeat?(t.tweenTimes=0,e=r.utils.Binder.create(this.$tweenRepeatComplete,this,t)):e=r.utils.Binder.create(this.$tweenComplete,this,t),this.$totalTasks++,t.completed=!1,this.prepareValue(t,i,this.$reversed),t.tweener=createjs.Tween.get(t.value,{onChange:r.utils.Binder.create(this.$tweenUpdate,this,t)}).to(i,1e3*t.duration,t.easeType).call(e),null!=t.hook&&t.hook.call(t.hookObj)},h.prototype.$delayCall=function(t){this.disposeTween(t),this.$totalTasks--,this.startTween(t)},h.prototype.$delayCall2=function(t){this.disposeTween(t),this.$totalTasks--,t.completed=!0,this.applyValue(t,t.value),null!=t.hook&&t.hook.call(t.hookObj),this.checkAllComplete()},h.prototype.$tweenUpdate=function(t,e){this.applyValue(e,e.value)},h.prototype.$tweenComplete=function(t,e){this.disposeTween(e),this.$totalTasks--,e.completed=!0,null!=e.hook2&&e.hook2.call(e.hook2Obj),this.checkAllComplete()},h.prototype.$tweenRepeatComplete=function(t,e){if(e.tweenTimes++,-1==e.repeat||e.tweenTimes<e.repeat+1){var i=new s,n=void 0;n=e.yoyo?this.$reversed?e.tweenTimes%2==0:e.tweenTimes%2==1:this.$reversed,this.prepareValue(e,i,n),this.disposeTween(e),e.tweener=createjs.Tween.get(e.value,{onChange:r.utils.Binder.create(this.$tweenUpdate,this,e)}).to(i,1e3*e.duration,e.easeType).call(this.$tweenRepeatComplete,[null,e],this)}else this.$tweenComplete(null,e)},h.prototype.disposeTween=function(t){t&&t.tweener&&(t.tweener.setPaused(!0),t.tweener.removeAllEventListeners(),createjs.Tween.removeTweens(t.value),t.tweener=null)},h.prototype.$playTransComplete=function(t){this.disposeTween(t),this.$totalTasks--,t.completed=!0,this.checkAllComplete()},h.prototype.checkAllComplete=function(){var e=this;if(this.$playing&&0==this.$totalTasks)if(this.$totalTimes<0)r.GTimer.inst.callLater(this.internalPlay,this,0);else if(this.$totalTimes--,0<this.$totalTimes)r.GTimer.inst.callLater(this.internalPlay,this,0);else if(this.$playing=!1,this.$items.forEach(function(t){null!=t.target&&(0!=t.lockToken&&(t.target.releaseGearDisplay(t.lockToken),t.lockToken=0),t.filterCreated&&(t.filterCreated=!1,t.target.filters=null),e.disposeTween(t))}),null!=this.$onComplete){var t=this.$onComplete,i=this.$onCompleteParam,n=this.$onCompleteObj;this.$onComplete=null,this.$onCompleteParam=null,this.$onCompleteObj=null,i&&i.length?t.apply(n,i):t.call(n,i)}},h.prototype.applyValue=function(t,e){switch(t.target.$gearLocked=!0,t.type){case 0:if(t.target==this.$owner){var i=0,n=0;i=e.b1?e.f1+this.$ownerBaseX:t.target.x,n=e.b2?e.f2+this.$ownerBaseY:t.target.y,t.target.setXY(i,n)}else e.b1||(e.f1=t.target.x),e.b2||(e.f2=t.target.y),t.target.setXY(e.f1,e.f2);break;case 1:e.b1||(e.f1=t.target.width),e.b2||(e.f2=t.target.height),t.target.setSize(e.f1,e.f2);break;case 3:t.target.setPivot(e.f1,e.f2);break;case 4:t.target.alpha=e.f1;break;case 5:t.target.rotation=e.i;break;case 2:t.target.setScale(e.f1,e.f2);break;case 13:t.target.setSkew(e.f1,e.f2);break;case 6:r.isColorGear(t.target)&&(t.target.color=e.c);break;case 7:r.isAnimationGear(t.target)&&(e.b1||(e.i=t.target.frame),t.target.frame=e.i,t.target.playing=e.b);break;case 8:t.target.visible=e.b;break;case 10:var s=t.target.getTransition(e.s);null!=s&&(0==e.i?s.stop(!1,!0):s.playing?s.$totalTimes=-1==e.i?Number.MAX_VALUE:e.i:(t.completed=!1,this.$totalTasks++,this.$reversed?s.playReverse(this.$playTransComplete,this,t,t.value.i):s.play(this.$playTransComplete,this,t,t.value.i)));break;case 9:break;case 11:t.startValue.f1=0,t.startValue.f2=0,t.startValue.f3=t.value.f2,r.GTimer.inst.add(1,0,t.$shake,t,[this]),this.$totalTasks++,t.completed=!1;break;case 12:t.target.updateColorComponents(e.f1,e.f2,e.f3,e.f4)}t.target.$gearLocked=!1},h.prototype.$shakeItem=function(t,e){var i=Math.ceil(t.value.f1*t.startValue.f3/t.value.f2),n=(2*Math.random()-1)*i,s=(2*Math.random()-1)*i;n=0<n?Math.ceil(n):Math.floor(n),s=0<s?Math.ceil(s):Math.floor(s),t.target.$gearLocked=!0,t.target.setXY(t.target.x-t.startValue.f1+n,t.target.y-t.startValue.f2+s),t.target.$gearLocked=!1,t.startValue.f1=n,t.startValue.f2=s,t.startValue.f3-=e/1e3,t.startValue.f3<=0&&(t.target.$gearLocked=!0,t.target.setXY(t.target.x-t.startValue.f1,t.target.y-t.startValue.f2),t.target.$gearLocked=!1,t.completed=!0,this.$totalTasks--,r.GTimer.inst.remove(t.$shake,t),this.checkAllComplete())},h.prototype.setup=function(t){var n=this;this.name=t.attributes.name;var s=t.attributes.options;s&&(this.$options=parseInt(s)),this.$autoPlay="true"==t.attributes.autoPlay,this.$autoPlay&&((s=t.attributes.autoPlayRepeat)&&(this.autoPlayRepeat=parseInt(s)),(s=t.attributes.autoPlayDelay)&&(this.autoPlayDelay=parseFloat(s))),t.children.forEach(function(t){if("item"==t.nodeName){var e=new o;switch(n.$items.push(e),e.time=parseInt(t.attributes.time)/h.FRAME_RATE,e.targetId=t.attributes.target,s=t.attributes.type){case"XY":e.type=0;break;case"Size":e.type=1;break;case"Scale":e.type=2;break;case"Pivot":e.type=3;break;case"Alpha":e.type=4;break;case"Rotation":e.type=5;break;case"Color":e.type=6;break;case"Animation":e.type=7;break;case"Visible":e.type=8;break;case"Sound":e.type=9;break;case"Transition":e.type=10;break;case"Shake":e.type=11;break;case"ColorFilter":e.type=12;break;case"Skew":e.type=13;break;default:e.type=14}if(e.tween="true"==t.attributes.tween,e.label=t.attributes.label,e.tween){e.duration=parseInt(t.attributes.duration)/h.FRAME_RATE,e.time+e.duration>n.$maxTime&&(n.$maxTime=e.time+e.duration),(s=t.attributes.ease)&&(e.easeType=r.ParseEaseType(s)),(s=t.attributes.repeat)&&(e.repeat=parseInt(s)),e.yoyo="true"==t.attributes.yoyo,e.label2=t.attributes.label2;var i=t.attributes.endValue;i?(n.decodeValue(e.type,t.attributes.startValue,e.startValue),n.decodeValue(e.type,i,e.endValue)):(e.tween=!1,n.decodeValue(e.type,t.attributes.startValue,e.value))}else e.time>n.$maxTime&&(n.$maxTime=e.time),n.decodeValue(e.type,t.attributes.value,e.value)}},this)},h.prototype.decodeValue=function(t,e,i){var n;switch(t){case 0:case 1:case 3:case 13:"-"==(n=e.split(","))[0]?i.b1=!1:(i.f1=parseFloat(n[0]),i.b1=!0),"-"==n[1]?i.b2=!1:(i.f2=parseFloat(n[1]),i.b2=!0);break;case 4:i.f1=parseFloat(e);break;case 5:i.i=parseInt(e);break;case 2:n=e.split(","),i.f1=parseFloat(n[0]),i.f2=parseFloat(n[1]);break;case 6:i.c=r.utils.StringUtil.convertFromHtmlColor(e);break;case 7:"-"==(n=e.split(","))[0]?i.b1=!1:(i.i=parseInt(n[0]),i.b1=!0),i.b="p"==n[1];break;case 8:i.b="true"==e;break;case 9:if(n=e.split(","),i.s=n[0],1<n.length){var s=parseInt(n[1]);i.f1=0==s||100==s?1:s/100}else i.f1=1;break;case 10:n=e.split(","),i.s=n[0],1<n.length?i.i=parseInt(n[1]):i.i=1;break;case 11:n=e.split(","),i.f1=parseFloat(n[0]),i.f2=parseFloat(n[1]);break;case 12:n=e.split(","),i.f1=parseFloat(n[0]),i.f2=parseFloat(n[1]),i.f3=parseFloat(n[2]),i.f4=parseFloat(n[3])}},h.OPTION_IGNORE_DISPLAY_CONTROLLER=1,h.OPTION_AUTO_STOP_DISABLED=0,h.OPTION_AUTO_STOP_AT_END=0,h.FRAME_RATE=24,h}();r.Transition=t;var o=function(){function t(){this.time=0,this.type=0,this.duration=0,this.repeat=0,this.yoyo=!1,this.tween=!1,this.tweenTimes=0,this.completed=!1,this.lockToken=0,this.easeType=r.ParseEaseType("Quad.Out"),this.value=new s,this.startValue=new s,this.endValue=new s}return t.prototype.$shake=function(t,e){t.$shakeItem(this,e)},t}(),s=function(){this.f1=0,this.f2=0,this.f3=0,this.f4=0,this.i=0,this.c=0,this.b=!1,this.b1=!0,this.b2=!0}}(fgui||(fgui={})),function(i){var t=function(e){function t(){var t=e.call(this)||this;return t.$requestingCmd=0,t.focusable=!0,t.$uiSources=[],t.bringToFrontOnClick=i.UIConfig.bringWindowToFrontOnClick,t.on("added",t.$onShown,t),t.on("removed",t.$onHidden,t),t.on(i.InteractiveEvents.Down,t.$mouseDown,t),t}return __extends(t,e),t.prototype.addUISource=function(t){this.$uiSources.push(t)},Object.defineProperty(t.prototype,"contentPane",{get:function(){return this.$contentPane},set:function(t){this.$contentPane!=t&&(null!=this.$contentPane&&this.removeChild(this.$contentPane),this.$contentPane=t,null!=this.$contentPane&&(this.addChild(this.$contentPane),this.setSize(this.$contentPane.width,this.$contentPane.height),this.$contentPane.addRelation(this,24),this.$frame=this.$contentPane.getChild("frame"),null!=this.$frame&&(this.closeButton=this.$frame.getChild("closeButton"),this.dragArea=this.$frame.getChild("dragArea"),this.contentArea=this.$frame.getChild("contentArea"))))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this.$frame},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeButton",{get:function(){return this.$closeButton},set:function(t){null!=this.$closeButton&&this.$closeButton.removeClick(this.closeEventHandler,this),this.$closeButton=t,null!=this.$closeButton&&this.$closeButton.click(this.closeEventHandler,this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragArea",{get:function(){return this.$dragArea},set:function(t){this.$dragArea!=t&&(null!=this.$dragArea&&(this.$dragArea.draggable=!1,this.$dragArea.off("__dragStart",this.$dragStart,this)),this.$dragArea=t,null!=this.$dragArea&&(this.$dragArea instanceof i.GGraph&&this.$dragArea.drawRect(0,0,0,0,0),this.$dragArea.draggable=!0,this.$dragArea.on("__dragStart",this.$dragStart,this)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentArea",{get:function(){return this.$contentArea},set:function(t){this.$contentArea=t},enumerable:!0,configurable:!0}),t.prototype.show=function(){i.GRoot.inst.showWindow(this)},t.prototype.showOn=function(t){t.showWindow(this)},t.prototype.hide=function(){this.isShowing&&this.doHideAnimation()},t.prototype.hideImmediately=function(){(this.parent&&this.parent instanceof i.GRoot?this.parent:i.GRoot.inst).hideWindowImmediately(this)},t.prototype.centerOn=function(t,e){void 0===e&&(e=!1),this.setXY(Math.round(.5*(t.width-this.width)),Math.round(.5*(t.height-this.height))),e&&(this.addRelation(t,3),this.addRelation(t,10))},t.prototype.toggleVisible=function(){this.isTop?this.hide():this.show()},Object.defineProperty(t.prototype,"isShowing",{get:function(){return null!=this.parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTop",{get:function(){return null!=this.parent&&this.parent.getChildIndex(this)==this.parent.numChildren-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modal",{get:function(){return this.$modal},set:function(t){this.$modal=t},enumerable:!0,configurable:!0}),t.prototype.bringToFront=function(){this.root.bringToFront(this)},t.prototype.showModalWait=function(t,e){void 0===e&&(e=0),0!=e&&(this.$requestingCmd=e),i.UIConfig.windowModalWaiting&&(this.$modalWaitPane||(this.$modalWaitPane=i.UIPackage.createObjectFromURL(i.UIConfig.windowModalWaiting)),this.layoutModalWaitPane(t),this.addChild(this.$modalWaitPane))},t.prototype.layoutModalWaitPane=function(t){if(null!=this.$contentArea){var e=this.$frame.localToGlobal();e=this.globalToLocal(e.x,e.y,e),this.$modalWaitPane.setXY(e.x+this.$contentArea.x,e.y+this.$contentArea.y),this.$modalWaitPane.setSize(this.$contentArea.width,this.$contentArea.height),t&&t.length&&(this.$modalWaitPane.text=t)}else this.$modalWaitPane.setSize(this.width,this.height)},t.prototype.closeModalWait=function(t){return void 0===t&&(t=0),(0==t||this.$requestingCmd==t)&&(this.$requestingCmd=0,this.$modalWaitPane&&null!=this.$modalWaitPane.parent&&this.removeChild(this.$modalWaitPane),!0)},Object.defineProperty(t.prototype,"modalWaiting",{get:function(){return this.$modalWaitPane&&null!=this.$modalWaitPane.parent},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.$inited||this.$loading||(0<this.$uiSources.length?(this.$loading=!1,this.$uiSources.forEach(function(t){t.loaded||(t.load(e.$uiLoadComplete,e),e.$loading=!0)},this),this.$loading||this.$init()):this.$init())},t.prototype.onInit=function(){},t.prototype.onShown=function(){},t.prototype.onHide=function(){},t.prototype.doShowAnimation=function(){this.onShown()},t.prototype.doHideAnimation=function(){this.hideImmediately()},t.prototype.$uiLoadComplete=function(){for(var t=this.$uiSources.length,e=0;e<t;e++)if(!this.$uiSources[e].loaded)return;this.$loading=!1,this.$init()},t.prototype.$init=function(){this.$inited=!0,this.onInit(),this.isShowing&&this.doShowAnimation()},t.prototype.dispose=function(){this.off("added",this.$onShown,this),this.off("removed",this.$onHidden,this),this.off(i.InteractiveEvents.Down,this.$mouseDown,this),this.$dragArea&&this.$dragArea.off("__dragStart",this.$dragStart,this),null!=this.parent&&this.hideImmediately(),this.$modalWaitPane&&this.$modalWaitPane.dispose(),this.$contentPane&&this.$contentPane.dispose(),e.prototype.dispose.call(this)},t.prototype.closeEventHandler=function(t){this.hide()},t.prototype.$onShown=function(t){this.$inited?this.doShowAnimation():this.init()},t.prototype.$onHidden=function(t){this.closeModalWait(),this.onHide()},t.prototype.$mouseDown=function(t){this.isShowing&&this.bringToFrontOnClick&&this.bringToFront()},t.prototype.$dragStart=function(t){i.GObject.castFromNativeObject(t.currentTarget).stopDrag(),this.startDrag(t.data.pointerID)},t}(i.GComponent);i.Window=t}(fgui||(fgui={})),function(t){var e=function(){function t(){}return t.defaultFont="Arial",t.modalLayerColor=3355443,t.modalLayerAlpha=.2,t.defaultScrollSpeed=25,t.defaultTouchScrollSpeedRatio=1,t.defaultScrollBarDisplay=1,t.defaultScrollTouchEffect=!0,t.defaultScrollBounceEffect=!0,t.defaultComboBoxVisibleItemCount=10,t.touchScrollSensitivity=20,t.touchDragSensitivity=10,t.bringWindowToFrontOnClick=!0,t}();t.UIConfig=e}(fgui||(fgui={})),function(t){var e,i;e=t.controller||(t.controller={}),i=function(){function t(){}return t.create=function(t){switch(t){case"play_transition":return new e.PlayTransitionAction;case"change_page":return new e.ChangePageAction}return null},t.prototype.execute=function(t,e,i){this.fromPage&&0!=this.fromPage.length&&-1==this.fromPage.indexOf(e)||this.toPage&&0!=this.toPage.length&&-1==this.toPage.indexOf(i)?this.leave(t):this.enter(t)},t.prototype.enter=function(t){},t.prototype.leave=function(t){},t.prototype.setup=function(t){var e;(e=t.attributes.fromPage)&&(this.fromPage=e.split(",")),(e=t.attributes.toPage)&&(this.toPage=e.split(","))},t}(),e.Action=i}(fgui||(fgui={})),function(t){var e,i;e=t.controller||(t.controller={}),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.enter=function(t){var e;if(this.controllerName&&(e=this.objectId?t.parent.getChildById(this.objectId):t.parent)){var i=e.getController(this.controllerName);i&&i!=t&&!i.$updating&&(i.selectedPageId=this.targetPage)}},t.prototype.setup=function(t){e.prototype.setup.call(this,t),this.objectId=t.attributes.objectId,this.controllerName=t.attributes.controller,this.targetPage=t.attributes.targetPage},t}(e.Action),e.ChangePageAction=i}(fgui||(fgui={})),function(t){var l,e;l=t.controller||(t.controller={}),e=function(e){function n(){var t=e.call(this)||this;return t.$selectedIndex=0,t.$previousIndex=0,t.$pageIds=[],t.$pageNames=[],t.$selectedIndex=-1,t.$previousIndex=-1,t}return __extends(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return this.$name},set:function(t){this.$name=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return this.$parent},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedIndex",{get:function(){return this.$selectedIndex},set:function(t){if(this.$selectedIndex!=t){if(t>this.$pageIds.length-1)throw new Error("index out of range: "+t);this.$updating=!0,this.$previousIndex=this.$selectedIndex,this.$selectedIndex=t,this.$parent.applyController(this),this.emit("__stateChanged",this),this.$updating=!1}},enumerable:!0,configurable:!0}),n.prototype.setSelectedIndex=function(t){if(void 0===t&&(t=0),this.$selectedIndex!=t){if(t>this.$pageIds.length-1)throw new Error("index out of range: "+t);this.$updating=!0,this.$previousIndex=this.$selectedIndex,this.$selectedIndex=t,this.$parent.applyController(this),this.$updating=!1}},Object.defineProperty(n.prototype,"previsousIndex",{get:function(){return this.$previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedPage",{get:function(){return-1==this.$selectedIndex?null:this.$pageNames[this.$selectedIndex]},set:function(t){this.selectedIndex=Math.max(0,this.$pageNames.indexOf(t))},enumerable:!0,configurable:!0}),n.prototype.setSelectedPage=function(t){this.setSelectedIndex(Math.max(0,this.$pageNames.indexOf(t)))},Object.defineProperty(n.prototype,"previousPage",{get:function(){return-1==this.$previousIndex?null:this.$pageNames[this.$previousIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pageCount",{get:function(){return this.$pageIds.length},enumerable:!0,configurable:!0}),n.prototype.getPageName=function(t){return void 0===t&&(t=0),this.$pageNames[t]},n.prototype.addPage=function(t){void 0===t&&(t=""),this.addPageAt(t,this.$pageIds.length)},n.prototype.addPageAt=function(t,e){void 0===e&&(e=0);var i=""+n.$nextPageId++;e==this.$pageIds.length?(this.$pageIds.push(i),this.$pageNames.push(t)):(this.$pageIds.splice(e,0,i),this.$pageNames.splice(e,0,t))},n.prototype.removePage=function(t){var e=this.$pageNames.indexOf(t);-1!=e&&(this.$pageIds.splice(e,1),this.$pageNames.splice(e,1),this.$selectedIndex>=this.$pageIds.length?this.selectedIndex=this.$selectedIndex-1:this.$parent.applyController(this))},n.prototype.removePageAt=function(t){void 0===t&&(t=0),this.$pageIds.splice(t,1),this.$pageNames.splice(t,1),this.$selectedIndex>=this.$pageIds.length?this.selectedIndex=this.$selectedIndex-1:this.$parent.applyController(this)},n.prototype.clearPages=function(){this.$pageIds.length=0,this.$pageNames.length=0,-1!=this.$selectedIndex?this.selectedIndex=-1:this.$parent.applyController(this)},n.prototype.hasPage=function(t){return 0<=this.$pageNames.indexOf(t)},n.prototype.getPageIndexById=function(t){return this.$pageIds.indexOf(t)},n.prototype.getPageIdByName=function(t){var e=this.$pageNames.indexOf(t);return-1!=e?this.$pageIds[e]:null},n.prototype.getPageNameById=function(t){var e=this.$pageIds.indexOf(t);return-1!=e?this.$pageNames[e]:null},n.prototype.getPageId=function(t){return void 0===t&&(t=0),this.$pageIds[t]},Object.defineProperty(n.prototype,"selectedPageId",{get:function(){return-1==this.$selectedIndex?null:this.$pageIds[this.$selectedIndex]},set:function(t){this.selectedIndex=this.$pageIds.indexOf(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"oppositePageId",{set:function(t){0<this.$pageIds.indexOf(t)?this.selectedIndex=0:1<this.$pageIds.length&&(this.selectedIndex=1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"previousPageId",{get:function(){return-1==this.$previousIndex?null:this.$pageIds[this.$previousIndex]},enumerable:!0,configurable:!0}),n.prototype.executeActions=function(){var e=this;this.$actions&&0<this.$actions.length&&this.$actions.forEach(function(t){t.execute(e,e.previousPageId,e.selectedPageId)})},n.prototype.setup=function(t){var i=this;this.$name=t.attributes.name,this.$autoRadioGroupDepth="true"==t.attributes.autoRadioGroupDepth;var e=t.attributes.pages;if(e)for(var n=e.split(","),s=n.length,r=0;r<s;r+=2)this.$pageIds.push(n[r]),this.$pageNames.push(n[r+1]);var o,h,a=t.children;(0<a.length&&(this.$actions=this.$actions||[],a.forEach(function(t){var e=l.Action.create(t.attributes.type);e.setup(t),i.$actions.push(e)})),e=t.attributes.transitions)&&(this.$actions=this.$actions||[],e.split(",").forEach(function(t){if(t&&t.length){var e=new l.PlayTransitionAction;o=t.indexOf("="),e.transitionName=t.substr(o+1),t=t.substring(0,o),o=t.indexOf("-"),(h=parseInt(t.substring(o+1)))<i.$pageIds.length&&(e.toPage=[i.$pageIds[h]]),"*"!=(t=t.substring(0,o))&&(h=parseInt(t))<i.$pageIds.length&&(e.fromPage=[i.$pageIds[h]]),e.stopOnExit=!0,i.$actions.push(e)}}));this.$parent&&0<this.$pageIds.length?this.$selectedIndex=0:this.$selectedIndex=-1},n.$nextPageId=0,n}(PIXI.utils.EventEmitter),l.Controller=e}(fgui||(fgui={})),function(t){var e,i;e=t.controller||(t.controller={}),i=function(){function t(){}return Object.defineProperty(t.prototype,"controller",{set:function(t){this.$controller=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.$id?this.$controller.getPageNameById(this.$id):null},set:function(t){this.$id=this.$controller.getPageIdByName(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.$id?this.$controller.getPageIndexById(this.$id):-1},set:function(t){this.$id=this.$controller.getPageId(t)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.$id=null},Object.defineProperty(t.prototype,"id",{get:function(){return this.$id},set:function(t){this.$id=t},enumerable:!0,configurable:!0}),t}(),e.PageOption=i}(fgui||(fgui={})),function(t){var e,i;e=t.controller||(t.controller={}),i=function(i){function t(){var t=null!==i&&i.apply(this,arguments)||this;return t.repeat=1,t.delay=0,t.stopOnExit=!1,t}return __extends(t,i),t.prototype.enter=function(t){var e=t.parent.getTransition(this.transitionName);e&&(this.$currentTransition&&this.$currentTransition.playing?e.changeRepeat(this.repeat):e.play({times:this.repeat,delay:this.delay}),this.$currentTransition=e)},t.prototype.leave=function(t){this.stopOnExit&&this.$currentTransition&&(this.$currentTransition.stop(),this.$currentTransition=null)},t.prototype.setup=function(t){var e;i.prototype.setup.call(this,t),this.transitionName=t.attributes.transition,(e=t.attributes.repeat)&&(this.repeat=parseInt(e)),(e=t.attributes.delay)&&(this.delay=parseFloat(e)),this.stopOnExit="true"==t.attributes.stopOnExit},t}(e.Action),e.PlayTransitionAction=i}(fgui||(fgui={})),function(t){var e=function(){this.size=0,this.glyphs={}};(fgui||(fgui={})).BitmapFont=e}(),function(t){var e=function(){this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.width=0,this.height=0,this.advance=0,this.lineHeight=0,this.channel=0};(fgui||(fgui={})).BMGlyph=e}(),function(t){var e=function(i){function t(t){var e=i.call(this,t)||this;return e._fillDir=0,e._flip=0,e._percent=0,e}return __extends(t,i),Object.defineProperty(t.prototype,"flip",{get:function(){return this._flip},set:function(t){t!=this._flip&&(this._flip=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillAmount",{get:function(){return"number"==typeof this._fillAmount?this._fillAmount:100},set:function(t){t!=this._fillAmount&&(this._fillAmount=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillBegin",{get:function(){return this._fillBegin},set:function(t){t!=this._fillBegin&&(this._fillBegin=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillMode",{get:function(){return this._fillMode},set:function(t){t!=this._fillMode&&(this._fillMode=t,this.checkAndFixFillBegin())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillDirection",{get:function(){return this._fillDir},set:function(t){t!=this._fillDir&&(this._fillDir=t,this.checkAndFixFillBegin())},enumerable:!0,configurable:!0}),t.prototype.checkAndFixFillBegin=function(){switch(this._fillMode){case 1:0!=this._fillBegin&&1!=this._fillBegin&&(this._fillBegin=0);break;case 2:2!=this._fillBegin&&3!=this._fillBegin&&(this._fillBegin=2);break;case 3:4!=this._fillBegin&&6!=this._fillBegin&&5!=this._fillBegin&&7!=this._fillBegin&&(this._fillBegin=4);break;case 4:case 5:0!=this._fillBegin&&1!=this._fillBegin&&2!=this._fillBegin&&3!=this._fillBegin&&(this._fillBegin=2)}},Object.defineProperty(t.prototype,"amount",{get:function(){return this._percent},set:function(t){this._percent=t},enumerable:!0,configurable:!0}),t}(PIXI.Sprite);t.FillSprite=e}(fgui||(fgui={})),function(t){var e=function(){this.addDelay=0};(fgui||(fgui={})).Frame=e}(),function(n){var t=function(){function i(){this.$requestToShow=!1,this.$scaleX=1,this.$scaleY=1}return Object.defineProperty(i,"inst",{get:function(){return i.$instance||(i.$instance=new i),i.$instance},enumerable:!0,configurable:!0}),i.prototype.initialize=function(t,e){var i;this.$canvas=e,this.$delegateDiv||(i=document.createElement("div"),(this.$delegateDiv=i).id="__delegateDiv",t.appendChild(i),this.initDomPos(i),this.$wrapper=document.createElement("div"),this.initDomPos(this.$wrapper),this.$wrapper.style.width="0px",this.$wrapper.style.height="0px",this.$wrapper.style.left="0px",this.$wrapper.style.top="-100px",this.setTransform(this.$wrapper,"0% 0% 0px"),i.appendChild(this.$wrapper),n.GRoot.inst.on(n.InteractiveEvents.Click,this.canvasClickHandler,this),this.initInputElement(!0),this.initInputElement(!1))},i.prototype.isInputOn=function(){return null!=this.$input},i.prototype.canvasClickHandler=function(t){this.$requestToShow?(this.$requestToShow=!1,this.$input.onClickHandler(t),this.show()):this.$curEle&&(this.clearInputElement(),this.$curEle.blur(),this.$curEle=null)},i.prototype.isInputShown=function(){return null!=this.$input},i.prototype.isCurrentInput=function(t){return this.$input==t},i.prototype.initDomPos=function(t){t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.border="none",t.style.padding="0"},i.prototype.setTransform=function(t,e,i){var n=t.style;n.transformOrigin=n.webkitTransformOrigin=n.msTransformOrigin=n.mozTransformOrigin=n.oTransformOrigin=e,i&&0<i.length&&(n.transform=n.webkitTransform=n.msTransform=n.mozTransform=n.oTransform=i)},i.prototype.$updateSize=function(t,e){if(this.$canvas){this.$scaleX=t,this.$scaleY=e,this.$delegateDiv.style.left=this.$canvas.style.left,this.$delegateDiv.style.top=this.$canvas.style.top;var i=this.$canvas.style;this.setTransform(this.$delegateDiv,"0% 0% 0px",i.transform||i.webkitTransform||i.msTransform||i.mozTransform||i.oTransform)}},i.prototype.initInputElement=function(t){var e,i=this;t?((e=document.createElement("textarea")).style.resize="none",(this.$multiLine=e).id="stageTextAreaEle"):(e=document.createElement("input"),(this.$singleLine=e).type="text",e.id="stageInputEle"),this.$wrapper.appendChild(e),e.setAttribute("tabindex","-1"),e.style.width="1px",e.style.height="12px",this.initDomPos(e);var n=e.style;n.outline="thin",n.background="none",n.overflow="hidden",n.wordBreak="break-all",n.opacity=0,e.oninput=function(t){i.$input&&i.$input.onInputHandler()}},i.prototype.show=function(){var t=this;n.GTimer.inst.callLater(function(){t.$curEle.style.opacity="1"},this)},i.prototype.disconnect=function(t){null!=this.$input&&this.$input!=t||(this.clearInputElement(),this.$curEle&&this.$curEle.blur())},i.prototype.clearAttributes=function(t){if(this.$curEle)for(var e in t)this.$curEle.removeAttribute(e)},i.prototype.clearInputElement=function(){if(this.$curEle){this.$curEle.value="",this.$curEle.onblur=null;var t=this.$curEle.style;t.width="1px",t.height="12px",t.left="0px",t.top="0px",t.opacity="0";(this.$singleLine==this.$curEle?this.$multiLine:this.$singleLine).style.display="block",this.$wrapper.style.left="0px",this.$wrapper.style.top="-100px",this.$wrapper.style.height="0px",this.$wrapper.style.width="0px"}this.$input&&(this.$input.onDisconnect(),this.$input=null,i.isTyping=!1)},i.prototype.requestInput=function(t){var e;return this.clearInputElement(),this.$input=t,i.isTyping=!0,this.$input.textField.multipleLine?(this.$curEle=this.$multiLine,e=this.$singleLine):(this.$curEle=this.$singleLine,e=this.$multiLine),e.style.display="none",this.$curEle},i.isTyping=!1,i}();n.HTMLInput=t}(fgui||(fgui={})),function(h){var t=function(i){function t(t){var e=i.call(this)||this;return e.$requestToShow=!1,e.inputElement=null,e.inputDiv=null,e.$scaleX=0,e.$scaleY=0,e.textValue="",e.colorValue=16777215,e.$attrsCache={},e.$textfield=t,e}return __extends(t,i),t.prototype.$addToStage=function(){this.htmlInput=h.HTMLInput.inst},t.prototype.initElement=function(){var t=this.$textfield.localToGlobal(0,0),e=t.x,i=t.y,n=this.htmlInput.$scaleX,s=this.htmlInput.$scaleY;this.$textfield.multipleLine||(this.inputElement.style.top=-this.$textfield.leading*s+"px"),this.inputDiv.style.top=(i+1)*s+"px",this.inputDiv.style.left=e*n+"px";for(var r=this.$textfield,o=1,h=1,a=0;r.parent;)o*=r.scaleX,h*=r.scaleY,a+=r.rotation,r=r.parent;var l=this.inputDiv.style;l.transform=l.webkitTransform=l.msTransform=l.mozTransform=l.oTransform="rotate("+a+"deg)",this.$scaleX=n*o,this.$scaleY=s*h},Object.defineProperty(t.prototype,"textField",{get:function(){return this.$textfield},enumerable:!0,configurable:!0}),t.prototype.$show=function(){if(this.htmlInput.isCurrentInput(this))this.inputElement.onblur=null;else{for(var t in this.inputElement=this.htmlInput.requestInput(this),this.$textfield.multipleLine||(this.inputElement.type=this.$textfield.type),this.$attrsCache)this.inputElement.setAttribute(t,this.$attrsCache[t]);this.inputDiv=this.htmlInput.$wrapper}this.htmlInput.$requestToShow=!0,this.$requestToShow=!0,this.initElement()},t.prototype.onBlurHandler=function(){this.htmlInput.clearInputElement(),this.htmlInput.clearAttributes(this.$attrsCache),window.scrollTo(0,0)},t.prototype.$hide=function(){},Object.defineProperty(t.prototype,"text",{get:function(){return this.textValue||(this.textValue=""),this.textValue},set:function(t){this.textValue=t,this.inputElement&&(this.inputElement.value=this.textValue)},enumerable:!0,configurable:!0}),t.prototype.setColor=function(t){this.colorValue=t,this.inputElement&&this.setElementStyle("color",h.utils.StringUtil.convertToHtmlColor(this.colorValue))},t.prototype.$onBlur=function(){},t.prototype.onInputHandler=function(){var t=this;window.setTimeout(function(){t.inputElement&&t.inputElement.selectionStart==t.inputElement.selectionEnd&&(t.textValue=t.inputElement.value,t.emit("updateText"))},0)},t.prototype.setAreaHeight=function(){var t=this.$textfield;if(t.multipleLine){var e=t.textHeight;if(t.height<=t.fontSize)this.setElementStyle("height",t.fontSize*this.$scaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",t.lineHeight*this.$scaleY+"px");else if(t.height<e)this.setElementStyle("height",t.height*this.$scaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",t.lineHeight*this.$scaleY+"px");else{this.setElementStyle("height",(e+t.leading)*this.$scaleY+"px");var i=(t.height-e)*this.$scaleY,n=i*this.getVAlignFactor(t),s=i-n;this.setElementStyle("padding",n+"px 0px "+s+"px 0px"),this.setElementStyle("lineHeight",t.lineHeight*this.$scaleY+"px")}}},t.prototype.getVAlignFactor=function(t){var e=0;switch(t.verticalAlign){case 0:break;case 1:e=.5;break;case 2:e=1}return e},t.prototype.onClickHandler=function(t){this.$requestToShow&&(this.$requestToShow=!1,this.inputElement.value=this.text,null==this.inputElement.onblur&&(this.inputElement.onblur=h.utils.Binder.create(this.onBlurHandler,this)),this.resetInput(),0<this.$textfield.maxLength?this.inputElement.setAttribute("maxlength",String(this.$textfield.maxLength)):this.inputElement.removeAttribute("maxlength"),this.inputElement.selectionStart=this.inputElement.value.length,this.inputElement.selectionEnd=this.inputElement.value.length,this.inputElement.focus(),this.emit("__focusChanged","focus",this.inputElement))},t.prototype.onDisconnect=function(){this.inputElement=null,this.emit("__focusChanged","blur",this.inputElement)},t.prototype.setElementStyle=function(t,e){null!=e&&(this.inputElement&&(this.inputElement.style[t]=e))},t.prototype.setAttribute=function(t,e){null!=t&&null!=e&&(this.$attrsCache[t]=e)},t.prototype.getAttribute=function(t){return this.$attrsCache[t]},t.prototype.$removeFromStage=function(){this.inputElement&&this.htmlInput.disconnect(this)},t.prototype.resetInput=function(){if(this.inputElement){var t=this.$textfield;this.setElementStyle("fontFamily",t.font),this.setElementStyle("fontStyle",t.italic?"italic":"normal"),this.setElementStyle("fontWeight",t.bold?"bold":"normal"),this.setElementStyle("textAlign",t.align),this.setElementStyle("fontSize",t.fontSize*this.$scaleY+"px"),this.setElementStyle("color",h.utils.StringUtil.convertToHtmlColor(t.color)),this.setElementStyle("width",t.width*this.$scaleX+"px");var e="middle",i=0;switch(t.verticalAlign){case 0:e="top";break;case 1:e="middle",i=.5;break;case 2:e="bottom",i=1}if(this.setElementStyle("verticalAlign",e),t.multipleLine)this.setAreaHeight();else if(this.setElementStyle("lineHeight",t.lineHeight*this.$scaleY+"px"),t.height<t.fontSize)this.setElementStyle("height",t.fontSize*this.$scaleY+"px"),this.setElementStyle("padding","0px 0px "+.5*t.fontSize*this.$scaleX+"px 0px");else{this.setElementStyle("height",t.fontSize*this.$scaleY+"px");var n=(t.height-t.fontSize)*this.$scaleY,s=n*i,r=n-s,o=.5*t.fontSize*this.$scaleY;r<o&&(r=o),this.setElementStyle("padding",s+"px 0px "+r+"px 0px")}this.inputDiv.style.clip="rect(0px "+t.width*this.$scaleX+"px "+t.height*this.$scaleY+"px 0px)",this.inputDiv.style.height=t.height*this.$scaleY+"px",this.inputDiv.style.width=t.width*this.$scaleX+"px"}},t}(PIXI.utils.EventEmitter);h.InputElement=t}(fgui||(fgui={})),(fgui||(fgui={})).isUIObject=function(t){return t&&"UIOwner"in t&&null!=t.UIOwner},function(l){var t=function(i){function t(t){var e=i.call(this)||this;return e.interval=0,e.repeatDelay=0,e.$frameCount=0,e.$currentFrame=0,e.$status=0,e.UIOwner=t,e.data=new l.MovieClipData,e.$playing=!0,e.interactive=e.interactiveChildren=!1,e.$settings=new l.DefaultMovieClipSettings,e.on("added",e.added,e),e.on("removed",e.removed,e),e}return __extends(t,i),Object.defineProperty(t.prototype,"frames",{get:function(){return this.$frames},set:function(t){this.$frames=t,null!=this.$frames?this.$frameCount=this.$frames.length:this.$frameCount=0,(-1==this.$settings.endFrame||this.$settings.endFrame>this.$frameCount-1)&&(this.$settings.endFrame=this.$frameCount-1),(-1==this.$settings.loopEndAt||this.$settings.loopEndAt>this.$frameCount-1)&&(this.$settings.loopEndAt=this.$frameCount-1),(this.$currentFrame<0||this.$currentFrame>this.$frameCount-1)&&(this.$currentFrame=this.$frameCount-1),0<this.$frameCount?this.setFrame(this.$frames[this.$currentFrame]):this.setFrame(null),this.data.rewind()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frameCount",{get:function(){return this.$frameCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boundsRect",{get:function(){return this._boundsRect},set:function(t){this._boundsRect=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){return this.$currentFrame},set:function(t){this.$currentFrame!=t&&(this.$currentFrame=t,this.data.currentFrame=t,this.setFrame(this.$currentFrame<this.$frameCount?this.$frames[this.$currentFrame]:null))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this.$playing},set:function(t){(this.$playing=t)&&l.GObject.isDisplayObjectOnStage(this)?l.GTimer.inst.add(0,0,this.update,this):l.GTimer.inst.remove(this.update,this)},enumerable:!0,configurable:!0}),t.prototype.setPlaySettings=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1==t.length&&"object"==typeof t[0])this.$settings.mix(t[0]);else{var i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],h=t[5],a={};l.utils.NumberUtil.isNumber(i)&&(a.startFrame=i),l.utils.NumberUtil.isNumber(n)&&(a.endFrame=n),l.utils.NumberUtil.isNumber(s)&&(a.repeatCount=s),l.utils.NumberUtil.isNumber(r)&&(a.loopEndAt=r),o&&"function"==typeof o&&(a.endCallback=o),h&&(a.endCallbackContext=h),this.$settings.mix(a)}(-1==this.$settings.endFrame||this.$settings.endFrame>this.$frameCount-1)&&(this.$settings.endFrame=this.$frameCount-1),-1==this.$settings.loopEndAt&&(this.$settings.loopEndAt=this.$settings.endFrame),this.$status=0,this.currentFrame=this.$settings.startFrame},t.prototype.update=function(){this.UIOwner.$inProgressBuilding||this.$playing&&0!=this.$frameCount&&3!=this.$status&&(this.data.update(this),this.$currentFrame!=this.data.currentFrame&&(1==this.$status?(this.$currentFrame=this.$settings.startFrame,this.data.currentFrame=this.$currentFrame,this.$status=0):2==this.$status?(this.$currentFrame=this.$settings.loopEndAt,this.data.currentFrame=this.$currentFrame,this.$status=3,null!=this.$settings.endCallback&&l.GTimer.inst.callLater(this.$playEnd,this)):(this.$currentFrame=this.data.currentFrame,this.$currentFrame==this.$settings.endFrame&&0<this.$settings.repeatCount&&(this.$settings.repeatCount--,0==this.$settings.repeatCount?this.$status=2:this.$status=1)),this.setFrame(this.$frames[this.$currentFrame])))},t.prototype.$playEnd=function(){if(null!=this.$settings.endCallback){var t=this.$settings.endCallback,e=this.$settings.endCallbackContext;this.$settings.endCallback=this.$settings.endCallbackContext=null,this.$settings.endCallbackContext=null,t&&t.call(e,this)}},t.prototype.setFrame=function(t){this._texture=null==t?null:t.texture,this._textureID=-1},t.prototype.added=function(t){this.$playing&&l.GTimer.inst.add(0,0,this.update,this)},t.prototype.removed=function(t){this.$playing&&l.GTimer.inst.remove(this.update,this)},t.prototype.destroy=function(){l.GTimer.inst.remove(this.update,this),this.off("added",this.added,this),this.off("removed",this.removed,this),i.prototype.destroy.call(this)},t}(PIXI.Sprite);l.MovieClip=t}(fgui||(fgui={})),function(t){var e=function(){function t(){this.repeatedCount=0,this.$curFrame=0,this.$lastTime=0,this.$curFrameDelay=0,this.$lastTime=Date.now()}return t.prototype.update=function(t){var e=Date.now(),i=e-this.$lastTime;this.$lastTime=e;var n=this.$curFrame;n>=t.frameCount&&(n=t.frameCount-1),this.reachesEnd=!1,this.$curFrameDelay+=i;var s=t.interval+t.frames[n].addDelay+(0==n&&0<this.repeatedCount?t.repeatDelay:0);this.$curFrameDelay<s||(this.$curFrameDelay-=s,this.$curFrameDelay>t.interval&&(this.$curFrameDelay=t.interval),t.swing?this.reversed?(this.$curFrame--,this.$curFrame<0&&(this.$curFrame=Math.min(1,t.frameCount-1),this.repeatedCount++,this.reversed=!this.reversed)):(this.$curFrame++,this.$curFrame>t.frameCount-1&&(this.$curFrame=Math.max(0,t.frameCount-2),this.repeatedCount++,this.reachesEnd=!0,this.reversed=!this.reversed)):(this.$curFrame++,this.$curFrame>t.frameCount-1&&(this.$curFrame=0,this.repeatedCount++,this.reachesEnd=!0)))},Object.defineProperty(t.prototype,"currentFrame",{get:function(){return this.$curFrame},set:function(t){this.$curFrame=t,this.$curFrameDelay=0},enumerable:!0,configurable:!0}),t.prototype.rewind=function(){this.$curFrame=0,this.$curFrameDelay=0,this.reversed=!1,this.reachesEnd=!1},t.prototype.reset=function(){this.$curFrame=0,this.$curFrameDelay=0,this.repeatedCount=0,this.reachesEnd=!1,this.reversed=!1},t.prototype.copy=function(t){this.$curFrame=t.$curFrame,this.$curFrameDelay=t.$curFrameDelay,this.repeatedCount=t.repeatedCount,this.reachesEnd=t.reachesEnd,this.reversed=t.reversed},t}();t.MovieClipData=e}(fgui||(fgui={})),function(t){var e=function(){function t(){this.startFrame=0,this.endFrame=-1,this.repeatCount=0,this.loopEndAt=-1,this.endCallback=null,this.endCallbackContext=null}return t.prototype.mix=function(t){for(var e in t)"mix"!=e&&(this[e]=t[e]);return this},t}();t.DefaultMovieClipSettings=e}(fgui||(fgui={})),function(t){var e=function(i){function t(t){var e=i.call(this)||this;return e.UIOwner=t,e.interactive=!0,e.interactiveChildren=!0,e}return __extends(t,i),Object.defineProperty(t.prototype,"scrollRect",{get:function(){return this.$scrollRect},set:function(t){null!=(this.$scrollRect=t)?(this.$rectMask||(this.$rectMask=new PIXI.Graphics,this.$rectMask.isMask=!0,this.addChild(this.$rectMask),this.mask=this.$rectMask),this.$rectMask.clear(),0<t.width&&0<t.height&&(this.$rectMask.beginFill(0,1),this.$rectMask.drawRect(this.$scrollRect.x,this.$scrollRect.y,this.$scrollRect.width,this.$scrollRect.height),this.$rectMask.endFill())):this.mask=null},enumerable:!0,configurable:!0}),t}(PIXI.Container);t.UIContainer=e}(fgui||(fgui={})),function(t){var e=function(i){function t(t){var e=i.call(this)||this;return e.UIOwner=t,e.interactive=e.interactiveChildren=!1,e}return __extends(t,i),t.prototype.$initDisp=function(t){if(!this.$disp){if(t)if(t.load(),t.scaleByTile){var e=new PIXI.extras.TilingSprite(t.texture);this.$disp=e}else t.scale9Grid?(this.$disp=new PIXI.mesh.NineSlicePlane(t.texture),this.scale9Grid=t.scale9Grid,this.tiledSlices=t.tiledSlices):this.$disp=new PIXI.Sprite(t.texture);else this.$disp=new PIXI.Sprite;this.addChild(this.$disp)}},Object.defineProperty(t.prototype,"tint",{get:function(){return this.$disp.tint},set:function(t){this.$disp.tint=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.$disp.height},set:function(t){this.$disp.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.$disp.width},set:function(t){this.$disp.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this.$disp.texture},set:function(t){this.$disp.texture=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale9Grid",{get:function(){return this.$disp instanceof PIXI.mesh.NineSlicePlane?this.$scale9Rect:null},set:function(t){this.$disp instanceof PIXI.mesh.NineSlicePlane&&(this.$scale9Rect=t,this.$disp.leftWidth=t.x,this.$disp.topHeight=t.y,this.$disp.rightWidth=Math.max(0,this.$disp.width-t.width-t.x),this.$disp.bottomHeight=Math.max(0,this.$disp.height-t.height-t.y))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tiledSlices",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),t.prototype.destroy=function(t){this.$scale9Rect=null,this.$disp&&(this.$disp.destroy(t),this.$disp=null),i.prototype.destroy.call(this,t)},t}(PIXI.Container);t.UIImage=e}(fgui||(fgui={})),function(t){var e=function(i){function t(t){var e=i.call(this)||this;return e.UIOwner=t,e.interactive=!1,e.interactiveChildren=!1,e}return __extends(t,i),t}(PIXI.Graphics);t.UISprite=e}(fgui||(fgui={})),function(b){var a=function(){this.scaleMode="showAll",this.orientation="auto",this.resolution=1,this.designWidth=800,this.designHeight=600,this.alignV=4,this.alignH=1,this.fallbackWidth=0,this.fallbackHeight=0};b.DefaultUIStageOptions=a;var l=function(){function t(){}return t.prototype.getRect=function(t,e,i){var n=t.parentElement;if(!n)throw new Error("Your view of PIXI are still in memory but not appended to DOM yet? it's necessary that there is a parent element to wrap your view up.");var s=n.getBoundingClientRect(),r={x:0,y:0,width:0,height:0};return!s||s.width<=0||s.height<=0?(console.warn("It seems that you did not set a explicit size for the parent element of your view, now fall back to window size instead."),r.width=window.innerWidth,r.height=window.innerHeight,r.x=0,r.y=0):(r.x=s.left,r.y=s.top,r.width=s.width,r.height=s.height),(r.width<=0||r.height<=0)&&(console.warn("fetch container size to initialize PIXI in all ways have failed, now use default size (fallbackWidth / fallbackHeight) specified in the options instead."),r.width=e,r.height=i),r},t}(),t=function(h){function t(t,e){var i,n=h.call(this)||this;if(n.$width=0,n.$height=0,n.$scaleX=1,n.$scaleY=1,n.$canvasMatrix=new PIXI.Matrix,n.offsetX=0,n.offsetY=0,n.$sizeCalcer=new l,c.push(n),n.$appContext=t,n.$appContext.renderer.autoResize=!1,n.$appStage=t.stage,n.$appStage.interactive=!0,e instanceof a)i=e;else if(i=new a,null!=e)for(var s in e)i[s]=e[s];if(!i.designWidth||!i.designHeight)throw new Error("Invalid designWidth / designHeight in the parameter 'stageOptions'.");n.$options=i;var r=n.$appContext.view.parentElement;"DIV"!=r.tagName&&(r=document.createElement("DIV"),n.$appContext.view.parentElement.appendChild(r));var o=r.style;return o.position="relative",o.left=o.top="0px",o.width=o.height="100%",o.overflow="hidden",n.$appContext.view.style.position="absolute",b.HTMLInput.inst.initialize(r,n.$appContext.view),n.$updateScreenSize(),n}return __extends(t,h),Object.defineProperty(t.prototype,"orientation",{get:function(){return this.$options.orientation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageWidth",{get:function(){return this.$width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageHeight",{get:function(){return this.$height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"applicationContext",{get:function(){return this.$appContext},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nativeStage",{get:function(){return this.$appStage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this.$options.resolution},set:function(t){this.$options.resolution=t,this.$updateScreenSize()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleX",{get:function(){return this.$scaleX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleY",{get:function(){return this.$scaleY},enumerable:!0,configurable:!0}),t.prototype.setDesignSize=function(t,e){var i=this.$options;i.designWidth=t,i.designHeight=e,this.$updateScreenSize()},t.prototype.calculateStageSize=function(t,e,i,n,s){var r=e,o=i,h=n,a=s,l=e/h||0,c=i/a||0;switch(t){case"exactFit":break;case"fixedHeight":h=Math.round(e/c);break;case"fixedWidth":a=Math.round(i/l);break;case"noBorder":c<l?o=Math.round(a*l):r=Math.round(h*c);break;case"showAll":c<l?r=Math.round(h*c):o=Math.round(a*l);break;case"fixedAuto":r/o<h/a?(c=l,a=Math.round(i/l)):(l=c,h=Math.round(e/c));break;default:h=e,a=i}return{stageWidth:h,stageHeight:a,displayWidth:r,displayHeight:o}},t.prototype.$updateScreenSize=function(){if(!b.HTMLInput.isTyping){var t=this.$appContext.view,e=t.style,i=this.$sizeCalcer.getRect(t,this.$options.fallbackWidth,this.$options.fallbackHeight),n=!1,s=this.$options.orientation;"auto"!=s&&(n="portrait"!=s&&i.height>i.width||"portrait"==s&&i.width>i.height);var r=n?i.height:i.width,o=n?i.width:i.height,h=this.calculateStageSize(this.$options.scaleMode,r,o,this.$options.designWidth,this.$options.designHeight),a=h.stageWidth,l=h.stageHeight,c=h.displayWidth,u=h.displayHeight;t.width!==a&&(t.width=a),t.height!==l&&(t.height=l),e.transformOrigin=e.webkitTransformOrigin=e.msTransformOrigin=e.mozTransformOrigin=e.oTransformOrigin="0px 0px 0px",e.width=c+"px",e.height=u+"px";var p,$,d=this.$canvasMatrix.identity(),f=n?u:c,g=n?c:u;p=0==this.$options.alignH?0:2==this.$options.alignH?i.width-f:.5*(i.width-f),$=3==this.$options.alignV?0:5==this.$options.alignV?i.height-g:.5*(i.height-g);var y=0;n?"landscape"==this.$options.orientation?(d.rotate(Math.PI/2),d.translate(o-p,$),y=90):(d.rotate(-Math.PI/2),d.translate(p,r-$),y=-90):d.translate(p,$),n?(d.tx+=this.offsetY,d.ty+=this.offsetX):(d.tx+=this.offsetX,d.ty+=this.offsetY),d.a=this.formatData(d.a),d.d=this.formatData(d.d),d.tx=this.formatData(d.tx),d.ty=this.formatData(d.ty),e.transformOrigin=e.webkitTransformOrigin=e.msTransformOrigin=e.mozTransformOrigin=e.oTransformOrigin="0px 0px 0px",e.transform=e.webkitTransform=e.msTransform=e.mozTransform=e.oTransform="matrix("+d.a+","+d.b+","+d.c+","+d.d+","+d.tx+","+d.ty+")",this.$width=a,this.$height=l,this.$scaleX=a/c,this.$scaleY=l/u;var m=this.$appContext.renderer.plugins.interaction;m.stageRotation=y,m.stageScaleX=this.$scaleX,m.stageScaleY=this.$scaleY,this.$appContext.renderer.resize(a,l),b.HTMLInput.inst.$updateSize(c/a,u/l),this.emit("__sizeChanged",this)}},t.prototype.formatData=function(t){return Math.abs(t)<1e-6?0:Math.abs(1-t)<.001?0<t?1:-1:t},t.prototype.dispose=function(){for(var t=c.length;0<=t--;)c[t]===this&&c.splice(t,1)},t}(PIXI.utils.EventEmitter);b.UIStage=t;var c=[],i=NaN;function e(){var e=!!window.navigator.userAgent.match(/Version\/\d+\.\d\x20Mobile\/\S+\x20Safari/);i=NaN,c.forEach(function(t){e&&(t.offsetY=(document.body.clientHeight||document.documentElement.clientHeight)-window.innerHeight),t.$updateScreenSize()})}window.addEventListener("resize",function(){isNaN(i)&&(i=window.setTimeout(e,300))})}(fgui||(fgui={})),function(w){var t,e;t=w.extras||(w.extras={}),e=function(s){function v(t,e,i){var n=s.call(this,t,e,i)||this;return w.extras.Text.__init||(w.extras.Text.__init=!0,w.TextMetrics.wordWrap=function(t,e,i){i||(i=w.TextMetrics._canvas);for(var n=i.getContext("2d"),s="",r=t.charAt(0),o=t.split("\n"),h=e.wordWrapWidth,a={},l=0;l<o.length;l++){for(var c=h,u=o[l].split(" "),p=0;p<u.length;p++){var $=n.measureText(u[p]).width;if(e.breakWords&&h<$)for(var d=u[p].split(""),f=0;f<d.length;f++){var g=d[f],y=d[f+1];1<v.isEmojiChar(g.charCodeAt(0),y?y.charCodeAt(0):0)&&(f++,g+=y);var m=a[g];void 0===m&&(m=n.measureText(g).width,a[g]=m),c<m?(s+="\n"+g,c=h-m):(0===f&&(0<p||" "==r)&&(s+=" "),s+=g,c-=m)}else{var b=$+n.measureText(" ").width;0===p||c<b?(0<p&&(s+="\n"),s+=u[p],c=h-$):(c-=b,s+=" "+u[p])}}l<o.length-1&&(s+="\n")}return s}),n}return __extends(v,s),v.isEmojiChar=function(t,e){var i=t,n="number"==typeof e&&!isNaN(e)&&0<e;if(55296<=i&&i<=56319){if(n){var s=1024*(i-55296)+(e-56320)+65536;if(118784<=s&&s<=128895)return 2}}else{if(8448<=i&&i<=10239||11013<=i&&i<=11015||10548<=i&&i<=10549||12951<=i&&i<=12953||169===i||174===i||12349===i||12336===i||11093===i||11036===i||11035===i||11088===i||8986===i)return 1;if(n&&(8419===e||65039===e||55356===e))return 2}return 0},v.__init=!1,v}(w.Text),t.Text=e}(PIXI||(PIXI={})),function(e){var t=function(i){function t(t){var e=i.call(this)||this;return e.$minHeightID=-1,e.UIOwner=t,e.interactive=e.interactiveChildren=!1,e._texture.noFrame=!1,e._width=e._texture.frame.width,e._height=e._texture.frame.height,e.$minHeight=-1,e._texture.on("update",e.updateFrame,e),e}return __extends(t,i),Object.defineProperty(t.prototype,"minHeight",{get:function(){return this.$minHeight},enumerable:!0,configurable:!0}),t.prototype.$updateMinHeight=function(){(this.style.styleID!=this.$minHeightID||this.$minHeight<=0)&&(this.$minHeight=PIXI.TextMetrics.measureText("",this.style,!1).lineHeight,this.$minHeightID=this.style.styleID)},t.prototype.updateFrame=function(){e.GTimer.inst.callLater(this.internalUpdateFrame,this)},t.prototype.internalUpdateFrame=function(){if(this._texture){var t=this._texture.frame;this._height=Math.max(this._height,this.$minHeight);var e=t.x+this._width,i=t.y+this._height;e>this._texture.baseTexture.width&&(e=this._texture.baseTexture.width-t.x),i>this._texture.baseTexture.height&&(i=this._texture.baseTexture.height-t.y),t.width=e/this.resolution,t.height=i/this.resolution,this._texture.trim.width=t.width,this._texture.trim.height=t.height;var n=this._style.trim?0:this._style.padding;this._texture.trim.x=-n,this._texture.trim.y=-n,this._texture.frame=t}},t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.updateFrame()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.updateFrame()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.updateText(!0),this._texture.orig.height},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.updateText(!0),this._texture.orig.width},set:function(t){t!=this.style.wordWrapWidth&&(this.style.wordWrapWidth=t)},enumerable:!0,configurable:!0}),t}(PIXI.extras.Text);e.UITextField=t}(fgui||(fgui={})),function(t){var e,i;e=t.extras||(t.extras={}),i=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i.stageRotation=0,i.stageScaleX=1,i.stageScaleY=1,i}return __extends(t,n),t.prototype.mapPositionToPoint=function(t,e,i){var n=void 0,s=this.interactionDOMElement;n=s.parentElement?s.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=navigator.isCocoonJS?this.resolution:1/this.resolution,o=document.documentElement,h=e-=n.left+window.pageXOffset-o.clientLeft,a=i-=n.top+window.pageYOffset-o.clientTop;90==this.stageRotation?(h=i,a=n.width-e):-90==this.stageRotation&&(h=n.height-i,a=e),h=h*this.stageScaleX*r,a=a*this.stageScaleY*r,t.set(h,a)},t}(t.interaction.InteractionManager),e.InteractionManager=i,t.CanvasRenderer.registerPlugin("interaction",t.extras.InteractionManager),t.WebGLRenderer.registerPlugin("interaction",t.extras.InteractionManager)}(PIXI||(PIXI={})),function(t){var e=function(t,e){this.packageItem=t,this.type=e};(fgui||(fgui={})).DisplayListItem=e}(),function(t){var e=function(){function t(){this.width=0,this.height=0,this.tiledSlices=0,this.interval=0,this.repeatDelay=0}return t.prototype.load=function(){return this.owner.getItemAsset(this)},t.prototype.toString=function(){return this.name},t}();t.PackageItem=e}(fgui||(fgui={})),function(s){var t=function(){function n(){}return n.setPackageItemExtension=function(t,e){n.packageItemExtensions[t.substring(5)]=e},n.setLoaderExtension=function(t){n.loaderExtension=t},n.newObject=function(t){switch(t.type){case 0:return new s.GImage;case 2:return new s.GMovieClip;case 4:var e=n.packageItemExtensions[t.owner.id+t.id];if(e)return new e;var i=t.owner.getItemAsset(t).attributes.extention;if(null==i)return new s.GComponent;switch(i){case"Button":return new s.GButton;case"ProgressBar":return new s.GProgressBar;case"Label":return new s.GLabel;case"Slider":return new s.GSlider;case"ScrollBar":return new s.GScrollBar;case"ComboBox":return new s.GComboBox;default:return new s.GComponent}}return null},n.newObjectDirectly=function(t){switch(t){case"image":return new s.GImage;case"movieclip":return new s.GMovieClip;case"component":return new s.GComponent;case"text":return new s.GTextField;case"list":return new s.GList;case"richtext":return new s.GRichTextField;case"inputtext":return new s.GTextInput;case"group":return new s.GGroup;case"graph":return new s.GGraph;case"loader":return null!=n.loaderExtension?new n.loaderExtension:new s.GLoader}return null},n.packageItemExtensions={},n}();s.UIObjectFactory=t}(fgui||(fgui={})),function(w){var l=function(t,e,i,n,s){this.atlasName=t,this.frame=e,this.orig=i,this.trim=n,this.rotate=s},t=function(){function v(){this.$items=[],this.$atlasConfigs={}}return v.getById=function(t){return v.$packageInstById[t]},v.getByName=function(t){return v.$packageInstByName[t]},v.addPackage=function(t){var e=new v;return e.create(t),v.$packageInstById[e.id]=e,(v.$packageInstByName[e.name]=e).customId=t,e},v.removePackage=function(t){var e=v.$packageInstById[t];e.dispose(),delete v.$packageInstById[e.id],null!=e.$customId&&delete v.$packageInstById[e.$customId],delete v.$packageInstByName[e.name]},v.createObject=function(t,e,i){var n=v.getByName(t);return n?n.createObject(e,i):null},v.createObjectFromURL=function(t,e){var i=v.getItemByURL(t);return i?i.owner.internalCreateObject(i,e):null},v.getItemURL=function(t,e){var i=v.getByName(t);if(!i)return null;var n=i.$itemsByName[e];return n?"ui://"+i.id+n.id:null},v.getItemByURL=function(t){var e=t.indexOf("//");if(-1==e)return null;var i,n=t.indexOf("/",e+2);if(-1==n){if(13<t.length){var s=t.substr(5,8);if(null!=(i=v.getById(s))){var r=t.substr(13);return i.getItemById(r)}}}else{var o=t.substr(e+2,n-e-2);if(null!=(i=v.getByName(o))){var h=t.substr(n+1);return i.getItemByName(h)}}return null},v.getBitmapFontByURL=function(t){return v.$bitmapFonts[t]},v.setStringsSource=function(t){v.$stringsSource={},w.utils.XmlParser.tryParse(t).children.forEach(function(t){if("string"==t.nodeName){var e=t.attributes.name,i=e.indexOf("-");if(-1==i)return;var n=0<t.children.length?t.children[0].text:"",s=e.substr(0,i),r=e.substr(i+1),o=v.$stringsSource[s];o||(o={},v.$stringsSource[s]=o),o[r]=n}})},v.normalizeURL=function(t){if(null==t)return null;var e=t.indexOf("//");if(-1==e)return null;var i=t.indexOf("/",e+2);if(-1==i)return t;var n=t.substr(e+2,i-e-2),s=t.substr(i+1);return v.getItemURL(n,s)},v.prototype.create=function(t){var a=this;this.$resKey=t;var e=w.utils.AssetLoader.resourcesPool[this.$resKey];if(e||(e=w.utils.AssetLoader.resourcesPool[this.$resKey+"_fui"]),!e)throw new Error("Resource '"+this.$resKey+'\' not found, please make sure that you use "new fgui.utils.AssetLoader" to load resources instead of " PIXI.loaders.Loader".');if(!(e.data&&e.data instanceof ArrayBuffer))throw new Error("Resource '"+this.$resKey+"' is not a proper binary resource, please load it as binary format by calling yourLoader.add(name, url, { loadType:PIXI.loaders.Resource.LOAD_TYPE.XHR, xhrType: PIXI.loaders.Resource.XHR_RESPONSE_TYPE.BUFFER })");this.decompressPackage(e.data);var n=this.getResDescriptor("sprites.bytes");n&&n.split(v.sep1).forEach(function(t,e){if(1<=e&&t&&t.length){var i=t.split(v.sep2),n=void 0,s=i[0],r=parseInt(i[1]);if(0<=r)n="atlas"+r;else{var o=s.indexOf("_");n=-1==o?"atlas_"+s:"atlas_"+s.substr(0,o)}var h=new l(n);h.frame=new PIXI.Rectangle(parseInt(i[2]),parseInt(i[3]),parseInt(i[4]),parseInt(i[5])),a.$atlasConfigs[s]=h}}),n=this.getResDescriptor("package.xml");var i=w.utils.XmlParser.tryParse(n);this.$id=i.attributes.id,this.$name=i.attributes.name;var s=i.children[0].children;this.$itemsById={},this.$itemsByName={},s.forEach(function(t){var e=new w.PackageItem;if(e.type=w.ParsePackageItemType(t.nodeName),e.id=t.attributes.id,e.name=t.attributes.name,e.file=t.attributes.file,n=t.attributes.size){var i=n.split(v.sep0);e.width=parseInt(i[0]),e.height=parseInt(i[1])}switch(e.type){case 0:if("9grid"==(n=t.attributes.scale)){if(e.scale9Grid=new PIXI.Rectangle,n=t.attributes.scale9grid){i=n.split(v.sep0);e.scale9Grid.x=parseInt(i[0]),e.scale9Grid.y=parseInt(i[1]),e.scale9Grid.width=parseInt(i[2]),e.scale9Grid.height=parseInt(i[3]),(n=t.attributes.gridTile)&&(e.tiledSlices=parseInt(n))}}else"tile"==n&&(e.scaleByTile=!0)}(e.owner=a).$items.push(e),null!=(a.$itemsById[e.id]=e).name&&(a.$itemsByName[e.name]=e)},this),this.$items.forEach(function(t){6==t.type&&(a.loadFont(t),v.$bitmapFonts[t.bitmapFont.id]=t.bitmapFont)},this)},v.prototype.decompressPackage=function(t){this.$resData={};for(var e,i,n=new Zlib.RawInflate(t).decompress(),s=w.utils.RawByte.decodeUTF8(n),r=0;;){var o=s.indexOf("|",r);if(-1==o)break;e=s.substring(r,o),r=o+1,o=s.indexOf("|",r),i=parseInt(s.substring(r,o)),r=o+1,this.$resData[e]=s.substr(r,i),r+=i}},v.prototype.dispose=function(){var n=this;this.$items.forEach(function(t){var e=t.texture;null!=e?(e.destroy(),PIXI.Texture.removeFromCache(e)):null!=t.frames?t.frames.forEach(function(t){(e=t.texture)&&(e.destroy(),PIXI.Texture.removeFromCache(e))}):null!=t.bitmapFont&&delete v.$bitmapFonts[t.bitmapFont.id];var i=n.$atlasConfigs[t.id];i&&w.utils.AssetLoader.destroyResource(n.$resKey+"@"+i.atlasName)},this),w.utils.AssetLoader.destroyResource(""+this.$resKey)},Object.defineProperty(v.prototype,"id",{get:function(){return this.$id},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"name",{get:function(){return this.$name},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"customId",{get:function(){return this.$customId},set:function(t){null!=this.$customId&&delete v.$packageInstById[this.$customId],this.$customId=t,null!=this.$customId&&(v.$packageInstById[this.$customId]=this)},enumerable:!0,configurable:!0}),v.prototype.createObject=function(t,e){var i=this.$itemsByName[t];return i?this.internalCreateObject(i,e):null},v.prototype.internalCreateObject=function(t,e){void 0===e&&(e=null);var i=4==t.type&&null!=e?new e:w.UIObjectFactory.newObject(t);return null==i?null:(v.$constructingObjects++,i.packageItem=t,i.constructFromResource(),v.$constructingObjects--,i)},v.prototype.getItemById=function(t){return this.$itemsById[t]},v.prototype.getItemByName=function(t){return this.$itemsByName[t]},v.prototype.getItemAssetByName=function(t){var e=this.$itemsByName[t];if(null==e)throw new Error("Resource '"+t+"' not found");return this.getItemAsset(e)},v.prototype.createSpriteTexture=function(t,e){var i=this.$itemsById[e.atlasName];if(null!=i){var n=this.getItemAsset(i);if(!n||!n.baseTexture)return null;e.texCacheID||(e.texCacheID=this.$resKey+"@"+e.atlasName+"@"+t);var s=PIXI.utils.TextureCache[e.texCacheID];return s||(s=new PIXI.Texture(n.baseTexture,e.frame,e.orig,e.trim,e.rotate),PIXI.Texture.addToCache(s,e.texCacheID)),s}return null},v.prototype.getItemAsset=function(t){switch(t.type){case 0:if(!t.decoded){t.decoded=!0;var e=this.$atlasConfigs[t.id];null!=e&&(t.texture=this.createSpriteTexture(t.id,e))}return t.texture;case 7:if(!t.decoded){t.decoded=!0;var i=null!=t.file&&0<t.file.length?t.file:t.id+".png",n=this.$resKey+"@"+w.utils.StringUtil.getFileName(i),s=w.utils.AssetLoader.resourcesPool[n];if(!s)throw new Error(n+" not found in fgui.utils.AssetLoader.resourcesPool, please use new AssetLoader() to load assets instead of using new PIXI.loaders.Loader(). besides, AssetLoader is a sub-class from PIXI.loaders.Loader so they have the same usage.");t.texture=s.texture,t.texture||(s=w.utils.AssetLoader.resourcesPool[this.$resKey+"@"+i.replace(".","_")],t.texture=s.texture)}return t.texture;case 3:return t.decoded=!1,null;case 6:return t.decoded||(t.decoded=!0,this.loadFont(t)),t.bitmapFont;case 2:return t.decoded||(t.decoded=!0,this.loadMovieClip(t)),t.frames;case 4:if(!t.decoded){t.decoded=!0;var r=this.getResDescriptor(t.id+".xml"),o=w.utils.XmlParser.tryParse(r);t.componentData=o,this.loadComponentChildren(t),this.loadComponentTranslation(t)}return t.componentData;default:return w.utils.AssetLoader.resourcesPool[this.$resKey+"@"+t.id]}},v.prototype.loadComponentChildren=function(h){var t=w.utils.XmlParser.getChildNodes(h.componentData,"displayList");null!=t&&0<t.length?(h.displayList=[],t[0].children.forEach(function(t){var e,i=t.nodeName,n=t.attributes.src;if(n){var s=t.attributes.pkg,r=void 0,o=null!=(r=s&&s!=h.owner.id?v.getById(s):h.owner)?r.getItemById(n):null;e=null!=o?new w.DisplayListItem(o,null):new w.DisplayListItem(null,i)}else e="text"==i&&"true"==t.attributes.input?new w.DisplayListItem(null,"inputtext"):new w.DisplayListItem(null,i);e.desc=t,h.displayList.push(e)})):h.displayList=[]},v.prototype.getResDescriptor=function(t){return this.$resData[t]},v.prototype.loadComponentTranslation=function(t){if(null!=v.$stringsSource){var i,n,s,r,o,h=v.$stringsSource[this.id+t.id];if(null!=h)t.displayList.forEach(function(t){n=t.desc,r=n.nodeName,o=n.attributes.id,n.attributes.tooltips&&null!=(i=h[o+"-tips"])&&(n.attributes.tooltips=i);var e=w.utils.XmlParser.getChildNodes(n,"gearText");if((s=e&&e[0])&&(null!=(i=h[o+"-texts"])&&(s.attributes.values=i),null!=(i=h[o+"-texts_def"])&&(s.attributes.default=i)),"text"==r||"richtext"==r)null!=(i=h[o])&&(n.attributes.text=i),null!=(i=h[o+"-prompt"])&&(n.attributes.prompt=i);else if("list"==r)n.children.forEach(function(t,e){"item"==t.nodeName&&null!=(i=h[o+"-"+e])&&(t.attributes.title=i)});else if("component"==r){if(e=w.utils.XmlParser.getChildNodes(n,"Button"),s=e&&e[0])return null!=(i=h[o])&&(s.attributes.title=i),void(null!=(i=h[o+"-0"])&&(s.attributes.selectedTitle=i));if(e=w.utils.XmlParser.getChildNodes(n,"Label"),s=e&&e[0])return void(null!=(i=h[o])&&(s.attributes.title=i));if(e=w.utils.XmlParser.getChildNodes(n,"ComboBox"),s=e&&e[0])return null!=(i=h[o])&&(s.attributes.title=i),void s.children.forEach(function(t,e){"item"==t.nodeName&&null!=(i=h[o+"-"+e])&&(t.attributes.title=i)})}})}},v.prototype.loadMovieClip=function(o){var h,a=this,t=w.utils.XmlParser.tryParse(this.getResDescriptor(o.id+".xml"));null!=(h=t.attributes.interval)&&(o.interval=parseInt(h)),null!=(h=t.attributes.swing)&&(o.swing="true"==h),null!=(h=t.attributes.repeatDelay)&&(o.repeatDelay=parseInt(h)),o.frames=[],t.children[0].children.forEach(function(t,e){var i=new w.Frame,n=(h=t.attributes.rect).split(v.sep0),s=new PIXI.Rectangle(parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3]));if((h=t.attributes.addDelay)&&(i.addDelay=parseInt(h)),o.frames.push(i),!(s.width<=0)){h=(h=t.attributes.sprite)?o.id+"_"+h:o.id+"_"+e;var r=a.$atlasConfigs[h];null!=r&&(r.trim=s,i.texture=a.createSpriteTexture(h,r))}})},v.prototype.loadFont=function(r){var o=this,h=new w.BitmapFont;h.id="ui://"+this.id+r.id;var a,l,c=this.getResDescriptor(r.id+".fnt"),t=c.split(v.sep1),u={},p=!1,$=0,d=0,f=!1,g=0,y=0,m=0,b=0;t.forEach(function(t){if(t&&t.length){var e=(c=w.utils.StringUtil.trim(t)).split(v.sep2);if(e.forEach(function(t){var e=t.split(v.sep3);u[e[0]]=e[1]}),"char"==(c=e[0])){var i=new w.BMGlyph;i.x=parseInt(u.x)||0,i.y=parseInt(u.y)||0,i.offsetX=parseInt(u.xoffset)||0,i.offsetY=parseInt(u.yoffset)||0,i.width=parseInt(u.width)||0,i.height=parseInt(u.height)||0,b=Math.max(i.height,b),i.advance=parseInt(u.xadvance)||0,null!=u.chnl&&(i.channel=parseInt(u.chnl),15==i.channel?i.channel=4:1==i.channel?i.channel=3:2==i.channel?i.channel=2:i.channel=1),p?null!=l&&(i.texture=new PIXI.Texture(l.baseTexture,new PIXI.Rectangle(i.x+g,i.y+y,i.width,i.height))):u.img&&null!=(a=o.$itemsById[u.img])&&(a.load(),i.width=a.width,i.height=a.height,i.texture=a.texture),p?i.lineHeight=m:(0==i.advance&&(i.advance=0==d?i.offsetX+i.width:d),i.lineHeight=i.offsetY<0?i.height:i.offsetY+i.height,0<$&&i.lineHeight<$&&(i.lineHeight=$)),h.glyphs[String.fromCharCode(0|+u.id)]=i}else if("info"==c){if(p=null!=u.face,u.size&&($=parseInt(u.size)),f="true"==u.resizable,p){var n=o.$atlasConfigs[r.id];if(null!=n){g=n.frame.x,y=n.frame.y;var s=o.$itemsById[n.atlasName];null!=s&&(l=o.getItemAsset(s))}}}else"common"==c&&(u.lineHeight&&(m=parseInt(u.lineHeight)),0==$?$=m:0==m&&(m=$),u.xadvance&&(d=parseInt(u.xadvance)))}}),0==$&&0<b&&($=b),h.ttf=p,h.size=$,h.resizable=f,r.bitmapFont=h},v.$constructingObjects=0,v.$packageInstById={},v.$packageInstByName={},v.$bitmapFonts={},v.$stringsSource=null,v.sep0=",",v.sep1="\n",v.sep2=" ",v.sep3="=",v}();w.UIPackage=t}(fgui||(fgui={})),function(t){var e,i;e=t.utils||(t.utils={}),i=function(i){function n(t,e){return i.call(this,t,e)||this}return __extends(n,i),n.prototype._onComplete=function(){n.addResources(this.resources),i.prototype._onComplete.call(this)},Object.defineProperty(n,"resourcesPool",{get:function(){return n.$resources},enumerable:!0,configurable:!0}),n.destroyResource=function(t){var e=n.$resources[t];e&&(e.isComplete||e.abort(),e.children=null,e.data=null,e.texture&&e.texture.destroy(),e.textures=null,e.xhr=null,n.$resources[t]=null,delete n.$resources[t])},n.addResources=function(t){if(t)for(var e in t)n.$resources[e]=t[e]},n.$resources={},n}(PIXI.loaders.Loader),e.AssetLoader=i}(fgui||(fgui={})),function(t){var e,i;e=t.utils||(t.utils={}),i=function(){function t(){}return t.create=function(e,i){for(var n=[],t=2;t<arguments.length;t++)n[t-2]=arguments[t];return i?function(){var t=0<arguments.length?[].concat(Array.prototype.slice.call(arguments)).concat(n):[].concat(n);e.apply(i,t)}:e},t}(),e.Binder=i}(fgui||(fgui={})),function(t){var e,i;e=t.utils||(t.utils={}),i=function(){function n(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this._raw=[],this.h=0,this.s=0,this.c=0,this.b=0,this.setColor(t,e,i,n)}return Object.defineProperty(n.prototype,"hue",{get:function(){return this.h},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"brightness",{get:function(){return this.b},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"contrast",{get:function(){return this.c},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"saturation",{get:function(){return this.s},enumerable:!0,configurable:!0}),n.prototype.setColor=function(t,e,i,n){return this.reset().adjustColor(t,e,i,n)},n.prototype.reset=function(){return this.copy(n.IDENTITY_MATRIX)},n.prototype.adjustColor=function(t,e,i,n){return this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},n.prototype.adjustBrightness=function(t){return 0==t||isNaN(t)||(this.b=t,t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])),this},n.prototype.adjustContrast=function(t){if(0==t||isNaN(t))return this;var e;this.c=t;return e=(t=this._cleanValue(t,100))<0?1+t/100*1:1*(e=0==(e=t%1)?n.DELTA_INDEX[t]:n.DELTA_INDEX[t<<0]*(1-e)+n.DELTA_INDEX[1+(t<<0)]*e)+1,this._multiplyMatrix([e/1,0,0,0,.5*(1-e),0,e/1,0,0,.5*(1-e),0,0,e/1,0,.5*(1-e),0,0,0,1,0,0,0,0,0,1]),this},n.prototype.adjustSaturation=function(t){if(0==t||isNaN(t))return this;this.s=t;var e=1+(0<(t=this._cleanValue(t,100))?3*t/100:t/100);return this._multiplyMatrix([.3086*(1-e)+e,.6094*(1-e),.082*(1-e),0,0,.3086*(1-e),.6094*(1-e)+e,.082*(1-e),0,0,.3086*(1-e),.6094*(1-e),.082*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this},n.prototype.adjustHue=function(t){if(0==t||isNaN(t))return this;this.h=t,t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t),n=.213,s=.715,r=.072;return this._multiplyMatrix([n+.787*e+i*-n,s+e*-s+i*-s,r+e*-r+.928*i,0,0,n+e*-n+.143*i,s+e*(1-s)+.14*i,r+e*-r+-.283*i,0,0,n+e*-n+-.787*i,s+e*-s+i*s,r+.928*e+i*r,0,0,0,0,0,1,0,0,0,0,0,1]),this},n.prototype.concat=function(t){return(t=this._fixMatrix(t)).length!=n.LENGTH||this._multiplyMatrix(t),this},n.prototype.clone=function(){return(new n).copy(this._raw)},n.prototype.toArray=function(){for(var t=[],e=0,i=n.LENGTH;e<i;e++)t[e]=this._raw[e];return t},n.prototype.copy=function(t){for(var e=n.LENGTH,i=0;i<e;i++)this._raw[i]=t[i];return this},n.prototype._multiplyMatrix=function(t){var e,i,n,s=[];for(e=0;e<5;e++){for(i=0;i<5;i++)s[i]=this._raw[i+5*e];for(i=0;i<5;i++){var r=0;for(n=0;n<5;n++)r+=t[i+5*n]*s[n];this._raw[i+5*e]=r}}},n.prototype._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},n.prototype._fixMatrix=function(t){return t instanceof n&&(t=t.toArray()),t.length<n.LENGTH?t=t.slice(0,t.length).concat(n.IDENTITY_MATRIX.slice(t.length,n.LENGTH)):t.length>n.LENGTH&&(t=t.slice(0,n.LENGTH)),t},n.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],n.LENGTH=(n.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]).length,n}(),e.ColorMatrix=i}(fgui||(fgui={})),function(r){var t,e;t=r.utils||(r.utils={}),e=function(){function t(){this.$agent=new r.GLoader,this.$agent.draggable=!0,this.$agent.touchable=!1,this.$agent.setSize(100,100),this.$agent.setPivot(.5,.5,!0),this.$agent.align="center",this.$agent.verticalAlign=1,this.$agent.sortingOrder=1e6,this.$agent.on("__dragEnd",this.$dragEnd,this)}return Object.defineProperty(t.prototype,"dragAgent",{get:function(){return this.$agent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDragging",{get:function(){return null!=this.$agent.parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sourceObject",{get:function(){return this.$sourceObject},enumerable:!0,configurable:!0}),t.prototype.startDrag=function(t,e,i,n){if(void 0===n&&(n=-1),!this.isDragging){this.$sourceObject=t,this.$sourceData=i,this.$agent.url=e,r.GRoot.inst.addChild(this.$agent);var s=r.GRoot.inst.globalToLocal(r.GRoot.statusData.mouseX,r.GRoot.statusData.mouseY);this.$agent.setXY(s.x,s.y),this.$agent.startDrag(n)}},t.prototype.cancel=function(){null!=this.$agent.parent&&(this.$agent.stopDrag(),r.GRoot.inst.removeChild(this.$agent),this.$sourceData=null)},t.prototype.$dragEnd=function(t){if(this.isDragging){r.GRoot.inst.removeChild(this.$agent);var e=this.$sourceData;this.$sourceData=null;for(var i=r.GRoot.inst.getObjectUnderPoint(t.data.global.x,t.data.global.y);null!=i;){if(i.hasListener("__dragDrop"))return i.requestFocus(),t.currentTarget=i.displayObject,void i.emit("__dragDrop",t,e);i=i.parent}}},t}(),t.DragIndicator=e}(fgui||(fgui={})),function(e){var t,i;t=e.utils||(e.utils={}),i=function(){function t(t){this.$inited=!1,this.$restrictString=null,this.$restrictRegex=null,this.$focused=!1,this.$textField=t,this.$input=new e.InputElement(t)}return t.prototype.initialize=function(){this.$inited||(this.$input.$addToStage(),this.$input.on("updateText",this.updateText,this),this.$input.on("__focusChanged",this.focusHandler,this),this.$textField.on(e.InteractiveEvents.Down,this.textFieldDownHandler,this),this.$inited=!0)},t.prototype.textFieldDownHandler=function(){this.$onFocus()},t.prototype.destroy=function(){this.$inited&&(this.$input.$removeFromStage(),this.$textField.off(e.InteractiveEvents.Down,this.textFieldDownHandler,this),e.GRoot.inst.off(e.InteractiveEvents.Down,this.onStageDown,this),this.$input.off("updateText",this.updateText,this),this.$input.off("__focusChanged",this.focusHandler,this),this.$inited=!1)},Object.defineProperty(t.prototype,"text",{get:function(){return this.$input.text},set:function(t){this.$input.text=t},enumerable:!0,configurable:!0}),t.prototype.setColor=function(t){return this.$input.setColor(t)},t.prototype.updateText=function(){var t=this.$input.text,e=!1;if(null!=this.$restrictRegex){var i=t.match(this.$restrictRegex);t=i?i.join(""):"",e=!0}e&&this.$input.text!=t&&(this.$input.text=t),this.$textField.text=this.$input.text,this.$textField.emit("__textChange",this.$textField)},t.prototype.onStageDown=function(t){e.GObject.castFromNativeObject(t.currentTarget)!=this.$textField&&this.$input.$hide()},t.prototype.focusHandler=function(t){"focus"==t?this.$focused||(this.$focused=!0,this.$textField.$isTyping=!0,this.$textField.alpha=0,this.$textField.emit("__focusChanged","focus",this.$textField)):"blur"==t&&this.$focused&&(this.$focused=!1,e.GRoot.inst.off(e.InteractiveEvents.Down,this.onStageDown,this),this.$textField.$isTyping=!1,this.$textField.alpha=1,this.$input.$onBlur(),this.$textField.emit("__focusChanged","blur",this.$textField))},Object.defineProperty(t.prototype,"isFocused",{get:function(){return this.$focused},enumerable:!0,configurable:!0}),t.prototype.$getProperty=function(t){return this.$inited&&this.$input.getAttribute(t)||null},t.prototype.$setProperty=function(t,e){this.$inited&&this.$input.setAttribute(t,e)},Object.defineProperty(t.prototype,"$restrict",{get:function(){return this.$restrictString},set:function(t){this.$restrictString=t,null!=this.$restrictString&&0<this.$restrictString.length?this.$restrictRegex=new RegExp(this.$restrictString):this.$restrictRegex=null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.$type},set:function(t){t!=this.$type&&(this.$type=t)},enumerable:!0,configurable:!0}),t.prototype.tryHideInput=function(){!this.$textField.visible&&this.$input&&this.$input.$removeFromStage()},t.prototype.$updateProperties=function(){if(this.isFocused)return this.$input.resetInput(),void this.tryHideInput();this.$input.text=this.$textField.text,this.$input.resetInput(),this.tryHideInput()},t.prototype.$onFocus=function(){var t=this;this.$textField.visible&&!this.$focused&&(e.GRoot.inst.off(e.InteractiveEvents.Down,this.onStageDown,this),e.GTimer.inst.callLater(function(){e.GRoot.inst.on(e.InteractiveEvents.Down,t.onStageDown,t)},this),this.$input.$show())},t}(),t.InputDelegate=i}(fgui||(fgui={})),function(t){var e,i;e=t.utils||(t.utils={}),i=function(){function t(){this.left=0,this.right=0,this.top=0,this.bottom=0}return t.prototype.parse=function(t){if(t){var e=t.split(",");if(1==e.length){var i=parseInt(e[0]);this.left=this.right=this.top=this.bottom=i}else this.top=parseInt(e[0]),this.bottom=parseInt(e[1]),this.left=parseInt(e[2]),this.right=parseInt(e[3])}else this.left=this.right=this.top=this.bottom=0},t.prototype.copy=function(t){this.top=t.top,this.bottom=t.bottom,this.left=t.left,this.right=t.right},t}(),e.Margin=i}(fgui||(fgui={})),function(t){var e,i;e=t.utils||(t.utils={}),i=function(){function e(){}return e.clamp=function(t,e,i){return t<e?t=e:i<t&&(t=i),t},e.clamp01=function(t){return 1<t?t=1:t<0&&(t=0),t},e.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},e.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:0<t?1:-1},e.angleToRadian=function(t){return t*e.RADIAN},e.RADIAN=Math.PI/180,e}(),e.NumberUtil=i}(fgui||(fgui={})),function(t){var e,i;e=t.utils||(t.utils={}),i=function(){function u(){}return u.inRange=function(t,e,i){return e<=t&&t<=i},u.decodeUTF8=function(t){for(var e,i=0,n="",s=0,r=0,o=0,h=0;t.length>i;){var a=t[i++];if(-1==a)e=0!=r?65533:-1;else if(0==r)u.inRange(a,0,127)?e=a:(u.inRange(a,194,223)?(r=1,h=128,s=a-192):u.inRange(a,224,239)?(r=2,h=2048,s=a-224):u.inRange(a,240,244)&&(r=3,h=65536,s=a-240),s*=Math.pow(64,r),e=null);else if(u.inRange(a,128,191))if(o+=1,s+=(a-128)*Math.pow(64,r-o),o!==r)e=null;else{var l=s,c=h;h=o=r=s=0,e=u.inRange(l,c,1114111)&&!this.inRange(l,55296,57343)?l:a}else h=o=r=s=0,i--,e=65533;null!==e&&-1!==e&&(e<=65535?0<e&&(n+=String.fromCharCode(e)):(e-=65536,n+=String.fromCharCode(55296+(e>>10&1023)),n+=String.fromCharCode(56320+(1023&e))))}return n},u}(),e.RawByte=i}(fgui||(fgui={})),function(t){var e,i;e=t.utils||(t.utils={}),i=function(){function e(){}return e.encodeHTML=function(t){return t?t.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;").replace("'","&apos;"):""},e.getFileName=function(t){var e=t.lastIndexOf("/");return-1!=e&&(t=t.substr(e+1)),-1!=(e=t.lastIndexOf("\\"))&&(t=t.substr(e+1)),-1!=(e=t.lastIndexOf("."))?t.substring(0,e):t},e.startsWith=function(t,e,i){return void 0===i&&(i=!1),!!t&&(!(t.length<e.length)&&(t=t.substring(0,e.length),i?t.toLowerCase()==e.toLowerCase():t==e))},e.endsWith=function(t,e,i){return void 0===i&&(i=!1),!!t&&(!(t.length<e.length)&&(t=t.substring(t.length-e.length),i?t.toLowerCase()==e.toLowerCase():t==e))},e.trim=function(t){return e.trimLeft(e.trimRight(t))},e.trimLeft=function(t){var e,i="";for(e=0;e<t.length&&(" "==(i=t.charAt(e))||"\n"==i||"\r"==i);e++);return t.substr(e)},e.trimRight=function(t){var e,i="";for(e=t.length-1;0<=e&&(" "==(i=t.charAt(e))||"\n"==i||"\r"==i);e--);return t.substring(0,e+1)},e.convertToHtmlColor=function(t,e){var i;void 0===e&&(e=!1),i=e?(t>>24&255).toString(16):"";var n=(t>>16&255).toString(16),s=(t>>8&255).toString(16),r=(255&t).toString(16);return 1==i.length&&(i="0"+i),1==n.length&&(n="0"+n),1==s.length&&(s="0"+s),1==r.length&&(r="0"+r),"#"+i+n+s+r},e.convertFromHtmlColor=function(t,e){return void 0===e&&(e=!1),t.length<1?0:("#"==t.charAt(0)&&(t=t.substr(1)),8==t.length?(parseInt(t.substr(0,2),16)<<24)+parseInt(t.substr(2),16):e?4278190080+parseInt(t,16):parseInt(t,16))},e}(),e.StringUtil=i}(fgui||(fgui={})),function(t){var e,i;e=t.utils||(t.utils={}),i=function(){function t(){this.$readPos=0,this.smallFontSize=12,this.normalFontSize=14,this.largeFontSize=16,this.defaultImgWidth=0,this.defaultImgHeight=0,this.$handlers={url:this.onTag_URL,img:this.onTag_IMG,b:this.onTag_Simple,i:this.onTag_Simple,u:this.onTag_Simple,sup:this.onTag_Simple,sub:this.onTag_Simple,color:this.onTag_COLOR,font:this.onTag_FONT,size:this.onTag_SIZE}}return t.prototype.onTag_URL=function(t,e,i){return e?"</a>":null!=i?'<a href="'+i+'" target="_blank">':'<a href="'+this.getTagText()+'" target="_blank">'},t.prototype.onTag_IMG=function(t,e,i){if(e)return null;var n=this.getTagText(!0);return n?this.defaultImgWidth?'<img src="'+n+'" width="'+this.defaultImgWidth+'" height="'+this.defaultImgHeight+'"/>':'<img src="'+n+'"/>':null},t.prototype.onTag_Simple=function(t,e,i){return e?"</"+t+">":"<"+t+">"},t.prototype.onTag_COLOR=function(t,e,i){return e?"</font>":'<font color="'+i+'">'},t.prototype.onTag_FONT=function(t,e,i){return e?"</font>":'<font face="'+i+'">'},t.prototype.onTag_SIZE=function(t,e,i){return e?"</font>":("normal"==i?i=""+this.normalFontSize:"small"==i?i=""+this.smallFontSize:"large"==i?i=""+this.largeFontSize:i.length&&"+"==i.charAt(0)?i=""+(this.smallFontSize+parseInt(i.substr(1))):i.length&&"-"==i.charAt(0)&&(i=""+(this.smallFontSize-parseInt(i.substr(1)))),'<font size="'+i+'">')},t.prototype.getTagText=function(t){void 0===t&&(t=!1);var e=this.$text.indexOf("[",this.$readPos);if(-1==e)return null;var i=this.$text.substring(this.$readPos,e);return t&&(this.$readPos=e),i},t.prototype.parseStyle=function(t){return[]},t.inst=new t,t}(),e.UBBParser=i}(fgui||(fgui={})),function(t){!function(t){var h=function(){function t(t){this.nodeName=t.nodeName,this.context=t,this.type=t.nodeType,this.text=this.type==Node.COMMENT_NODE||this.type==Node.TEXT_NODE?this.context.textContent:null}return Object.defineProperty(t.prototype,"children",{get:function(){return this.$children||(this.$children=e.getChildNodes(this)),this.$children},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this.$attributes||(this.$attributes=e.getNodeAttributes(this)),this.$attributes},enumerable:!0,configurable:!0}),t}();t.XmlNode=h;var e=function(){function n(){}return n.tryParse=function(t,e){void 0===e&&(e="application/xml");var i=n.$parser.parseFromString(t,e);return i&&i.childNodes&&1<=i.childNodes.length?new h(i.firstChild):null},n.getXmlRoot=function(t){if(!t||!t.context)throw new Error("Invalid xml node");for(var e=t.context;null!=e.parentNode;)e=e.parentNode;return e==t.context?t:new h(e)},n.getChildNodes=function(t,e){void 0===e&&(e=null);var i=t.context.childNodes,n=[];if(!i||i.length<=0)return n;for(var s=i.length,r=0;r<s;r++){var o=i.item(r);o.nodeType!=Node.TEXT_NODE&&((!e||e&&0<e.length&&o.nodeName.toLowerCase()==e.toLowerCase())&&n.push(new h(o)))}return n},n.getNodeAttributes=function(t){var e=t.context.attributes,i={};if(!e||e.length<=0)return i;for(var n=e.length,s=0;s<n;s++){var r=e.item(s);i[r.nodeName]=r.nodeValue}return i},n.$parser=new DOMParser,n}();t.XmlParser=e}(t.utils||(t.utils={}))}(fgui||(fgui={}));